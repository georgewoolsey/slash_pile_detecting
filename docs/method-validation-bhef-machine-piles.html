<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 11 Method Validation: BHEF Machine Piles | Aerial Imagery and Point Cloud Data for Slash Pile Quantification</title>
  <meta name="description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 11 Method Validation: BHEF Machine Piles | Aerial Imagery and Point Cloud Data for Slash Pile Quantification" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 11 Method Validation: BHEF Machine Piles | Aerial Imagery and Point Cloud Data for Slash Pile Quantification" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book of data exploration. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="George Woolsey" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="method-validation-pinyon-juniper.html"/>
<link rel="next" href="method-validation-arnf-machine-piles.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script src="libs/. - 1_d2f159-1/data_stars_1b1597e.txt"></script>
<script src="libs/joda-0.0.1/joda.js"></script>
<script src="libs/joda-0.0.1/addImageQuery-bindings.js"></script>
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/study sites-CSS-0.0.1/study sites_home-button.css" rel="stylesheet" />
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objective"><i class="fa fa-check"></i><b>1.1</b> Objective</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data_desc"><i class="fa fa-check"></i><b>1.2</b> Data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#analysis-plan"><i class="fa fa-check"></i><b>1.3</b> Analysis Plan</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="training-data.html"><a href="training-data.html"><i class="fa fa-check"></i><b>2</b> Training Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="training-data.html"><a href="training-data.html#site-introduction"><i class="fa fa-check"></i><b>2.1</b> Site Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="training-data.html"><a href="training-data.html#slash-pile-vector-data"><i class="fa fa-check"></i><b>2.2</b> Slash Pile Vector Data</a></li>
<li class="chapter" data-level="2.3" data-path="training-data.html"><a href="training-data.html#rgb-orthomosaic"><i class="fa fa-check"></i><b>2.3</b> RGB orthomosaic</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="training-data.html"><a href="training-data.html#example-ratio-based-index"><i class="fa fa-check"></i><b>2.3.1</b> Example ratio-based index</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="training-data.html"><a href="training-data.html#study-area-imagery"><i class="fa fa-check"></i><b>2.4</b> Study area imagery</a></li>
<li class="chapter" data-level="2.5" data-path="training-data.html"><a href="training-data.html#point-cloud-data"><i class="fa fa-check"></i><b>2.5</b> Point Cloud Data</a></li>
<li class="chapter" data-level="2.6" data-path="training-data.html"><a href="training-data.html#check-out-one-pile"><i class="fa fa-check"></i><b>2.6</b> Check out one pile</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="method-evaluation.html"><a href="method-evaluation.html"><i class="fa fa-check"></i><b>3</b> Method Evaluation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="method-evaluation.html"><a href="method-evaluation.html#iou_match"><i class="fa fa-check"></i><b>3.1</b> Instance Matching</a></li>
<li class="chapter" data-level="3.2" data-path="method-evaluation.html"><a href="method-evaluation.html#detect_metrics_form"><i class="fa fa-check"></i><b>3.2</b> Detection Accuracy Metrics</a></li>
<li class="chapter" data-level="3.3" data-path="method-evaluation.html"><a href="method-evaluation.html#quant_metrics_form"><i class="fa fa-check"></i><b>3.3</b> Quantification Accuracy Metrics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ptcld_process.html"><a href="ptcld_process.html"><i class="fa fa-check"></i><b>4</b> Point Cloud Processing and Pile Segmentation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ptcld_process.html"><a href="ptcld_process.html#process-raw-point-cloud"><i class="fa fa-check"></i><b>4.1</b> Process Raw Point Cloud</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ptcld_process.html"><a href="ptcld_process.html#dtm-and-chm-piles"><i class="fa fa-check"></i><b>4.1.1</b> DTM and CHM + piles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="raster_watershed.html"><a href="raster_watershed.html"><i class="fa fa-check"></i><b>5</b> Structural Detection from CHM</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster_watershed.html"><a href="raster_watershed.html#method-demonstration"><i class="fa fa-check"></i><b>5.1</b> Method Demonstration</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster_watershed.html"><a href="raster_watershed.html#geometric-filtering-irregularity-filtering"><i class="fa fa-check"></i><b>5.1.1</b> Geometric filtering: Irregularity Filtering</a></li>
<li class="chapter" data-level="5.1.2" data-path="raster_watershed.html"><a href="raster_watershed.html#area-filtering"><i class="fa fa-check"></i><b>5.1.2</b> Area Filtering</a></li>
<li class="chapter" data-level="5.1.3" data-path="raster_watershed.html"><a href="raster_watershed.html#geometric-filtering-circularity-filtering"><i class="fa fa-check"></i><b>5.1.3</b> Geometric filtering: Circularity Filtering</a></li>
<li class="chapter" data-level="5.1.4" data-path="raster_watershed.html"><a href="raster_watershed.html#area-and-volume-from-chm"><i class="fa fa-check"></i><b>5.1.4</b> Area and Volume from CHM</a></li>
<li class="chapter" data-level="5.1.5" data-path="raster_watershed.html"><a href="raster_watershed.html#shape-refinement"><i class="fa fa-check"></i><b>5.1.5</b> Shape Refinement</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster_watershed.html"><a href="raster_watershed.html#instance-matching"><i class="fa fa-check"></i><b>5.2</b> Instance Matching</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster_watershed.html"><a href="raster_watershed.html#example-area"><i class="fa fa-check"></i><b>5.2.1</b> Example Area</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster_watershed.html"><a href="raster_watershed.html#full-study-area"><i class="fa fa-check"></i><b>5.2.2</b> Full Study Area</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster_watershed.html"><a href="raster_watershed.html#slash_pile_detect_watershed"><i class="fa fa-check"></i><b>5.3</b> Watershed Pile Detection Function</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data_fusion.html"><a href="data_fusion.html"><i class="fa fa-check"></i><b>6</b> Data Fusion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data_fusion.html"><a href="data_fusion.html#rgb-indices"><i class="fa fa-check"></i><b>6.1</b> RGB Indices</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data_fusion.html"><a href="data_fusion.html#spectral-index-functions"><i class="fa fa-check"></i><b>6.1.1</b> Spectral Index Functions</a></li>
<li class="chapter" data-level="6.1.2" data-path="data_fusion.html"><a href="data_fusion.html#spectral-index-of-polygons"><i class="fa fa-check"></i><b>6.1.2</b> Spectral Index of Polygons</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data_fusion.html"><a href="data_fusion.html#ground-truth-pile-spectral-summary"><i class="fa fa-check"></i><b>6.2</b> Ground Truth Pile Spectral Summary</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data_fusion.html"><a href="data_fusion.html#voting-system"><i class="fa fa-check"></i><b>6.2.1</b> Voting System</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data_fusion.html"><a href="data_fusion.html#polygon_spectral_filtering"><i class="fa fa-check"></i><b>6.3</b> Candidate Polygon Spectral Filtering Function</a></li>
<li class="chapter" data-level="6.4" data-path="data_fusion.html"><a href="data_fusion.html#data-fusion-example"><i class="fa fa-check"></i><b>6.4</b> Data Fusion Example</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data_fusion.html"><a href="data_fusion.html#instance-matching-1"><i class="fa fa-check"></i><b>6.4.1</b> Instance Matching</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="wshed_params_test.html"><a href="wshed_params_test.html"><i class="fa fa-check"></i><b>7</b> Sensitivity Testing Method</a>
<ul>
<li class="chapter" data-level="7.1" data-path="wshed_params_test.html"><a href="wshed_params_test.html#all_the_combos"><i class="fa fa-check"></i><b>7.1</b> Workflow over parameter combinations</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="wshed_params_test.html"><a href="wshed_params_test.html#test-workflow"><i class="fa fa-check"></i><b>7.1.1</b> Test Workflow</a></li>
<li class="chapter" data-level="7.1.2" data-path="wshed_params_test.html"><a href="wshed_params_test.html#test-instance-matching"><i class="fa fa-check"></i><b>7.1.2</b> Test Instance Matching</a></li>
<li class="chapter" data-level="7.1.3" data-path="wshed_params_test.html"><a href="wshed_params_test.html#test-accuracy"><i class="fa fa-check"></i><b>7.1.3</b> Test Accuracy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chm_sens_test.html"><a href="chm_sens_test.html"><i class="fa fa-check"></i><b>8</b> Sensitivity Testing Results</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chm_sens_test.html"><a href="chm_sens_test.html#process-raw-point-cloud-1"><i class="fa fa-check"></i><b>8.1</b> Process Raw Point Cloud</a></li>
<li class="chapter" data-level="8.2" data-path="chm_sens_test.html"><a href="chm_sens_test.html#structural-only-parameter-testing"><i class="fa fa-check"></i><b>8.2</b> Structural Only: Parameter Testing</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="chm_sens_test.html"><a href="chm_sens_test.html#validation-over-parameter-combinations"><i class="fa fa-check"></i><b>8.2.1</b> Validation over parameter combinations</a></li>
<li class="chapter" data-level="8.2.2" data-path="chm_sens_test.html"><a href="chm_sens_test.html#aggregate-validation-metrics-to-parameter-combination"><i class="fa fa-check"></i><b>8.2.2</b> Aggregate Validation Metrics to Parameter Combination</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="chm_sens_test.html"><a href="chm_sens_test.html#data-fusion-parameter-testing"><i class="fa fa-check"></i><b>8.3</b> Data Fusion: Parameter Testing</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="chm_sens_test.html"><a href="chm_sens_test.html#aggregate-validation-metrics-to-parameter-combination-1"><i class="fa fa-check"></i><b>8.3.1</b> Aggregate Validation Metrics to Parameter Combination</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="chm_sens_test.html"><a href="chm_sens_test.html#read-data-for-analysis"><i class="fa fa-check"></i><b>8.4</b> Read Data for Analysis</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="chm_sens_test.html"><a href="chm_sens_test.html#structural-only"><i class="fa fa-check"></i><b>8.4.1</b> Structural Only</a></li>
<li class="chapter" data-level="8.4.2" data-path="chm_sens_test.html"><a href="chm_sens_test.html#data-fusion"><i class="fa fa-check"></i><b>8.4.2</b> Data Fusion</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="chm_sens_test.html"><a href="chm_sens_test.html#allthetests"><i class="fa fa-check"></i><b>8.5</b> Structural Only: Sensitivity Testing</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="chm_sens_test.html"><a href="chm_sens_test.html#detect_trends"><i class="fa fa-check"></i><b>8.5.1</b> Main Effects: pile detection</a></li>
<li class="chapter" data-level="8.5.2" data-path="chm_sens_test.html"><a href="chm_sens_test.html#quant_trends"><i class="fa fa-check"></i><b>8.5.2</b> Main Effects: form quantification</a></li>
<li class="chapter" data-level="8.5.3" data-path="chm_sens_test.html"><a href="chm_sens_test.html#best-settings"><i class="fa fa-check"></i><b>8.5.3</b> Best settings</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="chm_sens_test.html"><a href="chm_sens_test.html#data-fusion-sensitivity-testing"><i class="fa fa-check"></i><b>8.6</b> Data Fusion: Sensitivity Testing</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="chm_sens_test.html"><a href="chm_sens_test.html#main-effects-pile-detection"><i class="fa fa-check"></i><b>8.6.1</b> Main Effects: pile detection</a></li>
<li class="chapter" data-level="8.6.2" data-path="chm_sens_test.html"><a href="chm_sens_test.html#main-effects-form-quantification"><i class="fa fa-check"></i><b>8.6.2</b> Main Effects: form quantification</a></li>
<li class="chapter" data-level="8.6.3" data-path="chm_sens_test.html"><a href="chm_sens_test.html#balanced_acc_assess"><i class="fa fa-check"></i><b>8.6.3</b> Top settings</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="chm_sens_test.html"><a href="chm_sens_test.html#save-the-data"><i class="fa fa-check"></i><b>8.7</b> save the data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="stats_method.html"><a href="stats_method.html"><i class="fa fa-check"></i><b>9</b> Statistical Testing of Method Settings</a>
<ul>
<li class="chapter" data-level="9.1" data-path="stats_method.html"><a href="stats_method.html#bayesian-glm---f-score"><i class="fa fa-check"></i><b>9.1</b> Bayesian GLM - F-score</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="stats_method.html"><a href="stats_method.html#model-selection"><i class="fa fa-check"></i><b>9.1.1</b> Model selection</a></li>
<li class="chapter" data-level="9.1.2" data-path="stats_method.html"><a href="stats_method.html#modeling"><i class="fa fa-check"></i><b>9.1.2</b> Modeling</a></li>
<li class="chapter" data-level="9.1.3" data-path="stats_method.html"><a href="stats_method.html#posterior-predictive-checks"><i class="fa fa-check"></i><b>9.1.3</b> Posterior Predictive Checks</a></li>
<li class="chapter" data-level="9.1.4" data-path="stats_method.html"><a href="stats_method.html#conditional-effects"><i class="fa fa-check"></i><b>9.1.4</b> Conditional Effects</a></li>
<li class="chapter" data-level="9.1.5" data-path="stats_method.html"><a href="stats_method.html#f_score_epred"><i class="fa fa-check"></i><b>9.1.5</b> Posterior Predictive Expectation</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="stats_method.html"><a href="stats_method.html#mod_diam_mape"><i class="fa fa-check"></i><b>9.2</b> Bayesian GLM - Diameter MAPE</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="stats_method.html"><a href="stats_method.html#model-selection-1"><i class="fa fa-check"></i><b>9.2.1</b> Model selection</a></li>
<li class="chapter" data-level="9.2.2" data-path="stats_method.html"><a href="stats_method.html#mod_diam_mape2"><i class="fa fa-check"></i><b>9.2.2</b> Modeling</a></li>
<li class="chapter" data-level="9.2.3" data-path="stats_method.html"><a href="stats_method.html#posterior-predictive-checks-1"><i class="fa fa-check"></i><b>9.2.3</b> Posterior Predictive Checks</a></li>
<li class="chapter" data-level="9.2.4" data-path="stats_method.html"><a href="stats_method.html#conditional-effects-1"><i class="fa fa-check"></i><b>9.2.4</b> Conditional Effects</a></li>
<li class="chapter" data-level="9.2.5" data-path="stats_method.html"><a href="stats_method.html#posterior-predictive-expectation"><i class="fa fa-check"></i><b>9.2.5</b> Posterior Predictive Expectation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="stats_method.html"><a href="stats_method.html#bayesian-glm---height-mape"><i class="fa fa-check"></i><b>9.3</b> Bayesian GLM - Height MAPE</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="stats_method.html"><a href="stats_method.html#model-selection-2"><i class="fa fa-check"></i><b>9.3.1</b> Model selection</a></li>
<li class="chapter" data-level="9.3.2" data-path="stats_method.html"><a href="stats_method.html#modeling-1"><i class="fa fa-check"></i><b>9.3.2</b> Modeling</a></li>
<li class="chapter" data-level="9.3.3" data-path="stats_method.html"><a href="stats_method.html#posterior-predictive-checks-2"><i class="fa fa-check"></i><b>9.3.3</b> Posterior Predictive Checks</a></li>
<li class="chapter" data-level="9.3.4" data-path="stats_method.html"><a href="stats_method.html#conditional-effects-2"><i class="fa fa-check"></i><b>9.3.4</b> Conditional Effects</a></li>
<li class="chapter" data-level="9.3.5" data-path="stats_method.html"><a href="stats_method.html#posterior-predictive-expectation-1"><i class="fa fa-check"></i><b>9.3.5</b> Posterior Predictive Expectation</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="stats_method.html"><a href="stats_method.html#hey_balanced_acc"><i class="fa fa-check"></i><b>9.4</b> Balanced Accuracy Bayesian Optimization</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="stats_method.html"><a href="stats_method.html#balanced-accuracy-selection"><i class="fa fa-check"></i><b>9.4.1</b> Balanced Accuracy Selection</a></li>
<li class="chapter" data-level="9.4.2" data-path="stats_method.html"><a href="stats_method.html#overall-across-chm-resolution-2"><i class="fa fa-check"></i><b>9.4.2</b> Overall (across CHM resolution)</a></li>
<li class="chapter" data-level="9.4.3" data-path="stats_method.html"><a href="stats_method.html#by-chm-resolution-2"><i class="fa fa-check"></i><b>9.4.3</b> by CHM resolution</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="stats_method.html"><a href="stats_method.html#training_detect_final"><i class="fa fa-check"></i><b>9.5</b> Balanced Accuracy Validation</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="stats_method.html"><a href="stats_method.html#detection"><i class="fa fa-check"></i><b>9.5.1</b> Detection</a></li>
<li class="chapter" data-level="9.5.2" data-path="stats_method.html"><a href="stats_method.html#instance-match-accuracy-assessment"><i class="fa fa-check"></i><b>9.5.2</b> Instance Match &amp; Accuracy Assessment</a></li>
<li class="chapter" data-level="9.5.3" data-path="stats_method.html"><a href="stats_method.html#training_detect_final_volcomp"><i class="fa fa-check"></i><b>9.5.3</b> Volume Comparison</a></li>
<li class="chapter" data-level="9.5.4" data-path="stats_method.html"><a href="stats_method.html#stand-level-aggregation"><i class="fa fa-check"></i><b>9.5.4</b> Stand-level Aggregation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html"><i class="fa fa-check"></i><b>10</b> Method Validation: Pinyon-Juniper</a>
<ul>
<li class="chapter" data-level="10.1" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#site-introduction-1"><i class="fa fa-check"></i><b>10.1</b> Site Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#data-processing"><i class="fa fa-check"></i><b>10.2</b> Data Processing</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#vector-data"><i class="fa fa-check"></i><b>10.2.1</b> Vector Data</a></li>
<li class="chapter" data-level="10.2.2" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#rgb-data"><i class="fa fa-check"></i><b>10.2.2</b> RGB Data</a></li>
<li class="chapter" data-level="10.2.3" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#process-raw-point-cloud-2"><i class="fa fa-check"></i><b>10.2.3</b> Process Raw Point Cloud</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#pj_detect_fusion"><i class="fa fa-check"></i><b>10.3</b> Pile Detection: Data Fusion</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#structural-candidate-segments"><i class="fa fa-check"></i><b>10.3.1</b> Structural Candidate Segments</a></li>
<li class="chapter" data-level="10.3.2" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#accuracy-of-these-structural-settings"><i class="fa fa-check"></i><b>10.3.2</b> Accuracy of these structural settings</a></li>
<li class="chapter" data-level="10.3.3" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#spect_filtering_final_pj"><i class="fa fa-check"></i><b>10.3.3</b> Spectral Filtering of Candidate Segments</a></li>
<li class="chapter" data-level="10.3.4" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#detection-and-quantification-accuracy"><i class="fa fa-check"></i><b>10.3.4</b> Detection and Quantification Accuracy</a></li>
<li class="chapter" data-level="10.3.5" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#validation_detect_final_volcomp"><i class="fa fa-check"></i><b>10.3.5</b> Volume Comparison</a></li>
<li class="chapter" data-level="10.3.6" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#stand-level-aggregation-1"><i class="fa fa-check"></i><b>10.3.6</b> Stand-level Aggregation</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#pj_detect_struct"><i class="fa fa-check"></i><b>10.4</b> Pile Detection: Structural Only</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#structural-detection"><i class="fa fa-check"></i><b>10.4.1</b> Structural Detection</a></li>
<li class="chapter" data-level="10.4.2" data-path="method-validation-pinyon-juniper.html"><a href="method-validation-pinyon-juniper.html#detection-and-quantification-accuracy-1"><i class="fa fa-check"></i><b>10.4.2</b> Detection and Quantification Accuracy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html"><i class="fa fa-check"></i><b>11</b> Method Validation: BHEF Machine Piles</a>
<ul>
<li class="chapter" data-level="11.1" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#site-introduction-2"><i class="fa fa-check"></i><b>11.1</b> Site Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#data-processing-1"><i class="fa fa-check"></i><b>11.2</b> Data Processing</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#rgb-data-1"><i class="fa fa-check"></i><b>11.2.1</b> RGB Data</a></li>
<li class="chapter" data-level="11.2.2" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#process-raw-point-cloud-3"><i class="fa fa-check"></i><b>11.2.2</b> Process Raw Point Cloud</a></li>
<li class="chapter" data-level="11.2.3" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#vector-data-1"><i class="fa fa-check"></i><b>11.2.3</b> Vector Data</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#bhef_detect_fusion"><i class="fa fa-check"></i><b>11.3</b> Pile Detection: Data Fusion</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#structural-candidate-segments-1"><i class="fa fa-check"></i><b>11.3.1</b> Structural Candidate Segments</a></li>
<li class="chapter" data-level="11.3.2" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#accuracy-of-these-structural-settings-1"><i class="fa fa-check"></i><b>11.3.2</b> Accuracy of these structural settings</a></li>
<li class="chapter" data-level="11.3.3" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#spect_filtering_final_bhef"><i class="fa fa-check"></i><b>11.3.3</b> Spectral Filtering of Candidate Segments</a></li>
<li class="chapter" data-level="11.3.4" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#detection-and-quantification-accuracy-2"><i class="fa fa-check"></i><b>11.3.4</b> Detection and Quantification Accuracy</a></li>
<li class="chapter" data-level="11.3.5" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#stand-level-aggregation-2"><i class="fa fa-check"></i><b>11.3.5</b> Stand-level Aggregation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html"><i class="fa fa-check"></i><b>12</b> Method Validation: ARNF Machine Piles</a>
<ul>
<li class="chapter" data-level="12.1" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#site-introduction-3"><i class="fa fa-check"></i><b>12.1</b> Site Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#data-processing-2"><i class="fa fa-check"></i><b>12.2</b> Data Processing</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#process-raw-point-cloud-4"><i class="fa fa-check"></i><b>12.2.1</b> Process Raw Point Cloud</a></li>
<li class="chapter" data-level="12.2.2" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#vector-data-2"><i class="fa fa-check"></i><b>12.2.2</b> Vector Data</a></li>
<li class="chapter" data-level="12.2.3" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#rgb-data-2"><i class="fa fa-check"></i><b>12.2.3</b> RGB Data</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#arnf_detect_fusion"><i class="fa fa-check"></i><b>12.3</b> Pile Detection: Data Fusion</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#structural-candidate-segments-2"><i class="fa fa-check"></i><b>12.3.1</b> Structural Candidate Segments</a></li>
<li class="chapter" data-level="12.3.2" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#accuracy-of-these-structural-settings-2"><i class="fa fa-check"></i><b>12.3.2</b> Accuracy of these structural settings</a></li>
<li class="chapter" data-level="12.3.3" data-path="method-validation-bhef-machine-piles.html"><a href="method-validation-bhef-machine-piles.html#spect_filtering_final_bhef"><i class="fa fa-check"></i><b>12.3.3</b> Spectral Filtering of Candidate Segments</a></li>
<li class="chapter" data-level="12.3.4" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#detection-and-quantification-accuracy-3"><i class="fa fa-check"></i><b>12.3.4</b> Detection and Quantification Accuracy</a></li>
<li class="chapter" data-level="12.3.5" data-path="method-validation-arnf-machine-piles.html"><a href="method-validation-arnf-machine-piles.html#stand-level-aggregation-3"><i class="fa fa-check"></i><b>12.3.5</b> Stand-level Aggregation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="validation_summary.html"><a href="validation_summary.html"><i class="fa fa-check"></i><b>13</b> Method Validation: Summary</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Aerial Imagery and Point Cloud Data for Slash Pile Quantification</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="method-validation-bhef-machine-piles" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Section 11</span> Method Validation: BHEF Machine Piles<a href="method-validation-bhef-machine-piles.html#method-validation-bhef-machine-piles" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="site-introduction-2" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Site Introduction<a href="method-validation-bhef-machine-piles.html#site-introduction-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here, we’ll be working with a ponderosa pine evaluation site from the Black Hills Experimental Forest (BHEF) which will serve as a critical test of the slash pile detection methodology’s generalizability against massive machine piles. While ecologically similar to the training site, this location features a fundamentally different pile construction, resulting in massive machine piles that exhibit a high degree of geometric irregularity, with observed shapes ranging from circular to rectangular perimeters and numerous complex deviations. The treatment that created these piles occurred approximately two years prior to data collection. Based on local precipitation and forest type, significant tree regeneration is expected, which introduces a challenge for our spectral filtering methodology for minimizing false positives.</p>
<p>Given these novel structural and ecological conditions, the detection parameters will be adjusted from the training site’s optimal settings. For the BHEF site, parameter adjustments will focus on relaxing the geometric filters (e.g. <code>circle_fit_iou_pct</code>) to accommodate the varied footprints of these machine-built piles. We will rely on strict size and scale filters (e.g. <code>min_ht_m</code> and <code>min_area_m2</code>) to exclude smaller non-pile objects such as shrubs and trees. As with the Pinyon-Juniper site, image-annotated pile footprints will be used as ground truth data to calculate performance metrics (e.g., F-score and MAPE) to determine how well the methodology generalizes to these large, unprecedented, and structurally complex structures.</p>
<p><em>insert prescription detail</em></p>
</div>
<div id="data-processing-1" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Data Processing<a href="method-validation-bhef-machine-piles.html#data-processing-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rgb-data-1" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> RGB Data<a href="method-validation-bhef-machine-piles.html#rgb-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The RGB data is spread across many different files so we’ll need to read those files individually, adjust and standardize the resolution, and then mosaic them together</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="method-validation-bhef-machine-piles.html#cb616-1" tabindex="-1"></a><span class="do">## function to change the resolution of RGB </span></span>
<span id="cb616-2"><a href="method-validation-bhef-machine-piles.html#cb616-2" tabindex="-1"></a>change_res_fn <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb616-3"><a href="method-validation-bhef-machine-piles.html#cb616-3" tabindex="-1"></a>  r</span>
<span id="cb616-4"><a href="method-validation-bhef-machine-piles.html#cb616-4" tabindex="-1"></a>  , <span class="at">my_res=</span><span class="dv">1</span></span>
<span id="cb616-5"><a href="method-validation-bhef-machine-piles.html#cb616-5" tabindex="-1"></a>  , <span class="at">m =</span> <span class="st">&quot;bilinear&quot;</span></span>
<span id="cb616-6"><a href="method-validation-bhef-machine-piles.html#cb616-6" tabindex="-1"></a>  <span class="co"># , ofile = tempfile(fileext = &quot;.tif&quot;)</span></span>
<span id="cb616-7"><a href="method-validation-bhef-machine-piles.html#cb616-7" tabindex="-1"></a>  , <span class="at">ofile =</span> <span class="cn">NULL</span></span>
<span id="cb616-8"><a href="method-validation-bhef-machine-piles.html#cb616-8" tabindex="-1"></a>){</span>
<span id="cb616-9"><a href="method-validation-bhef-machine-piles.html#cb616-9" tabindex="-1"></a>  r2 <span class="ot">&lt;-</span> r</span>
<span id="cb616-10"><a href="method-validation-bhef-machine-piles.html#cb616-10" tabindex="-1"></a>  terra<span class="sc">::</span><span class="fu">res</span>(r2) <span class="ot">&lt;-</span> my_res</span>
<span id="cb616-11"><a href="method-validation-bhef-machine-piles.html#cb616-11" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">inherits</span>(ofile,<span class="st">&quot;character&quot;</span>)){</span>
<span id="cb616-12"><a href="method-validation-bhef-machine-piles.html#cb616-12" tabindex="-1"></a>    r2 <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(r, r2, <span class="at">method =</span> m) </span>
<span id="cb616-13"><a href="method-validation-bhef-machine-piles.html#cb616-13" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb616-14"><a href="method-validation-bhef-machine-piles.html#cb616-14" tabindex="-1"></a>    r2 <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(r, r2, <span class="at">method =</span> m, <span class="at">filename=</span>ofile, <span class="at">overwrite =</span> T) </span>
<span id="cb616-15"><a href="method-validation-bhef-machine-piles.html#cb616-15" tabindex="-1"></a>  }</span>
<span id="cb616-16"><a href="method-validation-bhef-machine-piles.html#cb616-16" tabindex="-1"></a>  <span class="fu">return</span>(r2)</span>
<span id="cb616-17"><a href="method-validation-bhef-machine-piles.html#cb616-17" tabindex="-1"></a>}</span>
<span id="cb616-18"><a href="method-validation-bhef-machine-piles.html#cb616-18" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb616-19"><a href="method-validation-bhef-machine-piles.html#cb616-19" tabindex="-1"></a><span class="co"># read and compile RGB raster</span></span>
<span id="cb616-20"><a href="method-validation-bhef-machine-piles.html#cb616-20" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb616-21"><a href="method-validation-bhef-machine-piles.html#cb616-21" tabindex="-1"></a>las_dir_temp <span class="ot">&lt;-</span> <span class="st">&quot;F:/UAS_Collections/BHEF_202306&quot;</span> <span class="co"># where is the raw las and rgb data?</span></span>
<span id="cb616-22"><a href="method-validation-bhef-machine-piles.html#cb616-22" tabindex="-1"></a>c2t_output_dir <span class="ot">&lt;-</span> <span class="st">&quot;../data/BHEF_202306/&quot;</span> <span class="co"># where do you want to save processed data to?</span></span>
<span id="cb616-23"><a href="method-validation-bhef-machine-piles.html#cb616-23" tabindex="-1"></a>rgb_fnm_temp <span class="ot">&lt;-</span> <span class="fu">file.path</span>(c2t_output_dir,<span class="st">&quot;bhef_rgb.tif&quot;</span>) <span class="co"># what should the compiled rgb be called?</span></span>
<span id="cb616-24"><a href="method-validation-bhef-machine-piles.html#cb616-24" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(c2t_output_dir)){<span class="fu">dir.create</span>(c2t_output_dir, <span class="at">showWarnings =</span> F)}</span>
<span id="cb616-25"><a href="method-validation-bhef-machine-piles.html#cb616-25" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(rgb_fnm_temp)){</span>
<span id="cb616-26"><a href="method-validation-bhef-machine-piles.html#cb616-26" tabindex="-1"></a>  <span class="co"># read list of orthos</span></span>
<span id="cb616-27"><a href="method-validation-bhef-machine-piles.html#cb616-27" tabindex="-1"></a>    ortho_list_temp <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb616-28"><a href="method-validation-bhef-machine-piles.html#cb616-28" tabindex="-1"></a>        las_dir_temp</span>
<span id="cb616-29"><a href="method-validation-bhef-machine-piles.html#cb616-29" tabindex="-1"></a>        , <span class="at">pattern =</span> <span class="st">&quot;.*(_RGB|_RBG)</span><span class="sc">\\</span><span class="st">.(tif|tiff)$&quot;</span></span>
<span id="cb616-30"><a href="method-validation-bhef-machine-piles.html#cb616-30" tabindex="-1"></a>        , <span class="at">full.names =</span> T, <span class="at">recursive =</span> T</span>
<span id="cb616-31"><a href="method-validation-bhef-machine-piles.html#cb616-31" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb616-32"><a href="method-validation-bhef-machine-piles.html#cb616-32" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){terra<span class="sc">::</span><span class="fu">rast</span>(x)})</span>
<span id="cb616-33"><a href="method-validation-bhef-machine-piles.html#cb616-33" tabindex="-1"></a>    <span class="do">## apply the change_res_fn</span></span>
<span id="cb616-34"><a href="method-validation-bhef-machine-piles.html#cb616-34" tabindex="-1"></a>    ortho_list_temp <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ortho_list_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb616-35"><a href="method-validation-bhef-machine-piles.html#cb616-35" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){<span class="fu">change_res_fn</span>(ortho_list_temp[[x]], <span class="at">my_res=</span><span class="fl">0.04</span>)})</span>
<span id="cb616-36"><a href="method-validation-bhef-machine-piles.html#cb616-36" tabindex="-1"></a>    <span class="do">######## mosaic the raster list </span></span>
<span id="cb616-37"><a href="method-validation-bhef-machine-piles.html#cb616-37" tabindex="-1"></a>    bhef_rgb_rast <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mosaic</span>(</span>
<span id="cb616-38"><a href="method-validation-bhef-machine-piles.html#cb616-38" tabindex="-1"></a>      terra<span class="sc">::</span><span class="fu">sprc</span>(ortho_list_temp)</span>
<span id="cb616-39"><a href="method-validation-bhef-machine-piles.html#cb616-39" tabindex="-1"></a>      , <span class="at">fun =</span> <span class="st">&quot;min&quot;</span> <span class="co"># min only thing that works</span></span>
<span id="cb616-40"><a href="method-validation-bhef-machine-piles.html#cb616-40" tabindex="-1"></a>      , <span class="at">filename =</span> rgb_fnm_temp</span>
<span id="cb616-41"><a href="method-validation-bhef-machine-piles.html#cb616-41" tabindex="-1"></a>      , <span class="at">overwrite =</span> T</span>
<span id="cb616-42"><a href="method-validation-bhef-machine-piles.html#cb616-42" tabindex="-1"></a>    )   </span>
<span id="cb616-43"><a href="method-validation-bhef-machine-piles.html#cb616-43" tabindex="-1"></a>    <span class="co"># bhef_rgb_rast %&gt;%</span></span>
<span id="cb616-44"><a href="method-validation-bhef-machine-piles.html#cb616-44" tabindex="-1"></a>    <span class="co">#   terra::aggregate(fact = 2, na.rm=T, cores = lasR::half_cores()) %&gt;%</span></span>
<span id="cb616-45"><a href="method-validation-bhef-machine-piles.html#cb616-45" tabindex="-1"></a>    <span class="co">#   terra::plotRGB(r = 1, g = 2, b = 3, stretch = &quot;hist&quot;, colNA = &quot;transparent&quot;)</span></span>
<span id="cb616-46"><a href="method-validation-bhef-machine-piles.html#cb616-46" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb616-47"><a href="method-validation-bhef-machine-piles.html#cb616-47" tabindex="-1"></a>  bhef_rgb_rast <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(rgb_fnm_temp)</span>
<span id="cb616-48"><a href="method-validation-bhef-machine-piles.html#cb616-48" tabindex="-1"></a>}</span>
<span id="cb616-49"><a href="method-validation-bhef-machine-piles.html#cb616-49" tabindex="-1"></a><span class="fu">names</span>(bhef_rgb_rast) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;alpha&quot;</span>)</span>
<span id="cb616-50"><a href="method-validation-bhef-machine-piles.html#cb616-50" tabindex="-1"></a>terra<span class="sc">::</span><span class="fu">res</span>(bhef_rgb_rast)</span></code></pre></div>
<pre><code>## [1] 0.04 0.04</code></pre>
</div>
<div id="process-raw-point-cloud-3" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Process Raw Point Cloud<a href="method-validation-bhef-machine-piles.html#process-raw-point-cloud-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ll use <code>cloud2trees::cloud2raster()</code> to process the raw point cloud data</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="method-validation-bhef-machine-piles.html#cb618-1" tabindex="-1"></a><span class="co"># output dir</span></span>
<span id="cb618-2"><a href="method-validation-bhef-machine-piles.html#cb618-2" tabindex="-1"></a>dir_temp <span class="ot">&lt;-</span> <span class="fu">file.path</span>(c2t_output_dir, <span class="st">&quot;point_cloud_processing_delivery&quot;</span>)</span>
<span id="cb618-3"><a href="method-validation-bhef-machine-piles.html#cb618-3" tabindex="-1"></a><span class="co"># check out the point cloud data really quick</span></span>
<span id="cb618-4"><a href="method-validation-bhef-machine-piles.html#cb618-4" tabindex="-1"></a><span class="co"># list.files(normalizePath(las_dir_temp), pattern = &quot;.*\\.(laz|las)$&quot;, full.names = TRUE, recursive = T)</span></span>
<span id="cb618-5"><a href="method-validation-bhef-machine-piles.html#cb618-5" tabindex="-1"></a>las_flist_temp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb618-6"><a href="method-validation-bhef-machine-piles.html#cb618-6" tabindex="-1"></a>  <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit1and3Processing.files/BHEF_202306_Unit1and3_laz.laz&quot;</span></span>
<span id="cb618-7"><a href="method-validation-bhef-machine-piles.html#cb618-7" tabindex="-1"></a>  , <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit2Processing.files/BHEF_202306_Unit2_laz.laz&quot;</span>        </span>
<span id="cb618-8"><a href="method-validation-bhef-machine-piles.html#cb618-8" tabindex="-1"></a>  , <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit4Processing.files/BHEF_202306_Unit4_laz.laz&quot;</span>        </span>
<span id="cb618-9"><a href="method-validation-bhef-machine-piles.html#cb618-9" tabindex="-1"></a>  , <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit5Processing.files/BHEF_202306_Unit5_laz.laz&quot;</span>        </span>
<span id="cb618-10"><a href="method-validation-bhef-machine-piles.html#cb618-10" tabindex="-1"></a>  , <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit6Processing.files/BHEF_202306_Unit6_laz.laz&quot;</span>        </span>
<span id="cb618-11"><a href="method-validation-bhef-machine-piles.html#cb618-11" tabindex="-1"></a>  , <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit7Processing.files/BHEF_202306_Unit7_laz.laz&quot;</span>        </span>
<span id="cb618-12"><a href="method-validation-bhef-machine-piles.html#cb618-12" tabindex="-1"></a>  , <span class="st">&quot;F:</span><span class="sc">\\</span><span class="st">UAS_Collections</span><span class="sc">\\</span><span class="st">BHEF_202306/Unit8Processing.files/BHEF_202306_Unit8_laz.laz&quot;</span>   </span>
<span id="cb618-13"><a href="method-validation-bhef-machine-piles.html#cb618-13" tabindex="-1"></a>)</span>
<span id="cb618-14"><a href="method-validation-bhef-machine-piles.html#cb618-14" tabindex="-1"></a><span class="co"># read header with catalog</span></span>
<span id="cb618-15"><a href="method-validation-bhef-machine-piles.html#cb618-15" tabindex="-1"></a>lidR<span class="sc">::</span><span class="fu">readLAScatalog</span>(las_flist_temp)</span></code></pre></div>
<pre><code>## class       : LAScatalog (v1.2 format 2)
## extent      : 608233.4, 610968.2, 4888216, 4889418 (xmin, xmax, ymin, ymax)
## coord. ref. : NAD83 / UTM zone 13N 
## area        : 3.94 km²
## points      : 1.63 billion points
## type        : airborne
## density     : 412.5 points/m²
## density     : 412.5 pulses/m²
## num. files  : 7</code></pre>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb620-1"><a href="method-validation-bhef-machine-piles.html#cb620-1" tabindex="-1"></a><span class="co"># do it</span></span>
<span id="cb620-2"><a href="method-validation-bhef-machine-piles.html#cb620-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(dir_temp)){</span>
<span id="cb620-3"><a href="method-validation-bhef-machine-piles.html#cb620-3" tabindex="-1"></a>  <span class="co"># ctg_temp &lt;- lidR::readLAScatalog(las_flist_temp)</span></span>
<span id="cb620-4"><a href="method-validation-bhef-machine-piles.html#cb620-4" tabindex="-1"></a>  <span class="co"># ctg_temp@data %&gt;% dplyr::glimpse()</span></span>
<span id="cb620-5"><a href="method-validation-bhef-machine-piles.html#cb620-5" tabindex="-1"></a>  <span class="co"># remove(ctg_temp)</span></span>
<span id="cb620-6"><a href="method-validation-bhef-machine-piles.html#cb620-6" tabindex="-1"></a>  <span class="co"># gc()</span></span>
<span id="cb620-7"><a href="method-validation-bhef-machine-piles.html#cb620-7" tabindex="-1"></a>  </span>
<span id="cb620-8"><a href="method-validation-bhef-machine-piles.html#cb620-8" tabindex="-1"></a>  <span class="co"># cloud2trees</span></span>
<span id="cb620-9"><a href="method-validation-bhef-machine-piles.html#cb620-9" tabindex="-1"></a>  cloud2raster_ans <span class="ot">&lt;-</span> cloud2trees<span class="sc">::</span><span class="fu">cloud2raster</span>(</span>
<span id="cb620-10"><a href="method-validation-bhef-machine-piles.html#cb620-10" tabindex="-1"></a>    <span class="at">output_dir =</span> c2t_output_dir</span>
<span id="cb620-11"><a href="method-validation-bhef-machine-piles.html#cb620-11" tabindex="-1"></a>    , <span class="at">input_las_dir =</span> las_flist_temp</span>
<span id="cb620-12"><a href="method-validation-bhef-machine-piles.html#cb620-12" tabindex="-1"></a>    , <span class="at">accuracy_level =</span> <span class="dv">2</span></span>
<span id="cb620-13"><a href="method-validation-bhef-machine-piles.html#cb620-13" tabindex="-1"></a>    , <span class="at">keep_intrmdt =</span> F</span>
<span id="cb620-14"><a href="method-validation-bhef-machine-piles.html#cb620-14" tabindex="-1"></a>    , <span class="at">dtm_res_m =</span> <span class="fl">0.2</span></span>
<span id="cb620-15"><a href="method-validation-bhef-machine-piles.html#cb620-15" tabindex="-1"></a>    , <span class="at">chm_res_m =</span> <span class="fl">0.1</span></span>
<span id="cb620-16"><a href="method-validation-bhef-machine-piles.html#cb620-16" tabindex="-1"></a>    , <span class="at">min_height =</span> <span class="dv">0</span> <span class="co"># effectively generates a DSM based on non-ground points</span></span>
<span id="cb620-17"><a href="method-validation-bhef-machine-piles.html#cb620-17" tabindex="-1"></a>  )</span>
<span id="cb620-18"><a href="method-validation-bhef-machine-piles.html#cb620-18" tabindex="-1"></a>  <span class="co"># cloud2raster_ans$chm_rast</span></span>
<span id="cb620-19"><a href="method-validation-bhef-machine-piles.html#cb620-19" tabindex="-1"></a>  <span class="co"># pc_ext_temp &lt;- sf::st_read(file.path(c2t_output_dir,&quot;point_cloud_processing_delivery&quot;,&quot;raw_las_ctg_info.gpkg&quot;))</span></span>
<span id="cb620-20"><a href="method-validation-bhef-machine-piles.html#cb620-20" tabindex="-1"></a></span>
<span id="cb620-21"><a href="method-validation-bhef-machine-piles.html#cb620-21" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb620-22"><a href="method-validation-bhef-machine-piles.html#cb620-22" tabindex="-1"></a>  dtm_temp <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="st">&quot;dtm_0.2m.tif&quot;</span>) )</span>
<span id="cb620-23"><a href="method-validation-bhef-machine-piles.html#cb620-23" tabindex="-1"></a>  chm_temp <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>( <span class="fu">file.path</span>(dir_temp, <span class="fu">paste0</span>(<span class="st">&quot;chm_&quot;</span>, <span class="fl">0.1</span>,<span class="st">&quot;m.tif&quot;</span>)) )</span>
<span id="cb620-24"><a href="method-validation-bhef-machine-piles.html#cb620-24" tabindex="-1"></a>  </span>
<span id="cb620-25"><a href="method-validation-bhef-machine-piles.html#cb620-25" tabindex="-1"></a>  cloud2raster_ans <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb620-26"><a href="method-validation-bhef-machine-piles.html#cb620-26" tabindex="-1"></a>    <span class="st">&quot;dtm_rast&quot;</span> <span class="ot">=</span> dtm_temp</span>
<span id="cb620-27"><a href="method-validation-bhef-machine-piles.html#cb620-27" tabindex="-1"></a>    , <span class="st">&quot;chm_rast&quot;</span> <span class="ot">=</span> chm_temp</span>
<span id="cb620-28"><a href="method-validation-bhef-machine-piles.html#cb620-28" tabindex="-1"></a>  )</span>
<span id="cb620-29"><a href="method-validation-bhef-machine-piles.html#cb620-29" tabindex="-1"></a>}</span>
<span id="cb620-30"><a href="method-validation-bhef-machine-piles.html#cb620-30" tabindex="-1"></a><span class="co"># huh?</span></span>
<span id="cb620-31"><a href="method-validation-bhef-machine-piles.html#cb620-31" tabindex="-1"></a>cloud2raster_ans</span></code></pre></div>
<pre><code>## $dtm_rast
## class       : SpatRaster 
## size        : 6006, 13674, 1  (nrow, ncol, nlyr)
## resolution  : 0.2, 0.2  (x, y)
## extent      : 608233.4, 610968.2, 4888216, 4889418  (xmin, xmax, ymin, ymax)
## coord. ref. : NAD83 / UTM zone 13N (EPSG:26913) 
## source      : dtm_0.2m.tif 
## name        : 1_dtm_0.2m 
## min value   :   1633.414 
## max value   :   1736.891 
## 
## $chm_rast
## class       : SpatRaster 
## size        : 12011, 27348, 1  (nrow, ncol, nlyr)
## resolution  : 0.1, 0.1  (x, y)
## extent      : 608233.4, 610968.2, 4888217, 4889418  (xmin, xmax, ymin, ymax)
## coord. ref. : NAD83 / UTM zone 13N (EPSG:26913) 
## source      : chm_0.1m.tif 
## name        : focal_mean 
## min value   :       0.00 
## max value   :      31.98</code></pre>
</div>
<div id="vector-data-1" class="section level3 hasAnchor" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Vector Data<a href="method-validation-bhef-machine-piles.html#vector-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>cloud2trees::cloud2raster()</code> wrote out a file with the spatial coverage of the point cloud data, let’s read that in.</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="method-validation-bhef-machine-piles.html#cb622-1" tabindex="-1"></a><span class="co"># pc extent</span></span>
<span id="cb622-2"><a href="method-validation-bhef-machine-piles.html#cb622-2" tabindex="-1"></a>pc_ext_temp <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="fu">file.path</span>(c2t_output_dir,<span class="st">&quot;point_cloud_processing_delivery&quot;</span>,<span class="st">&quot;raw_las_ctg_info.gpkg&quot;</span>), <span class="at">quiet=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb622-3"><a href="method-validation-bhef-machine-piles.html#cb622-3" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb622-4"><a href="method-validation-bhef-machine-piles.html#cb622-4" tabindex="-1"></a>  <span class="co"># inward buffer to remove edge effects</span></span>
<span id="cb622-5"><a href="method-validation-bhef-machine-piles.html#cb622-5" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="sc">-</span><span class="dv">15</span>)</span>
<span id="cb622-6"><a href="method-validation-bhef-machine-piles.html#cb622-6" tabindex="-1"></a><span class="co"># mapview::mapview(pc_ext_temp)</span></span></code></pre></div>
<p>what is the area of the point cloud extent we are looking over?</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="method-validation-bhef-machine-piles.html#cb623-1" tabindex="-1"></a>sf<span class="sc">::</span><span class="fu">st_area</span>(pc_ext_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb623-2"><a href="method-validation-bhef-machine-piles.html#cb623-2" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb623-3"><a href="method-validation-bhef-machine-piles.html#cb623-3" tabindex="-1"></a>  <span class="st">`</span><span class="at">/</span><span class="st">`</span>(<span class="dv">10000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb623-4"><a href="method-validation-bhef-machine-piles.html#cb623-4" tabindex="-1"></a>  scales<span class="sc">::</span><span class="fu">comma</span>(<span class="at">suffix =</span> <span class="st">&quot; ha&quot;</span>, <span class="at">accuracy =</span> <span class="fl">0.01</span>)</span></code></pre></div>
<pre><code>## [1] &quot;278.36 ha&quot;</code></pre>
<p>read in the treatment unit boundaries</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="method-validation-bhef-machine-piles.html#cb625-1" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb625-2"><a href="method-validation-bhef-machine-piles.html#cb625-2" tabindex="-1"></a><span class="co"># read unit boundary</span></span>
<span id="cb625-3"><a href="method-validation-bhef-machine-piles.html#cb625-3" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb625-4"><a href="method-validation-bhef-machine-piles.html#cb625-4" tabindex="-1"></a>bhef_stand_boundary <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">&quot;../data/BHEF_202306/bhef_harvests.gpkg&quot;</span>, <span class="at">quiet=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb625-5"><a href="method-validation-bhef-machine-piles.html#cb625-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span> </span>
<span id="cb625-6"><a href="method-validation-bhef-machine-piles.html#cb625-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(stringr<span class="sc">::</span>str_squish) <span class="sc">%&gt;%</span> </span>
<span id="cb625-7"><a href="method-validation-bhef-machine-piles.html#cb625-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(make.names) <span class="sc">%&gt;%</span> </span>
<span id="cb625-8"><a href="method-validation-bhef-machine-piles.html#cb625-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(<span class="sc">~</span>stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(.x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.{2,}&quot;</span>, <span class="st">&quot;.&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb625-9"><a href="method-validation-bhef-machine-piles.html#cb625-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(<span class="sc">~</span>stringr<span class="sc">::</span><span class="fu">str_remove</span>(.x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.$&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb625-10"><a href="method-validation-bhef-machine-piles.html#cb625-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(<span class="sc">~</span>stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(.x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, <span class="st">&quot;_&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb625-11"><a href="method-validation-bhef-machine-piles.html#cb625-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb625-12"><a href="method-validation-bhef-machine-piles.html#cb625-12" tabindex="-1"></a>    year_id <span class="sc">==</span> <span class="dv">2021</span></span>
<span id="cb625-13"><a href="method-validation-bhef-machine-piles.html#cb625-13" tabindex="-1"></a>    <span class="sc">&amp;</span> <span class="sc">!</span>(treatment_type_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Improvement/Liberation Cut&quot;</span>, <span class="st">&quot;Other&quot;</span>, <span class="st">&quot;Sanitation Cut&quot;</span>))</span>
<span id="cb625-14"><a href="method-validation-bhef-machine-piles.html#cb625-14" tabindex="-1"></a>    <span class="sc">&amp;</span> suid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;0203088082660004000&quot;</span>,<span class="st">&quot;0203088082660003000&quot;</span>) <span class="co"># these were the only units with machine piles in prescription</span></span>
<span id="cb625-15"><a href="method-validation-bhef-machine-piles.html#cb625-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb625-16"><a href="method-validation-bhef-machine-piles.html#cb625-16" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(pc_ext_temp))</span></code></pre></div>
<p>now we need to make sure our point cloud data and treatment unit data overlap. we only want to analyze treatment units that have full coverage of point cloud data</p>
<p>how does this all line up?</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="method-validation-bhef-machine-piles.html#cb626-1" tabindex="-1"></a><span class="co"># how does this compare to the unit boundaries?</span></span>
<span id="cb626-2"><a href="method-validation-bhef-machine-piles.html#cb626-2" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb626-3"><a href="method-validation-bhef-machine-piles.html#cb626-3" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb626-4"><a href="method-validation-bhef-machine-piles.html#cb626-4" tabindex="-1"></a>    <span class="at">data =</span> bhef_stand_boundary</span>
<span id="cb626-5"><a href="method-validation-bhef-machine-piles.html#cb626-5" tabindex="-1"></a>    , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">color =</span> <span class="st">&quot;treatments&quot;</span>)</span>
<span id="cb626-6"><a href="method-validation-bhef-machine-piles.html#cb626-6" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb626-7"><a href="method-validation-bhef-machine-piles.html#cb626-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb626-8"><a href="method-validation-bhef-machine-piles.html#cb626-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb626-9"><a href="method-validation-bhef-machine-piles.html#cb626-9" tabindex="-1"></a>    <span class="at">data =</span> pc_ext_temp</span>
<span id="cb626-10"><a href="method-validation-bhef-machine-piles.html#cb626-10" tabindex="-1"></a>    , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">color =</span> <span class="st">&quot;point cloud ext.&quot;</span>)</span>
<span id="cb626-11"><a href="method-validation-bhef-machine-piles.html#cb626-11" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb626-12"><a href="method-validation-bhef-machine-piles.html#cb626-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb626-13"><a href="method-validation-bhef-machine-piles.html#cb626-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;gold2&quot;</span>,<span class="st">&quot;cyan2&quot;</span>),<span class="at">name=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb626-14"><a href="method-validation-bhef-machine-piles.html#cb626-14" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb626-15"><a href="method-validation-bhef-machine-piles.html#cb626-15" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb626-16"><a href="method-validation-bhef-machine-piles.html#cb626-16" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb626-17"><a href="method-validation-bhef-machine-piles.html#cb626-17" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-570-1.png" width="1008" /></p>
<p>let’s keep only the units that have full coverage from the point cloud data after buffering the units to reduce edge effects</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="method-validation-bhef-machine-piles.html#cb627-1" tabindex="-1"></a><span class="co"># get indices of those entierly covered by pc ext</span></span>
<span id="cb627-2"><a href="method-validation-bhef-machine-piles.html#cb627-2" tabindex="-1"></a>covered_indices_temp <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_covered_by</span>(</span>
<span id="cb627-3"><a href="method-validation-bhef-machine-piles.html#cb627-3" tabindex="-1"></a>  <span class="at">x =</span> bhef_stand_boundary <span class="sc">%&gt;%</span> sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">15</span>)</span>
<span id="cb627-4"><a href="method-validation-bhef-machine-piles.html#cb627-4" tabindex="-1"></a>  , <span class="at">y =</span> pc_ext_temp</span>
<span id="cb627-5"><a href="method-validation-bhef-machine-piles.html#cb627-5" tabindex="-1"></a>  , <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb627-6"><a href="method-validation-bhef-machine-piles.html#cb627-6" tabindex="-1"></a>)</span>
<span id="cb627-7"><a href="method-validation-bhef-machine-piles.html#cb627-7" tabindex="-1"></a><span class="co"># convert the logical matrix to a single logical vector, since we want to keep an x polygon if it is covered by any of the polygons in y</span></span>
<span id="cb627-8"><a href="method-validation-bhef-machine-piles.html#cb627-8" tabindex="-1"></a>is_covered_temp <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(covered_indices_temp) <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb627-9"><a href="method-validation-bhef-machine-piles.html#cb627-9" tabindex="-1"></a><span class="co"># subset to keep only the covered polygons</span></span>
<span id="cb627-10"><a href="method-validation-bhef-machine-piles.html#cb627-10" tabindex="-1"></a><span class="co"># nrow(bhef_stand_boundary)</span></span>
<span id="cb627-11"><a href="method-validation-bhef-machine-piles.html#cb627-11" tabindex="-1"></a>bhef_stand_boundary <span class="ot">&lt;-</span> bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb627-12"><a href="method-validation-bhef-machine-piles.html#cb627-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(</span>
<span id="cb627-13"><a href="method-validation-bhef-machine-piles.html#cb627-13" tabindex="-1"></a>    <span class="fu">which</span>(is_covered_temp)</span>
<span id="cb627-14"><a href="method-validation-bhef-machine-piles.html#cb627-14" tabindex="-1"></a>  )</span>
<span id="cb627-15"><a href="method-validation-bhef-machine-piles.html#cb627-15" tabindex="-1"></a>  <span class="co"># sf::st_union()</span></span>
<span id="cb627-16"><a href="method-validation-bhef-machine-piles.html#cb627-16" tabindex="-1"></a><span class="co"># nrow(bhef_stand_boundary)</span></span></code></pre></div>
<p>what did we get?</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="method-validation-bhef-machine-piles.html#cb628-1" tabindex="-1"></a><span class="co"># how does this compare to the unit boundaries?</span></span>
<span id="cb628-2"><a href="method-validation-bhef-machine-piles.html#cb628-2" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb628-3"><a href="method-validation-bhef-machine-piles.html#cb628-3" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb628-4"><a href="method-validation-bhef-machine-piles.html#cb628-4" tabindex="-1"></a>    <span class="at">data =</span> bhef_stand_boundary</span>
<span id="cb628-5"><a href="method-validation-bhef-machine-piles.html#cb628-5" tabindex="-1"></a>    , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">color =</span> <span class="st">&quot;treatments&quot;</span>)</span>
<span id="cb628-6"><a href="method-validation-bhef-machine-piles.html#cb628-6" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb628-7"><a href="method-validation-bhef-machine-piles.html#cb628-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb628-8"><a href="method-validation-bhef-machine-piles.html#cb628-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(</span>
<span id="cb628-9"><a href="method-validation-bhef-machine-piles.html#cb628-9" tabindex="-1"></a>    <span class="at">data =</span> pc_ext_temp</span>
<span id="cb628-10"><a href="method-validation-bhef-machine-piles.html#cb628-10" tabindex="-1"></a>    , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">color =</span> <span class="st">&quot;point cloud ext.&quot;</span>)</span>
<span id="cb628-11"><a href="method-validation-bhef-machine-piles.html#cb628-11" tabindex="-1"></a>    , <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="dv">2</span></span>
<span id="cb628-12"><a href="method-validation-bhef-machine-piles.html#cb628-12" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb628-13"><a href="method-validation-bhef-machine-piles.html#cb628-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;gold2&quot;</span>,<span class="st">&quot;cyan2&quot;</span>),<span class="at">name=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb628-14"><a href="method-validation-bhef-machine-piles.html#cb628-14" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb628-15"><a href="method-validation-bhef-machine-piles.html#cb628-15" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb628-16"><a href="method-validation-bhef-machine-piles.html#cb628-16" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb628-17"><a href="method-validation-bhef-machine-piles.html#cb628-17" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-572-1.png" width="1008" /></p>
<p>what is the area of the treatment unit boundaries we are looking over?</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="method-validation-bhef-machine-piles.html#cb629-1" tabindex="-1"></a>bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb629-2"><a href="method-validation-bhef-machine-piles.html#cb629-2" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb629-3"><a href="method-validation-bhef-machine-piles.html#cb629-3" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_area</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb629-4"><a href="method-validation-bhef-machine-piles.html#cb629-4" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb629-5"><a href="method-validation-bhef-machine-piles.html#cb629-5" tabindex="-1"></a>  <span class="st">`</span><span class="at">/</span><span class="st">`</span>(<span class="dv">10000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb629-6"><a href="method-validation-bhef-machine-piles.html#cb629-6" tabindex="-1"></a>  scales<span class="sc">::</span><span class="fu">comma</span>(<span class="at">suffix =</span> <span class="st">&quot; ha&quot;</span>, <span class="at">accuracy =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;103.1 ha&quot;</code></pre>
<p>that’s great</p>
<p>The perimeter of each pile was digitized in a Geographic Information System (GIS) overlaid on a 0.04 m RGB orthomosaic. In this digitization process, the perimeter was based on the main footprint of the pile at ground level, excluding isolated logs or debris extending beyond the primary boundary. These ground truth polygons will be compared to the predicted pile boundaries using the intersection over union (IoU) metric, with a minimum threshold required for a true positive match.</p>
<p>load in the pile boundary polygons.</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="method-validation-bhef-machine-piles.html#cb631-1" tabindex="-1"></a><span class="co"># read in polys</span></span>
<span id="cb631-2"><a href="method-validation-bhef-machine-piles.html#cb631-2" tabindex="-1"></a>bhef_slash_piles_polys <span class="ot">&lt;-</span> </span>
<span id="cb631-3"><a href="method-validation-bhef-machine-piles.html#cb631-3" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">&quot;../data/BHEF_202306/piles/bhef_pile_polys.shp&quot;</span>, <span class="at">quiet=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb631-4"><a href="method-validation-bhef-machine-piles.html#cb631-4" tabindex="-1"></a>  <span class="co"># sf::st_as_sf() %&gt;% </span></span>
<span id="cb631-5"><a href="method-validation-bhef-machine-piles.html#cb631-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span> </span>
<span id="cb631-6"><a href="method-validation-bhef-machine-piles.html#cb631-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb631-7"><a href="method-validation-bhef-machine-piles.html#cb631-7" tabindex="-1"></a>    <span class="at">pile_id =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>()</span>
<span id="cb631-8"><a href="method-validation-bhef-machine-piles.html#cb631-8" tabindex="-1"></a>    , <span class="at">treeID =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>()</span>
<span id="cb631-9"><a href="method-validation-bhef-machine-piles.html#cb631-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb631-10"><a href="method-validation-bhef-machine-piles.html#cb631-10" tabindex="-1"></a>  cloud2trees<span class="sc">::</span><span class="fu">simplify_multipolygon_crowns</span>() <span class="sc">%&gt;%</span></span>
<span id="cb631-11"><a href="method-validation-bhef-machine-piles.html#cb631-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(treeID)) <span class="sc">%&gt;%</span> </span>
<span id="cb631-12"><a href="method-validation-bhef-machine-piles.html#cb631-12" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_make_valid</span>() <span class="sc">%&gt;%</span></span>
<span id="cb631-13"><a href="method-validation-bhef-machine-piles.html#cb631-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sf<span class="sc">::</span><span class="fu">st_is_valid</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb631-14"><a href="method-validation-bhef-machine-piles.html#cb631-14" tabindex="-1"></a>  <span class="co"># calculate area and volume</span></span>
<span id="cb631-15"><a href="method-validation-bhef-machine-piles.html#cb631-15" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb631-16"><a href="method-validation-bhef-machine-piles.html#cb631-16" tabindex="-1"></a>    <span class="at">image_gt_area_m2 =</span> sf<span class="sc">::</span><span class="fu">st_area</span>(.) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>()</span>
<span id="cb631-17"><a href="method-validation-bhef-machine-piles.html#cb631-17" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb631-18"><a href="method-validation-bhef-machine-piles.html#cb631-18" tabindex="-1"></a>  <span class="co"># area</span></span>
<span id="cb631-19"><a href="method-validation-bhef-machine-piles.html#cb631-19" tabindex="-1"></a>  <span class="fu">st_calculate_diameter</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb631-20"><a href="method-validation-bhef-machine-piles.html#cb631-20" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb631-21"><a href="method-validation-bhef-machine-piles.html#cb631-21" tabindex="-1"></a>    <span class="at">image_gt_diameter_m =</span> diameter_m</span>
<span id="cb631-22"><a href="method-validation-bhef-machine-piles.html#cb631-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb631-23"><a href="method-validation-bhef-machine-piles.html#cb631-23" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(pc_ext_temp))</span>
<span id="cb631-24"><a href="method-validation-bhef-machine-piles.html#cb631-24" tabindex="-1"></a></span>
<span id="cb631-25"><a href="method-validation-bhef-machine-piles.html#cb631-25" tabindex="-1"></a><span class="co"># add a flag for if a pile is in the stand or not based on a spatial intersection</span></span>
<span id="cb631-26"><a href="method-validation-bhef-machine-piles.html#cb631-26" tabindex="-1"></a></span>
<span id="cb631-27"><a href="method-validation-bhef-machine-piles.html#cb631-27" tabindex="-1"></a>bhef_slash_piles_polys <span class="ot">&lt;-</span> bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb631-28"><a href="method-validation-bhef-machine-piles.html#cb631-28" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb631-29"><a href="method-validation-bhef-machine-piles.html#cb631-29" tabindex="-1"></a>    bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb631-30"><a href="method-validation-bhef-machine-piles.html#cb631-30" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb631-31"><a href="method-validation-bhef-machine-piles.html#cb631-31" tabindex="-1"></a>        bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb631-32"><a href="method-validation-bhef-machine-piles.html#cb631-32" tabindex="-1"></a>          sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb631-33"><a href="method-validation-bhef-machine-piles.html#cb631-33" tabindex="-1"></a>          sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(bhef_slash_piles_polys))</span>
<span id="cb631-34"><a href="method-validation-bhef-machine-piles.html#cb631-34" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb631-35"><a href="method-validation-bhef-machine-piles.html#cb631-35" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb631-36"><a href="method-validation-bhef-machine-piles.html#cb631-36" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">distinct</span>(pile_id) <span class="sc">%&gt;%</span> </span>
<span id="cb631-37"><a href="method-validation-bhef-machine-piles.html#cb631-37" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">is_in_stand=</span>T)</span>
<span id="cb631-38"><a href="method-validation-bhef-machine-piles.html#cb631-38" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;pile_id&quot;</span></span>
<span id="cb631-39"><a href="method-validation-bhef-machine-piles.html#cb631-39" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb631-40"><a href="method-validation-bhef-machine-piles.html#cb631-40" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">is_in_stand=</span>dplyr<span class="sc">::</span><span class="fu">coalesce</span>(is_in_stand, F))</span></code></pre></div>
<p>huh?</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="method-validation-bhef-machine-piles.html#cb632-1" tabindex="-1"></a>bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 26
## Columns: 7
## $ shape_leng          &lt;dbl&gt; 46.62793, 48.54183, 52.30751, 51.47470, 66.51802, …
## $ shape_area          &lt;dbl&gt; 76.30865, 133.64823, 144.94465, 135.03140, 220.586…
## $ pile_id             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,…
## $ image_gt_area_m2    &lt;dbl&gt; 76.03950, 133.30759, 144.67638, 134.76650, 220.403…
## $ geometry            &lt;POLYGON [m]&gt; POLYGON ((608553.4 4889262,..., POLYGON ((…
## $ image_gt_diameter_m &lt;dbl&gt; 15.27058, 14.95721, 16.11087, 14.77658, 20.57680, …
## $ is_in_stand         &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TR…</code></pre>
<p>map</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="method-validation-bhef-machine-piles.html#cb634-1" tabindex="-1"></a><span class="co"># option to put satellite imagery as base layer of mapview maps</span></span>
<span id="cb634-2"><a href="method-validation-bhef-machine-piles.html#cb634-2" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapviewOptions</span>(</span>
<span id="cb634-3"><a href="method-validation-bhef-machine-piles.html#cb634-3" tabindex="-1"></a>  <span class="at">homebutton =</span> <span class="cn">FALSE</span></span>
<span id="cb634-4"><a href="method-validation-bhef-machine-piles.html#cb634-4" tabindex="-1"></a>  <span class="co"># , basemaps = c(&quot;Esri.WorldImagery&quot;,&quot;OpenStreetMap&quot;)</span></span>
<span id="cb634-5"><a href="method-validation-bhef-machine-piles.html#cb634-5" tabindex="-1"></a>  , <span class="at">basemaps =</span> <span class="fu">c</span>(<span class="st">&quot;Esri.WorldImagery&quot;</span>,<span class="st">&quot;OpenStreetMap&quot;</span>)</span>
<span id="cb634-6"><a href="method-validation-bhef-machine-piles.html#cb634-6" tabindex="-1"></a>)</span>
<span id="cb634-7"><a href="method-validation-bhef-machine-piles.html#cb634-7" tabindex="-1"></a><span class="co"># map it</span></span>
<span id="cb634-8"><a href="method-validation-bhef-machine-piles.html#cb634-8" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapview</span>(</span>
<span id="cb634-9"><a href="method-validation-bhef-machine-piles.html#cb634-9" tabindex="-1"></a>  bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb634-10"><a href="method-validation-bhef-machine-piles.html#cb634-10" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_union</span>()</span>
<span id="cb634-11"><a href="method-validation-bhef-machine-piles.html#cb634-11" tabindex="-1"></a>  , <span class="at">color =</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb634-12"><a href="method-validation-bhef-machine-piles.html#cb634-12" tabindex="-1"></a>  , <span class="at">lwd =</span> <span class="dv">1</span></span>
<span id="cb634-13"><a href="method-validation-bhef-machine-piles.html#cb634-13" tabindex="-1"></a>  , <span class="at">alpha.regions =</span> <span class="dv">0</span></span>
<span id="cb634-14"><a href="method-validation-bhef-machine-piles.html#cb634-14" tabindex="-1"></a>  , <span class="at">label =</span> <span class="cn">FALSE</span></span>
<span id="cb634-15"><a href="method-validation-bhef-machine-piles.html#cb634-15" tabindex="-1"></a>  , <span class="at">legend =</span> <span class="cn">FALSE</span></span>
<span id="cb634-16"><a href="method-validation-bhef-machine-piles.html#cb634-16" tabindex="-1"></a>  , <span class="at">popup =</span> <span class="cn">FALSE</span></span>
<span id="cb634-17"><a href="method-validation-bhef-machine-piles.html#cb634-17" tabindex="-1"></a>  , <span class="at">layer.name =</span> <span class="st">&quot;stand boundary&quot;</span></span>
<span id="cb634-18"><a href="method-validation-bhef-machine-piles.html#cb634-18" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb634-19"><a href="method-validation-bhef-machine-piles.html#cb634-19" tabindex="-1"></a><span class="co"># mapview::mapview(bhef_slash_piles_points, zcol = &quot;height_m&quot;)</span></span>
<span id="cb634-20"><a href="method-validation-bhef-machine-piles.html#cb634-20" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">mapview</span>(bhef_slash_piles_polys, <span class="at">zcol =</span> <span class="st">&quot;image_gt_area_m2&quot;</span>,<span class="at">layer.name=</span><span class="st">&quot;machine piles&quot;</span>)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ae637111378090b4ae36" style="width:1008px;height:672px;"></div>
<script type="application/json" data-for="htmlwidget-ae637111378090b4ae36">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-103.626150618,-103.626239304,-103.626346537,-103.626408004,-103.626677362,-103.62688154,-103.627136646,-103.627254887,-103.627412166,-103.627613832,-103.627722249,-103.627861956,-103.627959144,-103.627932835,-103.627832256,-103.627793786,-103.627990975,-103.628197687,-103.628299107,-103.628456976,-103.628595287,-103.628649046,-103.628800498,-103.628990742,-103.629097248,-103.629204213,-103.629435657,-103.62963668,-103.629746308,-103.629848575,-103.629952854,-103.630191234,-103.630318772,-103.630404795,-103.630526437,-103.630710841,-103.630867923,-103.630975563,-103.631058797,-103.631091111,-103.631110113,-103.631106097,-103.630999234,-103.630939817,-103.630890974,-103.630774722,-103.630721828,-103.630679732,-103.630613316,-103.630483115,-103.630412516,-103.630409915,-103.630411664,-103.630425245,-103.630393068,-103.630355277,-103.630355358,-103.630372573,-103.630501287,-103.630586778,-103.630709795,-103.630779302,-103.630879025,-103.630993228,-103.631088099,-103.631139761,-103.631163607,-103.631209604,-103.631324517,-103.631437018,-103.631462752,-103.63144462,-103.631432194,-103.631403572,-103.631447012,-103.631482282,-103.631486681,-103.631510441,-103.63147043,-103.631442299,-103.631421799,-103.631356729,-103.631290081,-103.631151152,-103.631062826,-103.631017704,-103.630928611,-103.630819071,-103.630866167,-103.630962267,-103.631157665,-103.631240791,-103.631223634,-103.631208189,-103.631191303,-103.631187065,-103.631170151,-103.63115801,-103.631138302,-103.631111124,-103.631090126,-103.631049281,-103.631008481,-103.630977182,-103.630917713,-103.63089344,-103.630853763,-103.630813715,-103.630748159,-103.630701499,-103.630648776,-103.630609643,-103.630562347,-103.630508093,-103.630490875,-103.630437546,-103.630408888,-103.630379833,-103.630346479,-103.630325413,-103.630299591,-103.630278542,-103.630246532,-103.630235746,-103.630211941,-103.630214669,-103.630212799,-103.630188493,-103.630179761,-103.630157942,-103.630131902,-103.630114413,-103.630081746,-103.630058733,-103.630007169,-103.629951196,-103.629902805,-103.629851183,-103.62979867,-103.629745312,-103.629693915,-103.629640366,-103.629587965,-103.629522989,-103.629471971,-103.629430135,-103.629417682,-103.629377452,-103.629330269,-103.629279696,-103.629232007,-103.629178949,-103.629130153,-103.629080995,-103.629030226,-103.628992625,-103.628946488,-103.628896263,-103.628843207,-103.628793404,-103.62874446,-103.628693801,-103.628644441,-103.628596067,-103.628547523,-103.628500592,-103.628454872,-103.62841775,-103.628373658,-103.628336462,-103.628292493,-103.62823289,-103.628194196,-103.628130535,-103.628069541,-103.628014599,-103.627971921,-103.627911022,-103.627851043,-103.627788654,-103.627710923,-103.627638901,-103.62757404,-103.627540307,-103.627469305,-103.627413344,-103.627359707,-103.627296868,-103.627236894,-103.627193016,-103.627113125,-103.627053175,-103.626999414,-103.626962124,-103.626903635,-103.626861647,-103.626798442,-103.6267351,-103.626692903,-103.626642349,-103.62658131,-103.626542915,-103.626499792,-103.626449136,-103.626397742,-103.626353976,-103.626281628,-103.626226122,-103.626184836,-103.626130076,-103.62606325,-103.626019929,-103.625964279,-103.625917033,-103.625873536,-103.62582722,-103.625780391,-103.625734359,-103.625687797,-103.625642382,-103.625597371,-103.625549587,-103.625505852,-103.625459775,-103.625416194,-103.62537039,-103.625321748,-103.625275633,-103.625232521,-103.6251927,-103.625154291,-103.625117999,-103.625097429,-103.625054477,-103.625021789,-103.624992548,-103.62496314,-103.624935663,-103.62491138,-103.624885721,-103.624859437,-103.624834536,-103.624797578,-103.624774721,-103.624745795,-103.62471612,-103.624696902,-103.624666142,-103.624641626,-103.62460953,-103.624576592,-103.624544448,-103.624517432,-103.624477035,-103.624444212,-103.624409708,-103.624374096,-103.624342268,-103.624299288,-103.624257578,-103.624218698,-103.624179389,-103.624139023,-103.624098334,-103.624058223,-103.624015406,-103.623978054,-103.623936404,-103.623896195,-103.623856586,-103.623818141,-103.623783621,-103.623746897,-103.623706765,-103.623666119,-103.623628498,-103.623587302,-103.623547237,-103.623514139,-103.623471079,-103.623433862,-103.623399709,-103.6233694,-103.623341143,-103.62332023,-103.623305568,-103.623302783,-103.623303104,-103.6233068,-103.623317912,-103.623346939,-103.623370645,-103.623406225,-103.623437621,-103.623474298,-103.623517216,-103.623563677,-103.623609828,-103.62365323,-103.623696404,-103.623739865,-103.62378019,-103.623814331,-103.62384585,-103.623866471,-103.62388654,-103.623904483,-103.62391978,-103.623930311,-103.623935189,-103.623940249,-103.623920666,-103.623893094,-103.623858114,-103.623829863,-103.623810195,-103.623748649,-103.623704741,-103.623655539,-103.623599028,-103.623548033,-103.623510535,-103.623458863,-103.62341356,-103.623360821,-103.623331978,-103.623286301,-103.623247169,-103.623194902,-103.62315796,-103.623107331,-103.623063146,-103.623025217,-103.622988606,-103.622970405,-103.622981104,-103.62302187,-103.623061452,-103.623101519,-103.623139724,-103.623178422,-103.62321965,-103.62325021,-103.623284712,-103.623315029,-103.623346458,-103.623380809,-103.62341409,-103.623448057,-103.623483126,-103.623517163,-103.623552624,-103.623585365,-103.623620187,-103.623656632,-103.623694257,-103.623727336,-103.623768964,-103.623809837,-103.623855437,-103.623906229,-103.623961328,-103.624022701,-103.624090207,-103.624159619,-103.624231605,-103.62431176,-103.624392993,-103.62446804,-103.624546011,-103.624623558,-103.62470208,-103.62478056,-103.624857977,-103.624938675,-103.625011182,-103.625091185,-103.625170913,-103.625250888,-103.625329146,-103.625408425,-103.625490297,-103.625570433,-103.625649468,-103.625726116,-103.625802734,-103.626182605,-103.626221402,-103.62615607,-103.626150618],"lat":[44.14229439699999,44.14232401299999,44.14233576599997,44.14234152400002,44.14236395699998,44.14245555999998,44.14254624900001,44.14249780300001,44.142399576,44.14225821399998,44.14213803799998,44.14202942899999,44.14185865199999,44.14174794399997,44.14159782799999,44.14146236800001,44.14141745400002,44.14138836299996,44.14131139300002,44.141239649,44.141264126,44.14127540099997,44.14130707200002,44.14119604299997,44.14112709800003,44.14107168499999,44.14096408099999,44.14086333799997,44.14076514099997,44.14070887499997,44.14064359600002,44.14056030400002,44.14044994199998,44.14040334299999,44.14040343300002,44.14041345300001,44.14035242699999,44.14031980800002,44.14031412299999,44.14037465199999,44.14048531700001,44.14060641499998,44.14076019999999,44.14084481999998,44.14094937099998,44.141163876,44.14127632299999,44.14133668800002,44.14138733599998,44.14149566700002,44.14153711,44.14160831200002,44.14166481,44.14180503599999,44.14190647800001,44.14201283199997,44.14213788799998,44.14225406600001,44.142417986,44.14248004199999,44.14256751300002,44.14265483600001,44.14274079699997,44.14281141700003,44.14294123100001,44.14302768099999,44.14320576400001,44.14335435499998,44.14353422599997,44.143676105,44.14380415300002,44.143926523,44.14406119300002,44.14421646099998,44.144332529,44.14441321700004,44.14450149200002,44.144595358,44.144746155,44.14484003500002,44.145021826,44.14505668599998,44.145102603,44.14518550499997,44.14525606699998,44.145394989,44.14553603100001,44.14563381499999,44.14578197600002,44.14581967700002,44.14592430800002,44.14597361400001,44.146085046,44.14609760099999,44.14612400800001,44.14616958699997,44.14619295799996,44.14622626900002,44.14624641400002,44.146268454,44.14630168899998,44.146332034,44.14635728100001,44.14639179499999,44.14642291699999,44.14643835700002,44.146461508,44.14647792300002,44.146487556,44.146519125,44.14653403300002,44.146557282,44.146582012,44.14659528800001,44.14662947099998,44.14663892300002,44.146672233,44.14669209900001,44.14671326199998,44.14675853300002,44.146792592,44.14682028099998,44.14686670200001,44.14690716600001,44.14692262699997,44.14695929700002,44.14698027799999,44.14703036499996,44.14706441599998,44.14709404199998,44.14713663700002,44.14716071599996,44.147195071,44.14722745500001,44.14726068499999,44.147277673,44.147296692,44.14730876599999,44.14731222500001,44.147309141,44.14730176099999,44.14728473899998,44.14727004899999,44.14725392600003,44.14724410500003,44.14722936900001,44.14722479599998,44.14721012699998,44.147191249,44.14717348699997,44.14715856800001,44.14714149100001,44.14712466399998,44.14710921800003,44.14709188099999,44.147074804,44.14705983599998,44.14704461399998,44.14703007299999,44.14701434199997,44.14699667899998,44.146977967,44.14696006899998,44.14694279299999,44.14692734900002,44.14691179499999,44.14689666499998,44.146886757,44.14687258399999,44.146845048,44.14682418,44.14681672099999,44.14680305399997,44.14678718599998,44.14677679300002,44.14676450299999,44.14675784799999,44.14674484199998,44.14675963200001,44.14674843699998,44.14674514400001,44.146735142,44.14674062900003,44.14674349400001,44.14676999599999,44.14678755699998,44.14680836000002,44.14682746900002,44.14684512600002,44.146872577,44.14688779699997,44.14691355299999,44.14692349799998,44.14694793299997,44.14698523200002,44.14700435999998,44.14700659499999,44.147023784,44.14706354999999,44.14707321100002,44.14709721399999,44.14712721699998,44.14714417800002,44.14713503899997,44.14716985199999,44.14718161000001,44.14719417999999,44.14722760199999,44.147242623,44.14725874599998,44.14728077299997,44.14727456499998,44.14727493100002,44.14726043500002,44.14724357699998,44.14722260299998,44.14719992599998,44.14717283499999,44.147147743,44.14712566999999,44.14710376499998,44.14708123899999,44.14705743600002,44.14703429799999,44.14701115000003,44.14698608100002,44.146959374,44.146930364,44.146902759,44.14687300000003,44.14684135200002,44.14680791699999,44.14677537300002,44.14673992199999,44.14670267700001,44.14666120999999,44.14662199899998,44.14658176900003,44.14654561700002,44.14651019199999,44.14647611200002,44.146439337,44.146383108,44.14634888199998,44.14632276399999,44.14628342200002,44.14625088499998,44.14620906200001,44.14617531800002,44.14612833899998,44.14608696999999,44.14605047499997,44.14601216699997,44.145979679,44.14594434399998,44.14590921400004,44.145872472,44.14583813199999,44.14579822399998,44.14576114699997,44.14572171800001,44.1456857,44.14564895799999,44.14561228799998,44.14557358799998,44.14553450199997,44.14549487900001,44.145457497,44.145421269,44.14538642000002,44.14535013699997,44.14531357700002,44.14527604400001,44.14523711800001,44.145201288,44.14516294800001,44.14512636799997,44.14508742899999,44.14504798699998,44.14500772399997,44.14496630399997,44.14492354700002,44.14487669099997,44.14482892199998,44.14478157600001,44.14473472499997,44.14468163100002,44.14463397100001,44.14458338499998,44.14454232700001,44.14448705699999,44.14444929400003,44.144402511,44.14436471099998,44.14432704900003,44.14429304300002,44.144259099,44.14422668600002,44.14419320100001,44.14416042999999,44.14412825900001,44.14409335699997,44.144056223,44.14401678,44.14397463799998,44.14393052999998,44.143886384,44.14384057900001,44.14379350600001,44.143747922,44.14369750800001,44.14363197900002,44.14359670499999,44.14356354799999,44.14353456499999,44.14350339600003,44.14346397399997,44.14342072800002,44.14338780499997,44.143353832,44.14332640800001,44.143295062,44.14325979400002,44.143233764,44.143197595,44.14317032299999,44.14313810399999,44.14311006600001,44.143090706,44.14305492900001,44.14302471100001,44.142992645,44.14295528199999,44.14291710800001,44.14287522000001,44.14285060999998,44.14280988299998,44.14276307900002,44.14271701199998,44.14267089700001,44.14262627599999,44.14257963699999,44.142529782,44.14248160900001,44.14243005499997,44.14237722699999,44.14232545300001,44.14227299999998,44.14221984199998,44.14216609200003,44.14211282500002,44.14206015200001,44.14200701999999,44.14195423299999,44.14189999699998,44.141850938,44.141799713,44.141751714,44.14170310799999,44.14165463199998,44.14160990400001,44.14156789600003,44.14152996500002,44.14149669,44.14146904500002,44.14144438099998,44.14143301399997,44.14142388999999,44.14142261,44.14142376,44.14143159999996,44.14144284200001,44.14145546200001,44.14147056399997,44.14148536200003,44.14150314300002,44.14151973200001,44.141534976,44.14155286499999,44.14156676200002,44.14158365399997,44.14159883899998,44.14161727999999,44.14163079799999,44.14164391000003,44.14165923199999,44.141814728,44.14190857300002,44.142062898,44.14229439699999]}],[{"lng":[-103.644280714,-103.6443191817672,-103.6448643477824,-103.644866726,-103.644860878,-103.644839213,-103.644729882,-103.644667516,-103.644574348,-103.644524115,-103.644446253,-103.644372791,-103.644297743,-103.644240909,-103.644194269,-103.644134114,-103.644080579,-103.644040994,-103.643986333,-103.643938352,-103.643902484,-103.643867803,-103.643836129,-103.643798679,-103.643748209,-103.643694712,-103.643627341,-103.643552024,-103.64347421,-103.643398367,-103.643322818,-103.643256524,-103.64318315,-103.643098591,-103.643028847,-103.642960678,-103.64289333,-103.642826412,-103.642753782,-103.642682808,-103.642619849,-103.642515896,-103.642407733,-103.642288873,-103.642044463,-103.641882288,-103.641715404,-103.641468878,-103.641346327,-103.641222936,-103.641160049,-103.641103572,-103.64101787,-103.641031076,-103.640809385,-103.640658354,-103.640485047,-103.640305554,-103.640203505,-103.640090188,-103.640020313,-103.639877806,-103.639794633,-103.639706008,-103.639658672,-103.639559327,-103.639481146,-103.639372759,-103.639159592,-103.63891356,-103.63872968,-103.638528462,-103.638340281,-103.638239878,-103.638167522,-103.638002197,-103.637889236,-103.63781777,-103.637719131,-103.637675491,-103.637623217,-103.637664011,-103.637711738,-103.637662972,-103.637522595,-103.637323253,-103.637223577,-103.63702492,-103.636806436,-103.636752288,-103.636672664,-103.636682243,-103.636640001,-103.636611514,-103.636593387,-103.63659695,-103.636583058,-103.636424367,-103.636231983,-103.636076089,-103.635967524,-103.635760307,-103.635664748,-103.635502875,-103.63541412,-103.635281682,-103.635158744,-103.635007169,-103.634837881,-103.634724822,-103.634641955,-103.634556699,-103.634412228,-103.634245548,-103.63406364,-103.633921982,-103.633828843,-103.633691247,-103.633532567,-103.633355627,-103.633249171,-103.633049653,-103.632946966,-103.632792059,-103.632542133,-103.63228893,-103.632200667,-103.632205041,-103.632217111,-103.632259048,-103.632304645,-103.632322629,-103.632335967,-103.632368633,-103.632400843,-103.632422582,-103.632460117,-103.6324591,-103.632513858,-103.632537024,-103.632553259,-103.632577378,-103.632567441,-103.63257292,-103.632561002,-103.632550828,-103.632520893,-103.63253147,-103.632504738,-103.63248104,-103.632455986,-103.632439885,-103.63242793,-103.632400441,-103.632371561,-103.632350366,-103.632343273,-103.632245979,-103.632028128,-103.631881686,-103.631710778,-103.631697393,-103.631678941,-103.631654173,-103.631633564,-103.6316157,-103.631576888,-103.631527319,-103.631515317,-103.631480756,-103.63144532,-103.631426236,-103.631393547,-103.631374798,-103.631351678,-103.631340869,-103.631331658,-103.631331582,-103.631342277,-103.631343053,-103.631346534,-103.631348255,-103.631362524,-103.631373047,-103.631382606,-103.63139242,-103.631410167,-103.631433885,-103.631448081,-103.631483789,-103.631491368,-103.631507267,-103.631526021,-103.631544789,-103.631566528,-103.631580879,-103.631597032,-103.631620452,-103.631634898,-103.631649781,-103.631667925,-103.631687447,-103.631703641,-103.631718828,-103.63174014,-103.631758952,-103.631794277,-103.631925953,-103.632096166,-103.632207901,-103.63234004,-103.632349786,-103.632455729,-103.632609484,-103.632849383,-103.633123699,-103.633358479,-103.633492988,-103.633680814,-103.633793323,-103.634044114,-103.63410468,-103.634170902,-103.634207467,-103.634282164,-103.634370485,-103.634517404,-103.634709322,-103.634788166,-103.635005594,-103.635097637,-103.635303338,-103.635372909,-103.635486992,-103.635664195,-103.635796004,-103.635949577,-103.636048871,-103.636178885,-103.636283397,-103.636377265,-103.636550574,-103.636770188,-103.636890679,-103.636973241,-103.637060534,-103.63719966,-103.637342657,-103.637460124,-103.637517451,-103.637722748,-103.637805665,-103.638004092,-103.638330293,-103.638623107,-103.638781613,-103.639068789,-103.639334178,-103.639578039,-103.639846158,-103.639943815,-103.640089464,-103.640225555,-103.640417444,-103.640549254,-103.64069821,-103.640897185,-103.641154134,-103.64139721,-103.641569854,-103.641820871,-103.642002463,-103.642244633,-103.642518265,-103.642645799,-103.642784198,-103.642943831,-103.643021421,-103.64319243,-103.643308513,-103.643392434,-103.643501554,-103.643714508,-103.643820789,-103.644106121,-103.644220322,-103.6443132876003,-103.644319084,-103.644280714],"lat":[44.14502741900002,44.14754468890925,44.14755115794907,44.14767162800001,44.14783809400001,44.14799607200001,44.14807102299999,44.14809582300001,44.14813036800001,44.14814612200001,44.14817431400002,44.14817532699998,44.14821128900002,44.14824693499997,44.14829938100001,44.14834138399999,44.14837600599997,44.14841667100001,44.14848136000001,44.148527065,44.14857339399997,44.148624418,44.14868082499999,44.14873106700002,44.148769012,44.14880916999999,44.14884090499997,44.14886385900002,44.148875572,44.14888620200003,44.14889745800001,44.14891077200003,44.14891979899999,44.14892600399997,44.14893542700002,44.148945003,44.14895268599997,44.14895321799997,44.14893915800003,44.148932322,44.14889834299999,44.14881006899998,44.14869979600002,44.14850562700001,44.14856459499997,44.14858451200001,44.148554536,44.14850713599998,44.14848040499998,44.14837855899998,44.14827186299998,44.14811576099999,44.14797064200002,44.14778797500002,44.14769431299999,44.14761098100001,44.14755692300002,44.14738882699999,44.147262774,44.147119126,44.147014361,44.14678745800001,44.14667796800001,44.14653241699999,44.14636376200001,44.14615312599999,44.14602440200002,44.14588039199997,44.14579262699998,44.14577162400003,44.145760865,44.14573904399998,44.14568920099997,44.14562213599999,44.14571778800001,44.14593921499999,44.14614046200001,44.14628344499999,44.14646236499998,44.14664532699999,44.14676051499999,44.14688520999999,44.14695705100001,44.14698866799999,44.147019974,44.14703188399999,44.14695201799998,44.14680906299997,44.14663865199998,44.14653577299998,44.14641360000001,44.14627928700002,44.14613298199998,44.14605904799998,44.145990144,44.14586123200002,44.145831532,44.14574825400001,44.14566122500003,44.145604601,44.14555635300002,44.14547858399999,44.14544009600002,44.14548672400002,44.14550701399997,44.145570065,44.14557935699997,44.14553822699997,44.14550352600003,44.14548166200002,44.14548772599999,44.14549124099999,44.14553332000003,44.14560457699997,44.14565918300001,44.14562232999998,44.145594168,44.14548999399999,44.14536285999997,44.14527815500004,44.14523566600001,44.14515196899999,44.14510495100001,44.14511152799997,44.14505240699998,44.14497348700001,44.14493873700001,44.14482057200001,44.144787806,44.14475578499997,44.14469883599998,44.14465107900001,44.14460661499999,44.14454572199998,44.14449194000003,44.14445063800002,44.14440250899997,44.14433715799998,44.14429235300003,44.14424134400002,44.14418107199997,44.144113382,44.14406077500002,44.14399950400002,44.14393278599999,44.14387657100002,44.143813959,44.143766561,44.14370968100001,44.14365924600003,44.14360182899998,44.14354875700002,44.14350254999999,44.143439795,44.14339415900002,44.14334252600003,44.14329264600001,44.14322254899997,44.14319511000002,44.14322611099998,44.14309335000001,44.14305121799998,44.14301454000003,44.14297882400001,44.14294704999998,44.14291450899999,44.14287814300002,44.14282915699999,44.14279764299999,44.14276554999998,44.14273375499999,44.14271045599997,44.142662702,44.14261443800001,44.14256912000003,44.14252535600001,44.14248005100001,44.142429043,44.14238648299999,44.14235140900001,44.14230972100001,44.14227151599999,44.14222697500002,44.14218028999999,44.14214352699997,44.14209647199999,44.14204485099997,44.14200260899997,44.14195388000001,44.14190849599998,44.14185190599999,44.141809873,44.14176278399998,44.14171433600001,44.14166412399999,44.14162287400001,44.14157372599999,44.14153118199999,44.14148408099999,44.14143644600001,44.14138770699998,44.14134189999998,44.141296318,44.14124915600002,44.14120247599998,44.14115328999998,44.141110303,44.14096584700002,44.14119286999998,44.141322021,44.14140365100001,44.141490578,44.14154947899999,44.141592317,44.14163129399998,44.14163246300001,44.14152537400003,44.141371596,44.14124400600002,44.14116514599999,44.14099720299998,44.14091304900001,44.14075963499999,44.14048406,44.14042101199999,44.14037814,44.14034603800003,44.14032019899997,44.14032031900001,44.14031569699999,44.14031009600001,44.14030185899996,44.140324625,44.14031758300001,44.14031675000001,44.14030684999999,44.140311193,44.14031202899997,44.14031643200002,44.14032659899999,44.14032613400002,44.14031978499997,44.14031993600002,44.14032290799997,44.14031827299998,44.14030565000001,44.14032472899999,44.140315642,44.14031050400002,44.14031648999996,44.14032304099999,44.14032990200002,44.14032961200002,44.14032356500001,44.14033011499998,44.14033957999999,44.14031684999998,44.14033147999998,44.14033391499999,44.140332806,44.14033022,44.14034520299997,44.140347416,44.140337014,44.14034946599997,44.14032174099999,44.14033309400002,44.14031936999998,44.14035042000001,44.140349205,44.140356118,44.14034357999998,44.140333721,44.14035774000001,44.14032451000002,44.14032672399998,44.14035949800001,44.14033468299998,44.14035998000003,44.140337391,44.14033876899997,44.140326748,44.14032541599999,44.140324647,44.14034911300001,44.14035859099999,44.14037169951938,44.14234249200006,44.14502741900002]}]]],null,"stand boundary",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"black","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666ff","fillOpacity":0,"smoothFactor":1,"noClip":false},null,{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":2,"opacity":0.9,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addPolygons","args":[[[[{"lng":[-103.6426429697868,-103.6426391250065,-103.6426229006434,-103.6426144564031,-103.6426078108124,-103.6426029052435,-103.6426001745988,-103.6425970832076,-103.6425958989041,-103.6425920721934,-103.6425854646773,-103.6425785731325,-103.6425670056252,-103.6425639652572,-103.6425624189367,-103.642562147466,-103.6425602544006,-103.6425579355452,-103.642557206408,-103.642557391375,-103.6425558845571,-103.6425560121256,-103.6425571773033,-103.6425592310835,-103.6425623097222,-103.6425654648851,-103.6425816637195,-103.6425782626067,-103.6425784092988,-103.6425772683724,-103.6425773449164,-103.6425820400218,-103.6425845555502,-103.6425822760075,-103.6425799763003,-103.6425778826078,-103.6425786723427,-103.6425784375702,-103.642580435501,-103.6425816070527,-103.6425813356011,-103.6425836672039,-103.6425852581691,-103.6425891412358,-103.6425918463551,-103.6425937534192,-103.6425999617133,-103.6426004245023,-103.6426032316643,-103.6426025663188,-103.6426033847284,-103.642615782167,-103.6426181584145,-103.642621256175,-103.6426228331384,-103.6426259385238,-103.6426271419701,-103.6426294799671,-103.6426295182376,-103.6426264523523,-103.642625569002,-103.6426277769848,-103.6426367541419,-103.6426460219207,-103.6426478907354,-103.642652097526,-103.6426531670373,-103.642654325838,-103.6426550677475,-103.6426596978047,-103.6426600585723,-103.6426623646741,-103.6426614645821,-103.6426586956945,-103.6426575368937,-103.6426570600877,-103.6426543294487,-103.6426527333613,-103.64265615362,-103.6426564633476,-103.642659104698,-103.6426594399458,-103.6426632987418,-103.6426655398053,-103.6426708799015,-103.6426754857126,-103.6426788932033,-103.6426797409721,-103.6426767258985,-103.6426720435684,-103.6426681796461,-103.6426611146519,-103.6426517511982,-103.6426509021444,-103.6426493558252,-103.6426493239301,-103.6426481587533,-103.6426480822133,-103.6426461113772,-103.6426452431776,-103.6426463828343,-103.6426465012526,-103.642647996532,-103.6426482106152,-103.6426461976565,-103.6426429697868],"lat":[44.14849824036399,44.14849735917883,44.14849688818006,44.14849428314412,44.14849754435655,44.14850917490961,44.14851025615494,44.14851021941793,44.14851131813902,44.14851220200986,44.14851119414161,44.14850832935616,44.14850707819404,44.14850481557222,44.14850479719581,44.14849978459164,44.14849809200172,44.14849806444445,44.14849610748785,44.14848803832115,44.14848635122164,44.14848078606181,44.14848052171006,44.14847525764008,44.14847585062407,44.14847310523211,44.14847468963097,44.14847130902721,44.14846490949837,44.14846406134357,44.14846072206762,44.14845827317433,44.14845249259101,44.14844797812354,44.14844711529774,44.14844399807126,44.14843652374778,44.14842990126017,44.14842708234215,44.14842653986716,44.14842152636287,44.14842099767365,44.14841906828877,44.1484182789376,44.14841831108448,44.14841944744276,44.14841840752474,44.14841507373906,44.1484106541177,44.14840591413133,44.14840397646575,44.14840273189731,44.14840025544637,44.14840001405973,44.14839864090543,44.14839812141054,44.14839618742002,44.14839537970677,44.14839371006874,44.14839256084064,44.14838965356646,44.14838533981303,44.14838155080895,44.14838193913925,44.14838474423461,44.14838674251629,44.14839065180861,44.14839066557884,44.1483920653888,44.14839239950746,44.14839351658951,44.14839410039063,44.14839965637069,44.14840240635549,44.14840239258533,44.14840628350249,44.14840736474922,44.14840957227294,44.14841211760547,44.14841546147162,44.14841827574693,44.14842050622103,44.14842083027423,44.14842419709056,44.14842732163367,44.14842876825855,44.14843187073649,44.14843740539924,44.14844214283775,44.14844403458891,44.14844398867383,44.14844863679966,44.14845242211549,44.14845575131129,44.14845573293606,44.14845712445111,44.14845738880382,44.14846072807987,44.14846237385245,44.14846653831726,44.14846738735661,44.14847907761268,44.14848132277204,44.14848883938309,44.14849607600264,44.14849824036399]}]],[[{"lng":[-103.6439117870448,-103.6439160814499,-103.6439130126918,-103.6439087109888,-103.6439083982525,-103.6439048459736,-103.6439050160034,-103.6439091354424,-103.6439089886552,-103.6439039974673,-103.643889142125,-103.6438876502069,-103.643885374966,-103.6438769415983,-103.6438751450833,-103.6438733946675,-103.6438674419854,-103.6438666680946,-103.643863684237,-103.6438619040246,-103.643857164399,-103.6438522099169,-103.6438491771071,-103.643844943483,-103.6438422193519,-103.6438364693429,-103.643831272666,-103.6438305138279,-103.6438262936965,-103.6438247936153,-103.6438222545628,-103.6438202635534,-103.6438103762014,-103.6438096132818,-103.6438046465549,-103.6438018938755,-103.6438016259856,-103.6438001218227,-103.6437949238949,-103.643793955512,-103.6437888024572,-103.6437860824067,-103.6437841362287,-103.6437841525537,-103.6437794659399,-103.6437792469835,-103.6437770329361,-103.6437743495761,-103.6437741347011,-103.6437714676664,-103.6437712527914,-103.6437685816757,-103.6437683953493,-103.643765435937,-103.6437635061059,-103.6437627635924,-103.6437637617524,-103.6437635224105,-103.6437593430512,-103.6437584019678,-103.6437569263535,-103.643755333734,-103.6437556546404,-103.6437563971538,-103.6437571710471,-103.6437524925987,-103.6437478467806,-103.6437474455603,-103.6437462704672,-103.6437433437074,-103.6437419985736,-103.6437383863992,-103.6437384638834,-103.6437399925132,-103.6437422514324,-103.6437431313377,-103.6437466917882,-103.6437489466254,-103.6437497204977,-103.6437527382542,-103.6437652217213,-103.6437669937932,-103.6437682382062,-103.6437687740068,-103.6437732497998,-103.6437747662045,-103.6437748232803,-103.6437755645428,-103.6437763560099,-103.6437798797253,-103.6437806903277,-103.6437816884862,-103.6437839787821,-103.6437892337964,-103.6437919579026,-103.6437929683252,-103.6437930050147,-103.6437950123456,-103.6437952871474,-103.6437975460634,-103.6437975623675,-103.6438048083861,-103.6438154260087,-103.6438178863271,-103.6438183609297,-103.643820818417,-103.643825018156,-103.6438257362023,-103.6438296680524,-103.6438309043231,-103.6438331591572,-103.6438362123473,-103.6438377165067,-103.6438389527772,-103.6438414673376,-103.6438449421381,-103.6438516156678,-103.643853313069,-103.6438545505895,-103.6438605305584,-103.6438622495941,-103.6438651559699,-103.6438668750264,-103.6438686063052,-103.643871610542,-103.6438728468126,-103.64387626044,-103.6438782392229,-103.643878746474,-103.6438851643383,-103.6438905106506,-103.6438937216236,-103.6438931205944,-103.6438948314897,-103.6438963152647,-103.6438964322835,-103.6439002960522,-103.6438987715093,-103.6438980289967,-103.6438986940344,-103.6439016534234,-103.643903838944,-103.6439063033246,-103.6439067738686,-103.6439104337532,-103.643910583379,-103.6439117870448],"lat":[44.14679650126781,44.14680796735306,44.14681860336517,44.1468228279136,44.14682567371301,44.14682955063191,44.14683293695274,44.14683672668831,44.1468431370234,44.14684503686306,44.14684557354982,44.1468459114636,44.1468480227107,44.14684899126602,44.14685181944923,44.14685268908379,44.14685333146392,44.14685474748214,44.14685542420916,44.14685754043274,44.14685926589404,44.14685956269764,44.14686237710264,44.14686357378105,44.14686371970149,44.14686632268189,44.14686643924604,44.14686714328978,44.14686780533771,44.14686849968039,44.146871319947,44.14687183019755,44.14687153454194,44.14687241680038,44.14687324824651,44.14687464076999,44.14687552800561,44.14687640056281,44.14687651711046,44.14687561519639,44.14687377228032,44.14687373998456,44.14687229257116,44.14687157971169,44.14687099017663,44.14686974063395,44.14686917955593,44.14686754512625,44.14686611736868,44.1468637700795,44.14686234232193,44.14686017324752,44.146857498886,44.14685710812137,44.14685494694811,44.14685493813192,44.14685459435718,44.14685423498873,44.1468531166857,44.14685096815252,44.14685059410519,44.14684451874382,44.14684131651523,44.14684132533145,44.146839909314,44.1468389633481,44.1468365925632,44.14683249134409,44.1468298052423,44.14682798875823,44.14682191723548,44.14681759872701,44.14681421534482,44.14681227439928,44.14681087601455,44.14680483091109,44.14680059756755,44.14679937739756,44.14679796228019,44.14679585985206,44.14679084293927,44.14678908224684,44.14678874139592,44.14678696602476,44.14678595048782,44.14678454328632,44.14678205097838,44.14678205977964,44.14677993091738,44.14677730150657,44.14677428245519,44.14677393868025,44.14677111546096,44.14676850570568,44.1467683606865,44.14676748136679,44.14676587923311,44.1467646561235,44.14676341244331,44.14676201405742,44.14676130209803,44.14675818209178,44.14675902030805,44.14675958340896,44.14676048036053,44.14676122169111,44.14676144981755,44.14676252702247,44.14676364238445,44.14676365706251,44.14676243689077,44.1467587323118,44.14675785975405,44.14675787443201,44.14675612345415,44.14675562991955,44.14675588741559,44.14675733277453,44.14675734746716,44.14675545846869,44.14675601366805,44.1467587203234,44.14675927462261,44.14675929517725,44.14675772827573,44.14675774295332,44.14675992084076,44.14675994433373,44.14675941556603,44.14676002655142,44.1467641864799,44.14676440286487,44.14676902697448,44.14676993770305,44.14676995531882,44.14677565663295,44.14677979986013,44.14678156259302,44.14678155377774,44.14678494597546,44.14678533763666,44.14678714441624,44.14678753020049,44.14678860446653,44.14679078527652,44.14679506267176,44.14679650126781]}]],[[{"lng":[-103.6438366508819,-103.6438354533662,-103.6438353836847,-103.6438280679312,-103.6438280380676,-103.6438256231268,-103.6438242962015,-103.643816971721,-103.6437992529253,-103.6437937347886,-103.6437916334992,-103.6437916733185,-103.6437832708202,-103.643765761249,-103.6437615948328,-103.643751945025,-103.64374957986,-103.6437321001565,-103.6437291909888,-103.6437232133699,-103.6437208967536,-103.6437178780786,-103.643716106695,-103.6437088618752,-103.6437016966991,-103.6436974705545,-103.6436948206166,-103.6436934024483,-103.6436959978574,-103.6436865658289,-103.6436873388082,-103.6436934159969,-103.6436953864887,-103.6436984462332,-103.6436985656989,-103.6437028515727,-103.643698725007,-103.6436993685632,-103.6437042482153,-103.6437031303455,-103.6437129195141,-103.6437105742648,-103.6437117588016,-103.6437210269178,-103.6437219718863,-103.6437197311585,-103.6437214550159,-103.6437313482055,-103.6437389346851,-103.643741279935,-103.6437471995035,-103.6437528516816,-103.6437535151459,-103.6437577746715,-103.6437631748889,-103.6437649462708,-103.6437696808974,-103.6437830070214,-103.6437854744755,-103.6437854446111,-103.6437896508394,-103.6437908881717,-103.6437981230247,-103.6438071106018,-103.6438141861611,-103.6438243799591,-103.6438267152594,-103.6438332978584,-103.6438337920935,-103.6438409472941,-103.6438408079322,-103.6438468253669,-103.6438475809983,-103.6438417167477,-103.6438386283942,-103.6438381861187,-103.6438402803269,-103.64384389278,-103.6438437932359,-103.6438473558968,-103.6438521758197,-103.6438545011694,-103.6438563123735,-103.6438568364737,-103.6438610240498,-103.6438619261274,-103.6438596473572,-103.64385659757,-103.6438589440586,-103.643858824607,-103.6438447980917,-103.6438399455017,-103.6438366508819],"lat":[44.14431450552341,44.14431405645094,44.14431709960623,44.1443200567303,44.1443213609397,44.14432133226747,44.14432653476893,44.14432992754366,44.14433229848104,44.1443312311157,44.14432875699251,44.14432701804668,44.14432474310862,44.14432453521214,44.14432187661467,44.1443213271834,44.1443191248273,44.14431761271633,44.14431279477257,44.14431011466801,44.14430573771417,44.14430570187106,44.14430394141937,44.14430385539548,44.14430029147958,44.1443002412985,44.14429807546592,44.14429323531931,44.14428543785306,44.14427532419971,44.14426794084893,44.14426627269077,44.14425933841386,44.14425763532658,44.1442524184892,44.1442498602515,44.14424546180592,44.14424373002887,44.14424161369626,44.14423768673081,44.14423214985571,44.14422907802592,44.14422667622757,44.14422093899992,44.14421641636676,44.14420511532737,44.14420224443225,44.14420142220953,44.14420375654445,44.14420682837367,44.14420643827603,44.14420261722469,44.14420001597434,44.14419891300631,44.14420013066876,44.14420189111974,44.14420278257303,44.14420067257788,44.14420213485725,44.14420343906663,44.1442043587173,44.14420306884437,44.14420358959938,44.14420674029205,44.14421421772967,44.14421738274238,44.14422088930637,44.14422357658834,44.14422836585759,44.1442323654018,44.14423845171245,44.14423939286495,44.14424331753572,44.14425150904271,44.14425451635815,44.14425878251605,44.14426149364567,44.14426197138995,44.1442663187547,44.1442689710813,44.1442694631612,44.1442734044611,44.14427342596481,44.14427691102451,44.14427870016041,44.14428236211837,44.14428607634474,44.14428734469991,44.14429041744168,44.14429563427939,44.14430155571299,44.14431332709998,44.14431450552341]}]],[[{"lng":[-103.6436178118448,-103.643617188196,-103.6436243932099,-103.6436255509026,-103.6436292031901,-103.643634626863,-103.6436399422497,-103.6436416140761,-103.6436452265402,-103.6436457406734,-103.6436487294893,-103.6436486697538,-103.6436468585435,-103.6436448822012,-103.6436447903736,-103.6436501822663,-103.6436525374785,-103.6436487955859,-103.6436523781636,-103.6436535059905,-103.6436565246756,-103.6436582263723,-103.6436521491779,-103.6436496844499,-103.6436477437908,-103.643638054128,-103.6436307184274,-103.6436270063992,-103.6436269566188,-103.6436293616118,-103.6436312203855,-103.6436298060519,-103.6436237487455,-103.6436200267599,-103.6436151968607,-103.6436150276055,-103.6436017301849,-103.643601604743,-103.6436028022618,-103.6436015051595,-103.6435971993459,-103.643591755751,-103.6435898947562,-103.643586876068,-103.6435833631629,-103.6435755332373,-103.6435743954575,-103.6435689020805,-103.6435616572297,-103.6435580746307,-103.6435526397428,-103.6435490870349,-103.6435454546531,-103.6435448210455,-103.6435363886337,-103.6435345176598,-103.6435278765469,-103.6435278466764,-103.6435240326626,-103.6435169681936,-103.6435128416207,-103.6435110304082,-103.6435087050709,-103.643508953995,-103.6435072025248,-103.6435042037522,-103.6435019182647,-103.6435004157205,-103.6434992568021,-103.6434974455908,-103.6434999812734,-103.6434994559425,-103.6434935778855,-103.643490589072,-103.6434892871341,-103.6434907284918,-103.6434943509129,-103.6434968376343,-103.6434947392585,-103.6434996886361,-103.6434985508619,-103.6435023139293,-103.6435059662195,-103.643509104406,-103.643514262298,-103.6435194973653,-103.643521912311,-103.6435244069113,-103.6435280293297,-103.6435353650271,-103.6435414023907,-103.6435439268801,-103.6435529630116,-103.6435571107427,-103.6435776278227,-103.6435817643698,-103.6435932366117,-103.6435932067428,-103.6435991943258,-103.6435991545007,-103.6436070030749,-103.6436159578903,-103.6436178118448],"lat":[44.14445585028142,44.14445671258508,44.1444585375607,44.14446072558108,44.14445946438658,44.14445996364493,44.14446524591858,44.14447135373566,44.14447183148634,44.14447575128319,44.14447709133757,44.1444796997561,44.14447967824903,44.14448065577585,44.14448323308925,44.14449276425589,44.14449540135043,44.14450057517344,44.14450235803326,44.14450585026262,44.14450588610755,44.14451068971513,44.14451235697094,44.14451450197699,44.14452013294346,44.14452132244786,44.14452514903159,44.14452901864456,44.14453119232663,44.14453165573958,44.14453481515383,44.14453861869134,44.14453941737282,44.14454372172196,44.14454366436844,44.14455105488744,44.14455576884946,44.14455698345903,44.14455743253398,44.14456133172319,44.14456475942944,44.14456512964199,44.14456728181603,44.1445672459693,44.14456242085265,44.14456145816289,44.14455840066924,44.14456094456274,44.14456085852912,44.14455907656654,44.14455901202602,44.14455592495388,44.1445563166729,44.14455761371254,44.14455664386534,44.14455923167493,44.1445591528088,44.14456045701799,44.14456192171873,44.14456076268502,44.14455636423287,44.14455634272363,44.14455240141706,44.14454153300728,44.14453890307961,44.14453799775792,44.14453231660558,44.144518818268,44.14451662933152,44.14451660782206,44.14451141967944,44.14450793460365,44.14450090712311,44.14449956706469,44.14449609709612,44.14449347985513,44.14449352287419,44.1444910461687,44.14447656725474,44.14447140777653,44.14446835028214,44.14446230700621,44.14446104581571,44.14445586392765,44.14445191265143,44.14445033423976,44.14445036291851,44.14444691370599,44.14444695672395,44.14444313014674,44.1444432018427,44.14443844752044,44.14443942453638,44.14444295352913,44.14444363202656,44.14444759483992,44.14444773107216,44.14444903528141,44.1444512806564,44.14445301960205,44.14445311280236,44.14445410187282,44.14445585028142]}]],[[{"lng":[-103.6406028695505,-103.6405984080723,-103.6405904946024,-103.6405878196072,-103.6405798698191,-103.6405736351076,-103.6405652989161,-103.6405524739677,-103.6405414976289,-103.640537490655,-103.6405348519981,-103.6405330569907,-103.6405290984559,-103.6405172591166,-103.6405132957339,-103.6405128339533,-103.6405097420172,-103.6405066718979,-103.6405053459221,-103.6405052805335,-103.6405021740732,-103.64050213046,-103.6404990082256,-103.6404937188867,-103.6404905542883,-103.6404848076753,-103.6404799876131,-103.6404787851856,-103.6404757513871,-103.6404682851723,-103.6404661148888,-103.6404689491886,-103.6404711551127,-103.6404712423204,-103.6404690727175,-103.6404620319441,-103.6404549318023,-103.6404505357078,-103.6404418076605,-103.6404387302696,-103.6404370369944,-103.6404348613697,-103.640421715433,-103.6404166137928,-103.6404096311619,-103.640407476086,-103.6404056156064,-103.6404077740436,-103.6404091436144,-103.6404012955635,-103.6403996095433,-103.6404009863871,-103.640400751127,-103.6404034611975,-103.6404109782918,-103.640410641294,-103.6404124145048,-103.640412501716,-103.6404174467978,-103.6404175485335,-103.6404188672351,-103.6404202731474,-103.6404208730071,-103.6404244254497,-103.6404327788916,-103.6404456810424,-103.6404509570973,-103.6404509788943,-103.6404540708048,-103.6404581298909,-103.6404660433476,-103.6404674056628,-103.6404767395514,-103.6404789890852,-103.6404847183966,-103.6404855765674,-103.6404908513712,-103.6404960911048,-103.6405030240661,-103.6405066492143,-103.6405080418463,-103.6405120488133,-103.6405239777364,-103.6405280137705,-103.640536425344,-103.6405404408312,-103.6405444114566,-103.6405484487388,-103.6405506098377,-103.6405523757938,-103.6405523975892,-103.6405537162897,-103.6405537816757,-103.6405560166825,-103.6405620786952,-103.6405696171037,-103.6405735077996,-103.6405770251678,-103.6405774142896,-103.6405798931463,-103.6405932411972,-103.6405979900878,-103.6406010674728,-103.6406010456782,-103.640607575028,-103.6406074951011,-103.6406096489304,-103.6406096125926,-103.6406135626738,-103.6406108962057,-103.6406112768278,-103.6406165456105,-103.6406165238161,-103.6406252651302,-103.6406269293461,-103.640631290367,-103.6406334078604,-103.6406356065294,-103.6406346902246,-103.6406416523121,-103.6406424741488,-103.6406459757266,-103.640646804835,-103.6406449734963,-103.6406475600405,-103.6406523815705,-103.6406522217425,-103.6406543695327,-103.6406542750862,-103.6406493954243,-103.6406466126931,-103.6406417475528,-103.6406412276437,-103.6406372266986,-103.6406337093257,-103.6406327942701,-103.6406310283326,-103.6406309992669,-103.6406283400472,-103.6406264287803,-103.6406255124951,-103.6406241937924,-103.6406241211173,-103.6406228024146,-103.6406226934225,-103.6406195942383,-103.6406195651722,-103.6406173665008,-103.6406173374348,-103.6406119899681,-103.6406091914582,-103.6406028695505],"lat":[44.14375394942405,44.14375674584115,44.14375665166175,44.14375820348942,44.14375969164006,44.14376310077787,44.14376502862477,44.1437653824313,44.14376461887056,44.14376678776948,44.14376675636508,44.14376831776445,44.14376904607513,44.14376686299143,44.14376713273258,44.14376807707438,44.14376867409999,44.14376832064699,44.14376862177805,44.14377147051337,44.14377270029102,44.14377460034797,44.14377646286292,44.1437770328343,44.14378079542082,44.14378213604987,44.14378130348059,44.1437762221668,44.14377428638229,44.14377388060502,44.14376843168009,44.1437640714164,44.14376378165942,44.14375998244565,44.14375868987195,44.14375892298342,44.14376168798869,44.14376163566464,44.14375868226594,44.14375864563729,44.14375577506915,44.14375479933585,44.14375274318925,44.14374508196254,44.14374278226167,44.14374085693457,44.14373533071691,44.14372787696282,44.14372567667609,44.14372273284835,44.14371954635359,44.1437170292408,44.14370816008672,44.14370502591792,44.14370321481626,44.14369877762814,44.14369816580909,44.14369436659536,44.14368967536565,44.14368524339966,44.14368525909575,44.1436814755781,44.14367451603989,44.14367297556039,44.14367307498809,44.14366657789031,44.14366664068818,44.14366569110975,44.14366509498574,44.1436607101215,44.1436608043099,44.14365891994847,44.14365459786553,44.14365240805139,44.14365184331729,44.14365280336919,44.14365286615033,44.14365451127681,44.14365530850488,44.14365432092665,44.14365117017496,44.14364900127696,44.14364661065194,44.14364317534872,44.14364074195949,44.14363825624914,44.14363767058083,44.14363423529172,44.14363584377515,44.14363554787998,44.1436345983015,44.14363461399604,44.14363176526061,44.14363020819718,44.14362948233941,44.14363163681218,44.14363453353067,44.14363457539199,44.14363679661153,44.14363788135344,44.14363698497117,44.14364084083988,44.14364087746416,44.14364182704264,44.1436447551628,44.14364823755066,44.1436501628592,44.14365174609007,44.14365211001272,44.14365334502972,44.14365588216039,44.14365626177678,44.1436572113553,44.14365953197341,44.14366366894358,44.14366530360643,44.14366881214541,44.14366883831133,44.14367041106991,44.14367366035044,44.14367620363208,44.14367687912882,44.14367910558426,44.14368225021639,44.14368449758652,44.1436851887914,44.14369215266716,44.14369439571601,44.14369851085624,44.14370035246083,44.14370665309742,44.14370786194937,44.14371133910112,44.14371319116257,44.14371314930305,44.14371472207648,44.14371501707279,44.14371628347747,44.14371720256869,44.14372382958835,44.14372540144674,44.14372538575301,44.14372855221476,44.14372853652102,44.14373328531353,44.14373419826826,44.14373546467294,44.1437354385067,44.14373670491136,44.14373980769763,44.14374674107061,44.14375394942405]}]],[[{"lng":[-103.6400037898208,-103.6400024783725,-103.63999951277,-103.6399970727154,-103.639996978223,-103.6399991320358,-103.6399977769786,-103.6399888248656,-103.6399860626367,-103.6399793951612,-103.6399743700947,-103.6399694758556,-103.6399645161808,-103.6399604074147,-103.6399603347246,-103.6399562440778,-103.6399448921504,-103.6399343987985,-103.6399256897626,-103.6399098264515,-103.6399040304297,-103.63990094576,-103.6398961096764,-103.6398851915194,-103.6398737388363,-103.6398681330861,-103.639863347892,-103.6398629442652,-103.6398581372649,-103.6398503473743,-103.6398433489771,-103.6398399055458,-103.6398359627353,-103.6398338512899,-103.6398269050344,-103.6398226252705,-103.6398094357328,-103.6398059401635,-103.6398051256167,-103.6397968897447,-103.6397975029604,-103.6397953418979,-103.6397878889699,-103.6397862525967,-103.6397880925568,-103.639789441573,-103.6397868756368,-103.6397825377112,-103.6397804190154,-103.6397629642628,-103.6397595135632,-103.6397596153483,-103.6397637023252,-103.6397668087986,-103.6397677469353,-103.6397690656377,-103.6397705588451,-103.6397732834812,-103.6397754821514,-103.6397759657718,-103.6397799800254,-103.6397813496191,-103.6397831155813,-103.6397876583401,-103.639801424734,-103.6398020173906,-103.6398051529444,-103.6398126773102,-103.639821030753,-103.6398223857927,-103.6398276618486,-103.6398321233783,-103.6398391944569,-103.6398423445602,-103.6398480738801,-103.6398529608405,-103.6398596937321,-103.639862771118,-103.6398658848617,-103.6398663902645,-103.6398681780313,-103.6398774683519,-103.6398928565297,-103.6398973180339,-103.6399051281942,-103.639915343613,-103.6399183991929,-103.6399222680739,-103.6399275295773,-103.6399363508316,-103.6399407990539,-103.6399513426366,-103.6399573956379,-103.6399609130075,-103.6399678895869,-103.6399708506743,-103.6399809191711,-103.6399835129647,-103.6399931851082,-103.6399957498231,-103.639998381201,-103.6399983521217,-103.6400035178861,-103.6400043324413,-103.6400077989292,-103.6400113077755,-103.6400112714216,-103.6400138664671,-103.6400217726531,-103.6400234950059,-103.6400242356051,-103.6400255543071,-103.6400286039783,-103.6400285153806,-103.6400267506696,-103.6400235266583,-103.6400159368632,-103.6400150000078,-103.6400105590375,-103.6400104863502,-103.6400074916654,-103.6400037898208],"lat":[44.14374016749335,44.14373983586642,44.14374106549499,44.14374547143216,44.14374958657122,44.14375151189103,44.14375307942051,44.14375993951095,44.14376528963725,44.14376837757749,44.14377655027447,44.14377902550183,44.14378435036375,44.14379095120719,44.14379411676794,44.14380369582155,44.14381546675597,44.14382413689201,44.14382822073228,44.14382961550991,44.14383302983463,44.14383331001754,44.14383325243309,44.14382995510061,44.14383076946694,44.14382595262703,44.1438236790588,44.14382209058929,44.14382076659902,44.14381529082522,44.14381362382714,44.14381041639739,44.14380973562186,44.14380591112781,44.14380202816121,44.143796910196,44.14379675313542,44.1437957616722,44.143792902459,44.14378773738318,44.14378014508235,44.14377853568484,44.14377749709617,44.14377365240728,44.14376863226656,44.14376738248068,44.14376418459838,44.14376159944017,44.1437580908712,44.14375218308638,44.14374929248038,44.14374486051565,44.14373920925774,44.14373797950034,44.14373545717088,44.14373547287449,44.14372789015273,44.14372412324725,44.14372414942974,44.14372225461283,44.14371976981491,44.14371756953599,44.14371727365281,44.14371099399615,44.14370514108833,44.14369849838042,44.14369600221767,44.14369387522959,44.14369397470205,44.14369240807477,44.14369247090145,44.14368967361476,44.1436881750527,44.14368504523674,44.14368448053469,44.14368232213852,44.14367638547098,44.14367642211516,44.1436748755289,44.14367203203339,44.14367078657068,44.14366836369371,44.14366854692629,44.14366575053706,44.14366447295985,44.1436659651708,44.14366695139171,44.14367079681012,44.14367149328437,44.14367033156803,44.14366816794408,44.14366861039742,44.14367311564592,44.14367315752623,44.14367577409524,44.14368087545382,44.1436828959111,44.14368482646984,44.14368494163081,44.14368813859366,44.14368848683657,44.14368975324093,44.14369456483594,44.14369742404786,44.14369968190937,44.14370004059938,44.14370162382985,44.14370355440282,44.14370396544817,44.14370556871776,44.14371159437565,44.14371161007629,44.14371403341008,44.14371671233351,44.1437170082354,44.14372330270245,44.1437282793393,44.14373080078573,44.14373264848648,44.14373581404734,44.14373914694407,44.14374016749335]}]],[[{"lng":[-103.6375322192583,-103.6375312645739,-103.6375257585285,-103.6375237736575,-103.6375176806496,-103.6375176594465,-103.6375145726613,-103.6375050885337,-103.6374993208212,-103.6374983130867,-103.6374960453666,-103.6374896376635,-103.6374868360126,-103.6374852347871,-103.6374852506899,-103.6374781593188,-103.6374743711579,-103.6374732172128,-103.6374751808615,-103.6374764620916,-103.6374761898258,-103.6374624861722,-103.6374619151367,-103.6374661677298,-103.6374646301376,-103.6374646937909,-103.6374614925914,-103.6374596084995,-103.6374593521374,-103.6374539468516,-103.6374520627601,-103.6374508994449,-103.6374446508611,-103.6374441103831,-103.6374428304038,-103.6374425369351,-103.6374390675238,-103.637438261333,-103.6374377506172,-103.6374410276014,-103.6374475731845,-103.637449515627,-103.6374524869873,-103.6374543321605,-103.6374592234868,-103.6374610156484,-103.6374649681938,-103.6374739701652,-103.6374781260418,-103.6374835154174,-103.6374866595106,-103.6374933818942,-103.6374942782466,-103.6375016418694,-103.6375035895904,-103.6375096613837,-103.6375131613697,-103.6375134401872,-103.6375185029992,-103.6375261707151,-103.6375286947953,-103.6375418208205,-103.6375421036896,-103.6375455625008,-103.6375532448699,-103.6375573330489,-103.63756021425,-103.637559798803,-103.6375616563926,-103.6375638751318,-103.637563811504,-103.6375647197112,-103.6375659837673,-103.6375646666846,-103.6375639418444,-103.6375680765014,-103.6375683805944,-103.6375682373959,-103.6375643591052,-103.6375610942593,-103.6375584588014,-103.6375580645773,-103.6375564474308,-103.6375564209277,-103.637560187865,-103.637560749554,-103.6375620030303,-103.6375651936273,-103.6375654128487,-103.6375637863714,-103.6375636855979,-103.6375597901325,-103.6375596363524,-103.6375573433609,-103.6375549907708,-103.6375537042403,-103.6375497357728,-103.6375493521491,-103.6375467538136,-103.6375412742728,-103.6375412583707,-103.6375393371505,-103.6375322192583],"lat":[44.14501182725132,44.14501158538192,44.14501428638916,44.14501703029725,44.14501741858321,44.14501834025799,44.14502071189015,44.14502187982151,44.14502204150473,44.14502410562216,44.14502523098175,44.14502538503051,44.14502189258186,44.14502187348182,44.14502118222575,44.14502317287451,44.14502082196796,44.14501527393597,44.14501345260363,44.14501346788675,44.14501138940138,44.14500845925348,44.14500545437614,44.14500158511017,44.14499880008547,44.14499603326104,44.14499599507523,44.14499435832683,44.14499158858536,44.14498990983382,44.1449882730853,44.14498318680546,44.14497642469071,44.14497203728623,44.14497202201766,44.144970865207,44.14496851810154,44.14496182180783,44.14494746698131,44.14493902629142,44.14493287865904,44.14493197900183,44.14492809445287,44.14491750979304,44.14491364814648,44.14490536767345,44.14490057290057,44.14489906600703,44.14489934606222,44.14490171606865,44.14490429067449,44.14490437086144,44.14490714823688,44.14490723607226,44.14490610689549,44.14490664028495,44.14490760396107,44.14490945204261,44.14491204953432,44.14491283244114,44.14491447682227,44.14491463338889,44.14491625103674,44.14491905897652,44.14491915061052,44.14492242792105,44.1449224622873,44.14492660780731,44.1449293966476,44.14493034594013,44.14493311186465,44.14493542841709,44.14493613584046,44.1449377335042,44.14494141437002,44.14494261699687,44.14494331206976,44.14494953697508,44.14495110408955,44.14495383273116,44.14495702984372,44.14496025278882,44.14496092584601,44.14496207793951,44.14496535141823,44.14496881714746,44.1449699845082,44.14497048352857,44.14497486800096,44.14497600101046,44.14498038166604,44.14498264092158,44.14498932576415,44.14499160413349,44.14499641889375,44.14499663403021,44.14500212096225,44.14500488306989,44.14500646635113,44.14500801526565,44.14500870652174,44.1450086836056,44.14501182725132]}]],[[{"lng":[-103.6354389706048,-103.6354374789493,-103.6354339197307,-103.6354304173467,-103.6354293758846,-103.6354263159353,-103.6354148107792,-103.6354102598872,-103.6354042575854,-103.6353982042218,-103.6353882091177,-103.6353847648202,-103.6353702590497,-103.6353637970119,-103.6353618385753,-103.635353335107,-103.6353447773422,-103.6353400865872,-103.6353401778784,-103.6353327739661,-103.6353208013209,-103.635318867773,-103.6353118974611,-103.6353080112757,-103.6353101286589,-103.6353091618958,-103.6352986655464,-103.6352986904334,-103.635296189268,-103.6352927628392,-103.6352883019911,-103.6352823079903,-103.6352744041237,-103.6352720440501,-103.6352700428683,-103.6352666413295,-103.6352662575508,-103.6352617966845,-103.6352613382018,-103.6352588370376,-103.6352579105266,-103.6352544841018,-103.6352425126993,-103.6352390601376,-103.6352350756177,-103.6352280804056,-103.6352281053146,-103.635225976515,-103.6352197346587,-103.6352052704133,-103.6352023107693,-103.6352018842237,-103.6351988364482,-103.635193604873,-103.6351813427298,-103.6351786655599,-103.6351782141265,-103.6351727782114,-103.6351698766861,-103.6351550701633,-103.6351541353623,-103.6351521354331,-103.6351482077644,-103.6351458311138,-103.6351459307141,-103.6351435042639,-103.6351375268678,-103.6351299682559,-103.6351272048732,-103.6351287973743,-103.6351338826819,-103.6351350735721,-103.635136573518,-103.6351361399298,-103.6351336470668,-103.6351323214334,-103.6351294199143,-103.6351296025237,-103.6351337198221,-103.6351354036257,-103.6351384711799,-103.6351380707989,-103.6351331846979,-103.6351357439527,-103.6351363269417,-103.6351499239954,-103.6351524749524,-103.6351576349829,-103.6351572346006,-103.6351602772418,-103.6351773172929,-103.6351859618456,-103.6351896040634,-103.635195690592,-103.6351991917105,-103.6352100468835,-103.6352120480586,-103.6352120231702,-103.6352180088326,-103.6352219530895,-103.6352238700127,-103.6352313319819,-103.6352327750831,-103.6352411623109,-103.6352446634308,-103.6352456385059,-103.6352488437601,-103.6352596537819,-103.635264631188,-103.6352655896511,-103.6352706333909,-103.6352794459966,-103.6352934600248,-103.6352983876587,-103.6352983544555,-103.6353008390221,-103.6353041907396,-103.635306667011,-103.6353126705406,-103.635316096961,-103.6353220328356,-103.6353234759416,-103.6353259688048,-103.6353308287875,-103.6353315087632,-103.6353333913137,-103.6353417619684,-103.6353452630923,-103.6353491824534,-103.6353561432045,-103.635352967778,-103.6353539262449,-103.6353559191281,-103.6353558859262,-103.6353588704784,-103.6353627234588,-103.6353666830695,-103.6353681261581,-103.6353786058994,-103.6353825572158,-103.6353925203649,-103.635399424285,-103.6354029170955,-103.6354073198551,-103.6354192082615,-103.6354191501556,-103.6354221015101,-103.6354219521397,-103.6354297896297,-103.6354301900326,-103.6354321580129,-103.6354343442296,-103.6354342608375,-103.6354361790288,-103.6354381706652,-103.6354381374652,-103.6354415734658,-103.6354420153643,-103.6354459749826,-103.6354442675609,-103.6354467355258,-103.6354466193576,-103.6354470218818,-103.6354494213279,-103.6354514225102,-103.6354523228981,-103.6354552410581,-103.6354551248905,-103.6354500395697,-103.6354453559026,-103.6354462728799,-103.635444300262,-103.6354419359966,-103.6354389706048],"lat":[44.14401690971078,44.14401653176294,44.14401901104006,44.1440189691993,44.14402075829818,44.1440221988213,44.14402310609359,44.14402521339485,44.14402514168786,44.14402723193951,44.14402675150257,44.14402418855765,44.14402401525949,44.14402213651733,44.14402031157935,44.14402020998827,44.14401591523153,44.14400888233499,44.14400492021638,44.14400050842302,44.14399892396983,44.14399601894429,44.14399449425471,44.14398940423131,44.14398438503484,44.14398293207193,44.14398244653886,44.14398136645202,44.14398133656924,44.14397805267856,44.1439761978415,44.14397576609922,44.14397134742842,44.14396519435287,44.1439651704432,44.14396080646494,44.14395575738581,44.14395390344781,44.1439520964293,44.1439520665457,44.14394881252268,44.14394552863087,44.14394394508466,44.14394174126431,44.14394097340086,44.14394052969317,44.14393944870627,44.14393659196124,44.14393358394216,44.14393160957859,44.14392977267505,44.14392652552564,44.14392101196859,44.14391669864122,44.14391525247394,44.14391363731342,44.14391147025074,44.14390852337429,44.14390416446729,44.14389534087339,44.1438924468785,44.14389242298174,44.14388913399778,44.14388370097758,44.14387937883029,44.14387610688369,44.14387495507609,44.14387111320225,44.14386690441966,44.14386296023914,44.14385941882249,44.14385114560528,44.14385116352807,44.14384827642229,44.1438478865071,44.14384030437643,44.14383594546842,44.14382802123165,44.14382302683563,44.14381512053655,44.1438122743654,44.14380794624382,44.14380284336607,44.14380035214973,44.1437967560345,44.14379295529483,44.14379082410704,44.14378403972852,44.14377971160696,44.14377794642207,44.14377670951571,44.14377068702712,44.14376460566799,44.14376107531127,44.14376111714409,44.14376773275212,44.14376775666275,44.14376883674959,44.14376962942433,44.14377219834801,44.14377582433313,44.14377771503054,44.14378025406971,44.14378539877485,44.14378544060631,44.1437865326407,44.14378746072354,44.14378633996624,44.14378748072006,44.1437892937123,44.14379319156583,44.14379594427081,44.14379575157726,44.14379905250339,44.14380049351929,44.14380124345986,44.14380776941102,44.14380887938044,44.1438089511072,44.14381223499726,44.14381518874043,44.14381772777849,44.14381811768956,44.14382430063123,44.14383924801998,44.14384342703715,44.143849291793,44.14384933362141,44.14385298352777,44.14385486822894,44.14386239658265,44.14386420957415,44.14386459351128,44.14386603452721,44.14386679043983,44.14387332147749,44.14387517032343,44.14387771026102,44.14387891584539,44.14388112471975,44.14388304528769,44.14388745110404,44.14388785385976,44.14389222979518,44.14389741541391,44.14389993741685,44.14390213434382,44.14390861756549,44.14391591735799,44.14392024547874,44.14392171040154,44.14392588966862,44.14393902977254,44.14394265576917,44.14394303968995,44.14394448070591,44.1439474036782,44.143949930754,44.14395177959726,44.14396076690312,44.1439622377986,44.14396728000433,44.14397388139578,44.14397596105235,44.14397598495887,44.14398031905245,44.14398395699454,44.14398899920025,44.14399254153131,44.14400041199774,44.1440040260334,44.14401391451205,44.14401645881982,44.14401690971078]}]],[[{"lng":[-103.6347373901417,-103.6347328794962,-103.6347277372692,-103.6347217088051,-103.6347176578752,-103.6347131638273,-103.6347072362661,-103.6347037351353,-103.6346992078698,-103.6346966485888,-103.6346891450938,-103.634685602445,-103.6346816000809,-103.6346816249999,-103.6346756891202,-103.6346697034442,-103.6346708196445,-103.6346679430517,-103.6346690605225,-103.6346666008766,-103.6346640997125,-103.6346641578299,-103.6346582053543,-103.634658296691,-103.6346548524295,-103.63465397702,-103.6346474734952,-103.6346403798999,-103.6346343527082,-103.6346259775952,-103.634622413292,-103.6346224631114,-103.6346185284398,-103.6346176102433,-103.6346156269332,-103.634615668453,-103.6346132171097,-103.6346128570364,-103.634607905781,-103.6346070540465,-103.6346045777838,-103.6346002012526,-103.6345978495513,-103.6345963566542,-103.634596431395,-103.6345934551717,-103.6345921117359,-103.6345896686952,-103.6345847174644,-103.6345847672851,-103.6345788384699,-103.6345800389881,-103.6345781374516,-103.6345756528915,-103.6345687905773,-103.6345706080557,-103.6345690313831,-103.6345675314374,-103.6345666643372,-103.6345642296203,-103.634562718254,-103.6345666613384,-103.6345682289754,-103.6345702301519,-103.634572830952,-103.634577406778,-103.6345774482988,-103.6345876106911,-103.6345881937135,-103.6345912363727,-103.6345893111877,-103.6345894606487,-103.6345930032886,-103.6345931195287,-103.6346061668129,-103.6346061917331,-103.6346102094331,-103.6346112438656,-103.6346187460849,-103.6346202223587,-103.6346262163346,-103.6346306273283,-103.634636129623,-103.6346365880854,-103.6346460595327,-103.6346469432392,-103.63464988626,-103.6346588647565,-103.6346587983397,-103.634663750816,-103.6346671369524,-103.6346670788355,-103.6346735727755,-103.6346794837195,-103.6346849611189,-103.6346853614668,-103.6346882808218,-103.6346982675859,-103.6347021537083,-103.6347135503364,-103.634713475623,-103.6347149519001,-103.6347174530591,-103.6347208794479,-103.6347268817299,-103.6347386882842,-103.6347426644717,-103.6347425233262,-103.6347444829883,-103.6347444082765,-103.6347475708758,-103.6347561720514,-103.6347645924669,-103.6347649940709,-103.634766969103,-103.6347678789675,-103.6347662200299,-103.6347676547943,-103.63477159779,-103.6347710452301,-103.6347727917845,-103.6347747751166,-103.6347741007755,-103.6347770271897,-103.6347769275623,-103.6347737935731,-103.6347697592458,-103.6347666916882,-103.6347636905422,-103.6347636573258,-103.6347565707875,-103.634756520973,-103.6347539865928,-103.6347543703485,-103.6347558715468,-103.6347583062775,-103.6347572718661,-103.6347581236177,-103.6347557647829,-103.6347519291136,-103.6347489196671,-103.6347478864844,-103.6347373901417],"lat":[44.14397718071554,44.14397748693025,44.14398355034565,44.14398455957458,44.14398667282407,44.14398625898026,44.14398294517684,44.14398290332878,44.14398393049993,44.1439864217061,44.14398633201802,44.14398809121374,44.14398804337381,44.14398696238718,44.14398400951107,44.14398321680775,44.1439781865563,44.14397274755044,44.14396771641387,44.14396588547298,44.14396585557637,44.14396333447434,44.14396110165504,44.14395713953752,44.14395457657099,44.14394916148524,44.14394908374726,44.14395296216491,44.1439539705041,44.14395325196329,44.14395094586266,44.14394878478951,44.14394585493141,44.14394224177486,44.1439414969109,44.14393969586661,44.14393750489574,44.14393137571363,44.14392915485981,44.14392265877218,44.14392154878775,44.14391609185046,44.14390957873297,44.14390920075931,44.14390595869956,44.14390484183819,44.14389798064501,44.14389542964481,44.14389320788997,44.14389104681683,44.14388773389203,44.14387910066774,44.1438747545997,44.14387400464351,44.14386779683378,44.14385894159514,44.14385735149693,44.14385733356669,44.14385155845144,44.1438486465218,44.14384102718329,44.14382994082821,44.14382707674248,44.14382710066438,44.14382280841667,44.14381962016225,44.14381781911793,44.14381109546297,44.14380749935097,44.14380573418147,44.14380246821508,44.14379598499553,44.14379422580262,44.14378918359854,44.14378753802058,44.14378645703395,44.1437857848037,44.14378435575627,44.14378444543418,44.14378554436531,44.14378597614205,44.14378999207781,44.1437900578487,44.1437918648695,44.14379341859671,44.14379847365377,44.14380103062917,44.14380221923521,44.14380510036617,44.14380732213272,44.14381240620105,44.14381492730318,44.14381536595383,44.14381939981661,44.14382054567176,44.14382487379452,44.14382851177054,44.14382935229712,44.14383444234061,44.14383926292697,44.14384250408686,44.1438436030168,44.14384363291223,44.14384691681973,44.1438469885624,44.14385577635492,44.14385690516447,44.1438630283555,44.14386485331879,44.14386809447871,44.1438730171268,44.14387868419903,44.14388238792316,44.14388671606062,44.14388782005079,44.1438917950353,44.14389862034151,44.14390152031523,44.14390408923931,44.14391499239662,44.14391743455059,44.14391817851175,44.14392573674251,44.14392901467252,44.14393333681912,44.14393906411123,44.14394045730492,44.14394330256572,44.1439432666954,44.14394470771095,44.14394822609211,44.14395038716539,44.1439517982863,44.14395684646651,44.14395686440928,44.14395977633496,44.14396120448362,44.14396770057031,44.14397327533251,44.14397591307838,44.14397623723653,44.14397766630012,44.14397718071554]}]],[[{"lng":[-103.6333039285501,-103.6333167773473,-103.6333204018821,-103.6333223282134,-103.6333263055693,-103.633329248481,-103.6333352340129,-103.6333371852878,-103.6333431874552,-103.6333515411432,-103.6333540422549,-103.6333564935032,-103.6333624790367,-103.6333638472282,-103.6333708244211,-103.6333723006465,-103.6333727092002,-103.633377711425,-103.6333781864765,-103.633392092211,-103.6333924937091,-103.6333994293493,-103.6333993129909,-103.6334007809106,-103.6334077747209,-103.6334127021448,-103.6334125193123,-103.6334154372895,-103.633415354201,-103.6334138044003,-103.6334107783929,-103.6334091775011,-103.6334056514997,-103.6334045339458,-103.6334014497689,-103.6334062940854,-103.6334042347747,-103.6334041516646,-103.6334085541987,-103.6334078963127,-103.6334033275786,-103.633397817046,-103.6333957506772,-103.6333956426458,-103.6333900394445,-103.6333893981908,-103.6333868638255,-103.6333823628154,-103.6333794116089,-103.6333722459007,-103.6333654048561,-103.6333612542082,-103.6333552520277,-103.6333483483786,-103.6333433461453,-103.633343379395,-103.6333403783051,-103.6333403284408,-103.6333388106563,-103.6333313085562,-103.6333230216736,-103.6333185606322,-103.6333186354402,-103.633316700798,-103.6333152091858,-103.6333137828037,-103.6333078554344,-103.6333079052998,-103.6333049457692,-103.6333045110474,-103.6333005100128,-103.6333004767621,-103.6332969341422,-103.6332924318844,-103.6332899390765,-103.6332899723275,-103.633284053268,-103.6332750903122,-103.633268721148,-103.6332662283408,-103.6332633103716,-103.6332588579824,-103.6332565231058,-103.6332545232143,-103.6332515803024,-103.6332506622261,-103.6332472027262,-103.6332457597333,-103.6332459508959,-103.6332439759493,-103.6332425828245,-103.6332391565781,-103.6332393976093,-103.6332371624725,-103.6332337515936,-103.6332317517039,-103.6332318514608,-103.6332379949247,-103.6332402454025,-103.6332393938321,-103.6332379437833,-103.6332364426169,-103.6332364924848,-103.6332395434353,-103.6332460634382,-103.633250622633,-103.633250597689,-103.633253082184,-103.633265054513,-103.6332674641979,-103.6332717941035,-103.6332774756986,-103.6332805195901,-103.6332915489205,-103.6333039285501],"lat":[44.14273899615036,44.14273926036432,44.14274063466523,44.14274390066724,44.14274502863992,44.1427475856484,44.1427483784203,44.14275056343579,44.14275063524975,44.14275722020554,44.14275725013023,44.14275944112735,44.14276023389787,44.14276601501847,44.14276717888102,44.14276827782784,44.14277224592593,44.14277230577438,44.14277339184241,44.14277788245293,44.14278221059465,44.14278517549921,44.14279021860175,44.14279167757696,44.14279212137982,44.14279542328553,44.14280334751806,44.14280698551066,44.14281058669813,44.14281273072564,44.14281377490671,44.14281807909162,44.14281911819094,44.14282414931504,44.1428277145971,44.14283461859059,44.14283711574995,44.14284071783743,44.14284509384783,44.14285193201234,44.14285475927682,44.14285505437645,44.14285791157931,44.14286259375296,44.14286685095345,44.14287296816029,44.14287437925129,44.14287432539993,44.14287212752141,44.14287068100457,44.14287195993914,44.14287839618621,44.14287832437305,44.1428739184358,44.14287385858596,44.142872417571,44.142872381664,44.14287454273639,44.14287524483283,44.14287515507232,44.14287093413659,44.14286383407264,44.14286059201404,44.14285768604071,44.14285730806562,44.14285404894573,44.14285073507146,44.14284857399907,44.14284673704749,44.14284384902047,44.14284380114808,44.14284524216302,44.14284700131634,44.14284694744651,44.1428465574917,44.14284511647676,44.14284144257257,44.14283953378806,44.14283369282844,44.14283330287313,44.14282966487683,44.14282744993332,44.14282021583194,44.14282019190242,44.14281763489203,44.14281402082501,44.14281217788953,44.14280963882626,44.14280135456557,44.14280024964967,44.14279554951398,44.14279226556338,44.14278182023033,44.14277026398383,44.14276625996069,44.14276623603078,44.14276191298601,44.14275586161714,44.14274508020008,44.14273858410306,44.14273640508335,44.14273638712103,44.14273422604867,44.14273210088595,44.14273145864496,44.14272899050037,44.1427300714866,44.14273082147094,44.14273240613725,44.1427363981799,44.14273721240971,44.14273615784204,44.14273439272188,44.14273344340474,44.14273899615036]}]],[[{"lng":[-103.6331848082221,-103.6331737826485,-103.6331718122966,-103.6331717873721,-103.6331667269678,-103.6331627745737,-103.6331587735595,-103.6331497192194,-103.6331387065592,-103.633133662791,-103.6331281606149,-103.633128185561,-103.6331251678501,-103.6331226916935,-103.6331139581941,-103.6330976819168,-103.6330866526183,-103.6330641605828,-103.6330546145777,-103.6330396495274,-103.6330350986679,-103.6330250942573,-103.6330250693093,-103.6330215433383,-103.6330155482509,-103.6330111054509,-103.6330006880828,-103.6329875955867,-103.6329769831427,-103.6329709809962,-103.632969488144,-103.6329695214024,-103.6329585336697,-103.6329541906279,-103.6329517227844,-103.6329427183164,-103.6329353575855,-103.6329351057782,-103.6329293031493,-103.632930796306,-103.6329295525632,-103.6329250835915,-103.6329237000581,-103.6329212571671,-103.6329199404232,-103.6329214566827,-103.6329275253412,-103.6329276001488,-103.6329251156892,-103.6329252237564,-103.6329232820652,-103.6329234067726,-103.6329275574378,-103.6329316249437,-103.6329426055786,-103.6329456565458,-103.6329536598117,-103.6329675820789,-103.6329730842465,-103.6329736174537,-103.6329761268827,-103.6329762848225,-103.6329818867425,-103.6329824698467,-103.6329850042029,-103.6329970346723,-103.6330041364987,-103.6330201430256,-103.6330322482953,-103.6330402432494,-103.633041209932,-103.6330439554175,-103.6330562165194,-103.6330586843612,-103.6330667042631,-103.6330741896688,-103.6330762157442,-103.6330859132204,-103.6330980504261,-103.6331124332282,-103.6331281282817,-103.6331330805863,-103.6331330556611,-103.6331350567898,-103.6331426515182,-103.6331512322394,-103.6331581580773,-103.6331606259219,-103.6331681196587,-103.6331775243435,-103.6331799340114,-103.6331858696422,-103.63318773778,-103.6331892376895,-103.6331926568564,-103.6331931069573,-103.6331975913202,-103.6332010354326,-103.6332014605892,-103.6332039201283,-103.6332169255968,-103.633221401632,-103.633227805256,-103.6332277470805,-103.6332262459205,-103.6332216036444,-103.6332180681017,-103.6332170016568,-103.6332134673845,-103.6332134258241,-103.6332108831631,-103.6332107834264,-103.6332067645283,-103.6332067312757,-103.6332036803359,-103.6332011709269,-103.6331980368651,-103.6331949942326,-103.6331949360556,-103.6331908589792,-103.6331905431275,-103.6331879914349,-103.6331848082221],"lat":[44.1425455333901,44.14254410394958,44.14254501775159,44.14254609783774,44.14254855998169,44.14254635101739,44.14254630314031,44.14254835646251,44.14254858480889,44.14255032599386,44.14255026015206,44.14254917916585,44.14254986421088,44.14254875329508,44.14254728444111,44.14254845401098,44.14254940330984,44.14254841299132,44.14255010029405,44.14254811966276,44.1425502268703,44.14255010714366,44.14255118812981,44.14255222631735,44.14255179444309,44.14254921947648,44.14254730481345,44.14254893811855,44.14255349457729,44.14255342274433,44.14255304474987,44.14255160373505,44.14255075197799,44.14254385486484,44.14254238391668,44.1425422761502,44.14253606317639,44.14252525091674,44.14251653479293,44.14250811869746,44.14250572853199,44.1425042336332,44.14249917348008,44.14249662154516,44.1424919007269,44.14248797725646,44.1424851670623,44.14248192590407,44.14248117501273,44.14247649283968,44.14247394780362,44.14246854467311,44.14246210844175,44.1424592751973,44.14246048790046,44.14245836184539,44.14245845762918,44.14246222733281,44.14246229318224,44.14246085905104,44.14246052805509,44.14245368480969,44.1424494285142,44.14244583241062,44.14244442132838,44.14244348402102,44.14243924567482,44.14243943723358,44.14243525876408,44.14243571457046,44.14243716755192,44.1424381232646,44.14243734713908,44.14243881808497,44.14243819290333,44.142439003638,44.14243794659929,44.14243519815106,44.14243518383514,44.14243792599532,44.14244325129027,44.14244547312152,44.14244655320769,44.14244657715414,44.14244270482573,44.14244156012328,44.14244289038234,44.14244436132607,44.14244481112585,44.14244924700189,44.14245323904636,44.14245619289815,44.14246198000352,44.14246199795144,44.14246564194714,44.14246780900219,44.14246858291808,44.14247114592728,44.14247439396856,44.14247622494011,44.14247638056101,44.14247751540477,44.14248191536681,44.14248443646799,44.14248441850561,44.14249048783692,44.14249188694447,44.14249475700942,44.14249615523171,44.14249795627541,44.14249972739148,44.14250404953634,44.14250472260353,44.1425061636185,44.14250828878056,44.14250861888142,44.1425143461307,44.1425161112638,44.14251863236492,44.14252182653268,44.14253551392461,44.14254248766627,44.1425455333901]}]],[[{"lng":[-103.6418924028072,-103.6418893356959,-103.6418848099592,-103.6418562898477,-103.6418437183654,-103.6418317637151,-103.6418156110593,-103.6418097716882,-103.6418063189747,-103.6418003334055,-103.6417904116476,-103.6417799073469,-103.6417773744906,-103.6417703629304,-103.6417679031462,-103.6417644021294,-103.6417569732226,-103.6417496015598,-103.6417449430051,-103.6417439182834,-103.6417397458143,-103.6417252926871,-103.6417204416446,-103.6417183839443,-103.641709307425,-103.641703377444,-103.6417034104892,-103.6416974496908,-103.64169747448,-103.6416914711304,-103.6416915041552,-103.6416870692968,-103.6416785826272,-103.6416751216634,-103.641674662999,-103.6416716619496,-103.6416692104256,-103.6416657176662,-103.6416618062955,-103.6416588300364,-103.6416549364293,-103.6416545025555,-103.6416530096627,-103.6416531005248,-103.6416491726432,-103.6416476222392,-103.641652932909,-103.6416517437214,-103.641647825348,-103.6416479079332,-103.641659903863,-103.6416639308814,-103.6416660133506,-103.641666112468,-103.6416686548503,-103.6416673118846,-103.641661941923,-103.6416607208336,-103.6416621484353,-103.641669216528,-103.6416727931364,-103.6416788117382,-103.6416828788055,-103.6416923831546,-103.6416934491562,-103.6416985008915,-103.6417085052056,-103.6417109401943,-103.6417139412387,-103.6417144164364,-103.6417183513661,-103.641724928973,-103.6417284960515,-103.6417360158198,-103.6417429860457,-103.6417449198205,-103.6417504231938,-103.6417503901705,-103.6417526501271,-103.6417587776959,-103.6417659003159,-103.6417707653641,-103.6417733077423,-103.6417803192693,-103.6417838863456,-103.6417868956459,-103.6417988680526,-103.6418018277992,-103.6418073133916,-103.6418123902455,-103.6418200747868,-103.6418254409651,-103.641826940863,-103.6418269739051,-103.6418355926921,-103.6418371929446,-103.64184318678,-103.6418499921307,-103.6418525755177,-103.6418525507314,-103.6418584950159,-103.6418614960617,-103.6418659239179,-103.6418763786528,-103.6418778289999,-103.6418872342533,-103.6418912352319,-103.641903141547,-103.6419075516471,-103.6419109135156,-103.6419127177389,-103.6419111987523,-103.6419076729736,-103.6419075160482,-103.6419094003042,-103.641908061756,-103.6419069214278,-103.6419049037811,-103.6419048212113,-103.6418997199241,-103.6418996125685,-103.6418924028072],"lat":[44.14188412880147,44.14188697426026,44.14188800173508,44.1418880227605,44.14189075520994,44.14188845139667,44.14188879318472,44.14188746964647,44.14188526692237,44.14188447459396,44.1418807544357,44.14188062953222,44.14188203992749,44.14188231758296,44.14188048679267,44.14188044516254,44.14187711387144,44.14187655113948,44.14187805120478,44.14187912030471,44.14188017612091,44.14187653982282,44.14187739972694,44.14187989795642,44.14188191517707,44.14187971950885,44.14187827848862,44.14187640606472,44.14187532507454,44.14187525368574,44.14187381356559,44.14187087800192,44.14187005682544,44.14186821412747,44.14186640713179,44.14186637144427,44.14186418062186,44.14186377895867,44.14185976923456,44.14185865255652,44.14185392278699,44.14185103480106,44.14185065691957,44.14184669478908,44.14184340512463,44.14183854084174,44.14182431615682,44.14181857514838,44.14181492546871,44.14181132426829,44.14181182705032,44.14181079365374,44.14180721533512,44.14180289317452,44.14180112186644,44.14179426075911,44.14178843214838,44.14178309804601,44.14177942689705,44.14177662902293,44.14177342860026,44.14177277991497,44.14176994545254,44.14177005847402,44.1417671892243,44.14176508672693,44.14176520569239,44.14176811747414,44.14176815316057,44.14176923919595,44.1417704192984,44.14176900407518,44.14176616456598,44.141765532828,44.14176705712487,44.14176996294592,44.14177002838667,44.14177146850688,44.14177410734783,44.14177661273875,44.14177811772917,44.14177747553909,44.14177570422861,44.14177542747288,44.14177258796189,44.14177226361635,44.14177384648873,44.14177568322323,44.14177646960659,44.14177963946328,44.14179101618101,44.1417932582519,44.1417932760862,44.14179183506587,44.14178689395008,44.14178258963819,44.14178302103441,44.14178529901985,44.14178817626366,44.14178925725393,44.14179184972983,44.1417918854124,44.1417951810143,44.14179746699018,44.14179964590431,44.14180408107062,44.1418041286414,44.14180859444376,44.14181261008936,44.14181877494137,44.14182518327339,44.14182814616803,44.14182918463256,44.1418360288042,44.14184109480298,44.14185585134766,44.14186196267023,44.14186265983788,44.14186626103865,44.14187052462557,44.14187520681659,44.14188412880147]}]],[[{"lng":[-103.6412753008739,-103.6412745746557,-103.6412695724622,-103.6412695476856,-103.6412625786708,-103.6412606188587,-103.6412546249857,-103.6412482125248,-103.6412442280385,-103.6412442610952,-103.6412408261533,-103.6412399571715,-103.6412369643861,-103.641236522251,-103.6412340624712,-103.6412293793556,-103.6412205570541,-103.6412125207402,-103.6412065516679,-103.6411976463762,-103.6411940131314,-103.6411887491431,-103.6411829509736,-103.6411784817888,-103.6411724796589,-103.6411590734181,-103.6411589205145,-103.6411564855166,-103.6411520392483,-103.6411506228875,-103.641152449156,-103.6411572870635,-103.6411613706992,-103.6411615424028,-103.641163710628,-103.6411697292691,-103.6411747892908,-103.6411788906927,-103.6411859175498,-103.6411864518262,-103.6411900609632,-103.6412040408553,-103.6412101008114,-103.6412211133752,-103.6412272158963,-103.6412392169998,-103.6412572608044,-103.6412612452835,-103.6412681494431,-103.6412686163555,-103.6412720214847,-103.6412857406167,-103.641290042369,-103.6412929112286,-103.6412968886799,-103.6412982729229,-103.6413027172881,-103.6413031759634,-103.6413030685392,-103.6413010343594,-103.6413008856417,-103.6412993279042,-103.6412991709069,-103.6413051482564,-103.6413095761067,-103.6413095265344,-103.6413119945735,-103.6413119615185,-103.6413188561801,-103.6413211837626,-103.6413196177666,-103.6413109562978,-103.641310881929,-103.6413077817197,-103.6413032807477,-103.6413017135004,-103.6412986958976,-103.6412970873359,-103.6412940532154,-103.6412939953837,-103.6412919872481,-103.6412918880814,-103.6412873528232,-103.6412867867425,-103.6412797338491,-103.6412753008739],"lat":[44.14220770454228,44.14220753294578,44.1422074734437,44.14220855353355,44.14220702922228,44.14220520436847,44.1422047729412,44.14220073345178,44.14219996579824,44.14219852477838,44.1421956019923,44.14218982690327,44.14218943027412,44.142186903217,44.14218507241536,44.14218408931762,44.14218491176045,44.14218625757609,44.14218474515643,44.14218031588179,44.14218603741327,44.1421881448881,44.14218842761628,44.14218693393809,44.1421868625365,44.14218237881482,44.14216724440911,44.14216433351601,44.14215563762813,44.14214592211083,44.14213680841439,44.14212939441056,44.14212583990762,44.14211360239558,44.14211109528509,44.14211044662718,44.14210798502383,44.14210371047522,44.14210271278167,44.14210127772428,44.14209918155493,44.14209788387844,44.14209543416853,44.14209520504242,44.14209095429663,44.14208834877134,44.14208987028145,44.14209063793447,44.14209504340029,44.14209649036744,44.14209852299051,44.14209878607632,44.14210034831537,44.14210614719269,44.14210727578938,44.14211233585034,44.14211491141388,44.14211671751077,44.14212140060053,44.14212281781722,44.14212930105674,44.14213180432524,44.14213864849481,44.14213979997957,44.14214309560276,44.14214525668261,44.14214672745271,44.14214816847264,44.14215293395058,44.14216052793007,44.14216339122879,44.14217013423919,44.14217337630899,44.14217766277138,44.14217760923275,44.14218047251634,44.1421811577788,44.14218582211218,44.14218722743445,44.14218974854421,44.14219008478561,44.14219440784532,44.142195794411,44.14219867050361,44.14220074827821,44.14220770454228]}]],[[{"lng":[-103.6395331076837,-103.6395240715614,-103.639523004218,-103.6395189784617,-103.6395168367341,-103.6395097024267,-103.6395006485129,-103.6394995989565,-103.6394925461313,-103.6394875440322,-103.6394840099646,-103.6394690380158,-103.6394416512504,-103.6394314904242,-103.6394295141646,-103.6394195182366,-103.6394195513365,-103.6394115564985,-103.6394101062587,-103.6394046455705,-103.63940467865,-103.6394007095719,-103.6394008750529,-103.6393948895758,-103.6393909866997,-103.6393911025206,-103.6393851253354,-103.6393841998668,-103.6393812154198,-103.639379772202,-103.6393753197068,-103.6393738943,-103.6393741176952,-103.6393756920455,-103.6393743907313,-103.6393790335181,-103.6393781730021,-103.6393792734729,-103.6393822827482,-103.6393833157674,-103.6393913188647,-103.6393958789077,-103.6394003880604,-103.6394004128907,-103.6394064823303,-103.6394065154305,-103.6394125339798,-103.6394155846242,-103.6394157252728,-103.6394273369,-103.6394303958128,-103.6394408999521,-103.6394429258677,-103.6394458937727,-103.6394503959038,-103.639454929884,-103.6394563979121,-103.6394648926961,-103.639466352455,-103.6394688535002,-103.6394713959134,-103.639478897799,-103.6394799403347,-103.639483906019,-103.6394894433062,-103.639492871054,-103.6395048502429,-103.6395073016521,-103.6395117789761,-103.6395132209484,-103.6395192146679,-103.6395236754336,-103.6395411910431,-103.639543166052,-103.6395429923197,-103.6395444851783,-103.6395444272745,-103.639549330077,-103.6395492308077,-103.6395462049948,-103.6395431046984,-103.6395418470861,-103.639537271738,-103.6395377303315,-103.6395402065511,-103.6395430973903,-103.6395440889,-103.6395428835084,-103.6395398508162,-103.6395373249608,-103.6395331076837],"lat":[44.14110915962856,44.14111049341756,44.14111336263127,44.14111439596749,44.14112049533954,44.1411261751187,44.14112822895043,44.14113037811929,44.14113245578474,44.14113239620577,44.14113379552541,44.14113217578252,44.14113507110494,44.14113316996115,44.14113206513624,44.14113158594282,44.14113014492377,44.14112968956546,44.14112751062112,44.14112564403446,44.1411242039155,44.14112271522428,44.14111551102913,44.14111471947601,44.14111034874639,44.14110530652989,44.14110415404645,44.14110090096796,44.1411001442612,44.14109760527188,44.14109539056491,44.14109213063085,44.1410824053275,44.14107918112593,44.14107051894561,44.14106444936822,44.14105831423669,44.14105400310525,44.14105367882272,44.14105224971444,44.14105234504486,44.14104987756436,44.1410495711473,44.141048490158,44.14104568052809,44.14104423950902,44.14104359094245,44.14104146561023,44.14103534240427,44.14103079634663,44.14102831098425,44.14102843610187,44.14102737894789,44.14102885571251,44.14102890933812,44.14102752192957,44.14102898082871,44.14102944213879,44.14103126106756,44.14103129085748,44.14102951959849,44.14102960895287,44.14102781982879,44.14102681673685,44.14102793301715,44.14103121679926,44.14103244076504,44.14103463163278,44.14103576534526,44.1410383043181,44.14103873673527,44.14104059140688,44.1410404389966,44.14104154380469,44.14104910803013,44.1410494859388,44.14105200704724,44.14105638968108,44.14106071183843,44.14106175618491,44.14106604349941,44.14107719699827,44.14108038545915,44.14108219246275,44.14108330324052,44.1410864266046,44.14109109583929,44.14109573890818,44.14109879172098,44.14109984202187,44.14110915962856]}]],[[{"lng":[-103.6391639633025,-103.6391634302562,-103.6391579116248,-103.6391529178097,-103.6391494664842,-103.6391439436373,-103.6391389623095,-103.6391364198776,-103.6391319177312,-103.6391289663672,-103.6391290491245,-103.639123038825,-103.6391230139894,-103.6391134518142,-103.6391108680023,-103.6391078338804,-103.6390950195662,-103.6390868255299,-103.6390853752995,-103.6390818459066,-103.6390689022049,-103.6390610947738,-103.6390565624612,-103.6390557942605,-103.6390533345887,-103.6390534338947,-103.6390524575607,-103.6390424876896,-103.6390426118333,-103.6390451377224,-103.639047778212,-103.6390512804344,-103.6390573569483,-103.6390574396892,-103.6390549552024,-103.6390505523659,-103.6390511032291,-103.6390577210825,-103.639057803844,-103.6390623225295,-103.6390613792838,-103.6390644216753,-103.6390645044363,-103.6390687527721,-103.6390675232407,-103.6390666048315,-103.6390641534338,-103.6390616772202,-103.639058667938,-103.6390566653677,-103.6390573170161,-103.6390618758305,-103.6390619006671,-103.6390539554829,-103.6390525466368,-103.6390526459632,-103.6390556966252,-103.6390562462378,-103.6390622979082,-103.6390683011758,-103.6390754024172,-103.6390814891527,-103.6391034139146,-103.6391069397188,-103.6391149179896,-103.6391213537732,-103.6391418538333,-103.6391582607094,-103.6391607203811,-103.6391631055901,-103.6391700413171,-103.6391699420198,-103.6391714100438,-103.6391783966912,-103.6391807570677,-103.6391936534419,-103.6391936037941,-103.6392010076508,-103.6392082294617,-103.6392111890972,-103.6392124625351,-103.6392079232861,-103.6392059139235,-103.6392048643346,-103.6392076998628,-103.6392016150844,-103.6392015819792,-103.6391991457022,-103.6391944215675,-103.639188411249,-103.6391833594952,-103.6391833346814,-103.6391727725686,-103.6391679832814,-103.6391639633025],"lat":[44.14123555014363,44.14123698430608,44.14123763971568,44.14123721919216,44.14123501640413,44.14123402116523,44.14123489125924,44.14123666251056,44.14123660887238,44.14123441204023,44.14123080994314,44.14123109846477,44.14123217945394,44.14123458732769,44.14123815962694,44.14123956489131,44.14124179935659,44.14123931459291,44.14123713564462,44.14123574964799,44.14123549796411,44.14123207336704,44.14122814477568,44.14121804753051,44.14121621668296,44.1412118945266,44.14121080160891,44.14120924230821,44.14120383916274,44.14120278797292,44.14119669455239,44.14119673628016,44.14119356572462,44.14118996452769,44.14118921376922,44.14118483797152,44.14118268286508,44.14117771721782,44.1411741151208,44.14117344870247,44.14117091566607,44.14116915037321,44.14116554827619,44.14116527567788,44.14116486398726,44.14116124996177,44.14115905908477,44.14115794829679,44.14115827257076,44.14115585174667,44.14115177146571,44.14114930398394,44.14114822299481,44.14114560653326,44.14114162653603,44.14113730347954,44.14113517815719,44.14113302303579,44.14113093346902,44.14113100499503,44.14112676626284,44.14112577567128,44.14112710000028,44.14112606072224,44.14112723706131,44.14113019566386,44.14113080092877,44.14113531973616,44.14113715058147,44.14114222259415,44.14114518805043,44.14114951020706,44.14115096910979,44.14115177260209,44.14115792560362,44.14116276361204,44.14116492469035,44.14116933623473,44.14118167203256,44.14118350883297,44.141190087617,44.14119499943229,44.14119533562246,44.14119748568851,44.14120472473479,44.14120825532812,44.14120969634701,44.14121375893491,44.14121645618008,44.14121674560526,44.14121884709119,44.14121992718029,44.14122232404663,44.14122665851384,44.14123555014363]}]],[[{"lng":[-103.6292747572677,-103.629268631928,-103.6292566682218,-103.6292415865513,-103.6292297640744,-103.6292156628934,-103.6291804494258,-103.6291611809419,-103.6291553289191,-103.6291345318939,-103.6291308788636,-103.6291262371539,-103.6291085172702,-103.6290982423985,-103.6290826256855,-103.6290782649439,-103.6290679167561,-103.6290574927676,-103.6290516668642,-103.6290449704326,-103.6290442863057,-103.6290409513491,-103.6290339753991,-103.6290198251088,-103.6290161969664,-103.6290057618134,-103.6290050528298,-103.6289983564006,-103.6289939459716,-103.6289925429243,-103.6289873377676,-103.6289785169122,-103.6289666140789,-103.6289659187867,-103.6289607136311,-103.6289585394662,-103.6289466379056,-103.6289451963327,-103.6289362884848,-103.6289318780605,-103.6289319401997,-103.6289253183338,-103.6289141312726,-103.6288986084682,-103.6288844457712,-103.6288785316391,-103.6288712890515,-103.6288609645022,-103.6288537840408,-103.6288456584941,-103.6288435232874,-103.6288467527087,-103.6288528644124,-103.6288529389752,-103.6288620207747,-103.6288623066037,-103.6288707428127,-103.628870170517,-103.6288761964821,-103.628892645134,-103.6289031278377,-103.6289075540672,-103.6289090068057,-103.6289157156383,-103.6289245986301,-103.6289358048573,-103.6289475324416,-103.6289564029964,-103.6289650996007,-103.6289717090209,-103.6289858592838,-103.6289917473052,-103.6290003221796,-103.6290221185936,-103.6290290066183,-103.6290340502221,-103.6290377529129,-103.6290450204005,-103.6290553312717,-103.6290671968186,-103.6290749757601,-103.6290784018046,-103.6290792350541,-103.62908224118,-103.6290839933758,-103.6290967144847,-103.629111669593,-103.629120556129,-103.6291293509007,-103.6291390050051,-103.6291596528933,-103.6291685731787,-103.6291722497679,-103.6291738236183,-103.6291722266366,-103.629173380749,-103.6291785113583,-103.629178436813,-103.6291818206331,-103.6291917426825,-103.6292078232733,-103.6292125893693,-103.6292169377002,-103.629218192925,-103.629222454277,-103.6292279589082,-103.629249288414,-103.6292552149795,-103.6292626003803,-103.6292662224773,-103.6292668805311,-103.6292727573911,-103.6292799379451,-103.6292887215836,-103.6292897239801,-103.6292876896017,-103.6292747572677],"lat":[44.14704786576353,44.14705477153499,44.14705623863717,44.14706357441732,44.14706642202943,44.14706733836653,44.14706337730832,44.14705831404734,44.14705341179981,44.14704994086151,44.14704667657614,44.1470455530266,44.1470464081994,44.14703930470419,44.14703750660154,44.14703262224842,44.14702874011444,44.14702807841333,44.14702210239266,44.14702148542954,44.1470187924653,44.14701585959774,44.1470133001039,44.14701259367462,44.14700825470266,44.14700812945334,44.14700651027181,44.14700589330599,44.14700315561554,44.14699938084093,44.14699878177389,44.14699330639198,44.14699209034163,44.14698993383341,44.14698933476516,44.14698662481567,44.1469854078782,44.14698324331239,44.14698152571746,44.14697878802465,44.1469761040174,44.14697226659869,44.14696864051162,44.14696657738084,44.14696640737637,44.14696418912217,44.14695497474302,44.14695001879269,44.14693812130535,44.14693480242227,44.14692883894859,44.14691978292041,44.14691341359826,44.14691019314967,44.14690439697089,44.14689205161781,44.14688195226368,44.14687442952557,44.1468718171071,44.14686986729014,44.14686880144518,44.14687004625107,44.14687167436091,44.14687175489035,44.14687454536956,44.1468736067007,44.1468823374194,44.14688566523767,44.14689650683567,44.14690088159358,44.14690158802847,44.14690488004506,44.14690613681083,44.14690374298609,44.14690586384562,44.1469134411499,44.14691455967245,44.14692269935834,44.14692819261871,44.14693101888414,44.14693129766564,44.14693008018639,44.14692633135262,44.1469252942512,44.14691404057825,44.14691204599387,44.14691117619495,44.14691286872648,44.14691941696546,44.14692114350154,44.14693105533654,44.14693223557251,44.14693442785876,44.14693748535142,44.14694651942278,44.14695001065937,44.14695383016692,44.14695705061595,44.14695972044409,44.14696204231659,44.14696198383685,44.14696336657816,44.14696878736778,44.14697900305293,44.14698818163296,44.14698970327476,44.14698850366042,44.14699018545412,44.14699388380448,44.14699783341727,44.1470015992483,44.14700542860722,44.14701732606927,44.14702441075277,44.14702991967253,44.14703674625239,44.14704786576353]}]],[[{"lng":[-103.6273037728569,-103.6273028966245,-103.6273013092113,-103.6273003929526,-103.6272959764602,-103.6272916351792,-103.6272906730637,-103.6272885164098,-103.6272872543817,-103.6272847914746,-103.6272832231933,-103.6272816918168,-103.6272798146918,-103.6272742572377,-103.6272720432738,-103.6272722616531,-103.6272685010401,-103.6272587462341,-103.6272532817436,-103.62725326136,-103.6272498669204,-103.6272458216862,-103.6272308307801,-103.6272279547753,-103.6272279293006,-103.6272251613883,-103.6272241941583,-103.6272214058618,-103.6272204386525,-103.6272176338123,-103.6272145558055,-103.6271998955405,-103.62719530022,-103.6271937433669,-103.6271891378434,-103.6271841763445,-103.6271743705629,-103.6271678713646,-103.6271668748153,-103.6271650015259,-103.6271646608437,-103.6271603399368,-103.6271550182441,-103.6271421143424,-103.6271374511226,-103.6271331059882,-103.6271327742374,-103.6271318592275,-103.6271290238148,-103.6271289830438,-103.6271268212939,-103.627125869354,-103.6271243418372,-103.6271221494983,-103.6271169327144,-103.6271083889616,-103.6271077942495,-103.6271039779126,-103.627098613763,-103.6270954643908,-103.6270911740488,-103.627089351732,-103.6270890263425,-103.6270868837067,-103.6270819426062,-103.6270764373416,-103.6270745844349,-103.627065139716,-103.6270608353492,-103.6270535893141,-103.627047186926,-103.6270463025064,-103.6270453862463,-103.6270448361497,-103.6270427355583,-103.6270424853529,-103.6270412946802,-103.6270370514534,-103.6270327815193,-103.6270292043689,-103.6270265638657,-103.6270230907704,-103.627011288338,-103.6270067225155,-103.6270037158491,-103.6270002151591,-103.6270003120043,-103.6270037472471,-103.6270059905474,-103.6270069068069,-103.627009715497,-103.627017969536,-103.6270225088091,-103.6270350213262,-103.6270417745777,-103.6270434129809,-103.6270422732653,-103.6270386400477,-103.6270363300477,-103.6270303358538,-103.6270300614415,-103.6270276494872,-103.6270230898287,-103.6270189026971,-103.6270146582252,-103.6270132084173,-103.6270142151787,-103.6270151314376,-103.6270154670108,-103.6270179758081,-103.6270188920669,-103.6270229844271,-103.6270267042605,-103.6270340930115,-103.6270372168837,-103.6270421274079,-103.6270421529069,-103.6270446565898,-103.6270468144964,-103.6270477154598,-103.6270489418126,-103.6270504935549,-103.6270520605922,-103.6270520962739,-103.6270542745667,-103.6270543459299,-103.6270526267786,-103.6270517156326,-103.6270517716799,-103.6270529980533,-103.62705551703,-103.6270628700736,-103.6270708598502,-103.6270730318004,-103.6270739990346,-103.6270776984773,-103.6270826905631,-103.6270870063727,-103.6270973877137,-103.6271040326621,-103.6271052182635,-103.6271085515454,-103.6271125203307,-103.6271223311884,-103.6271318727225,-103.6271353079521,-103.6271439179324,-103.6271500548028,-103.6271567621791,-103.6271601464343,-103.6271642630246,-103.6271695498812,-103.6271790659338,-103.627190062368,-103.627196423972,-103.6272027537396,-103.6272100813025,-103.6272170783672,-103.6272200952371,-103.6272215717799,-103.6272270311505,-103.6272374430771,-103.6272436462079,-103.6272449184171,-103.627251477392,-103.6272605000032,-103.62726320676,-103.6272662605364,-103.6272692519129,-103.6272713894314,-103.6272713741388,-103.62727410637,-103.6272795924867,-103.627280462867,-103.6272831849174,-103.6273014936262,-103.6273060431028,-103.6273075387817,-103.6273087040057,-103.6273123027789,-103.6273122212482,-103.6273153953348,-103.6273152934216,-103.6273131265676,-103.6273093494392,-103.6273081179761,-103.6273063478574,-103.6273037728569],"lat":[44.14673587524292,44.14674729967248,44.14674991943245,44.14674990842121,44.14675601353179,44.14675881987456,44.14676078721471,44.14676164090896,44.14676338496682,44.14676423498054,44.14676597535791,44.14676617753248,44.14676813387616,44.14677070592455,44.14677397808862,44.14677771884021,44.14678185202905,44.14678107486213,44.14677969022159,44.14678056958892,44.14678206744065,44.1467853175959,44.14678917567883,44.14679192008858,44.1467930190727,44.1467938654195,44.14679605327592,44.14679777898994,44.14679996594624,44.14680235139561,44.14680341369332,44.14680345807827,44.14680406188332,44.14680536304079,44.14680640697927,44.14680964612008,44.14681106781416,44.14681472782905,44.14681823430085,44.14681997101073,44.1468215064627,44.14682343343305,44.1468239073096,44.14682188157603,44.14682271897776,44.14682574494615,44.14682684114938,44.1468268301518,44.14683053419978,44.14683229293431,44.14683336624223,44.1468348943473,44.14683487598784,44.1468372687966,44.1468383053853,44.14683798301775,44.14683731593544,44.14683654733982,44.14683808520431,44.14684222573414,44.14684283410097,44.14684237194141,44.14684324764269,44.14684344246765,44.14684580133657,44.14684617542205,44.14684703276317,44.14684603962883,44.14684730685991,44.14684370131535,44.14684318500391,44.14684185450476,44.14684184349147,44.14683919804256,44.14683763324719,44.14683521198123,44.14683387780094,44.14683250782951,44.14683223592686,44.14682845480252,44.1468238053243,44.14682272482998,44.14682410792042,44.146823346251,44.14682133120773,44.14681425223043,44.14681007501113,44.14680681753241,44.14680222675794,44.14680223777156,44.14679963269567,44.14679929165393,44.14680110544087,44.14680147641952,44.14680001804643,44.14679519942212,44.14679166727378,44.14679030463464,44.14678455893865,44.14677964947133,44.14677832630431,44.14677697834437,44.1467760439249,44.14677225456789,44.14677088458067,44.14676756838265,44.14676362177861,44.14676363279216,44.14676231785751,44.14675948859833,44.14675949961185,44.14675427112854,44.14675189758248,44.14674934665794,44.14674630601382,44.14674526574753,44.14674416586343,44.1467415571205,44.14674070344592,44.14674137420962,44.14674116927217,44.14674008863355,44.14673834824444,44.14673680912674,44.14673507608475,44.14673199784934,44.1467271397681,44.14672690823801,44.14672449065312,44.14672428481556,44.14672101632192,44.14672000541317,44.146717902867,44.14671638942641,44.14671420157129,44.14671270739075,44.14670814875356,44.14670644140285,44.1467065661807,44.14670972514194,44.14671127803834,44.14671241829269,44.1467124659946,44.14671082468882,44.14670764059859,44.14670438311568,44.14670184776232,44.14670060255283,44.14670112252409,44.14670006390869,44.14669373552087,44.14668962157927,44.14668753646912,44.14668744895315,44.14668972399098,44.14669331851447,44.1466934065803,44.14669459086424,44.14669616576825,44.1466983829947,44.14669998815354,44.14669879341764,44.14669468958423,44.14669250629318,44.14669054491941,44.14669225329683,44.14669404505111,44.14669408175116,44.14669675653811,44.14669678222654,44.14669744197706,44.14669813474693,44.14669864003405,44.14670063029702,44.1467017623003,44.14670242258487,44.14670379622686,44.14670513406986,44.14670756633158,44.14671046899512,44.1467139864645,44.14672194111972,44.14672633795644,44.1467276317849,44.14673242381063,44.1467328492678,44.14673018915842,44.14673587524292]}]],[[{"lng":[-103.6275453086517,-103.6275414440509,-103.6275400326801,-103.6275362030563,-103.6275360771396,-103.6275305293473,-103.6275284319067,-103.6275283759249,-103.6275258330051,-103.6275216406237,-103.627520325948,-103.6275182087743,-103.6275181458047,-103.6275130307437,-103.6275130027525,-103.6275154756949,-103.6275153917422,-103.6275122534133,-103.6275054147299,-103.6274979205494,-103.6274940085914,-103.6274937297905,-103.6274854137351,-103.6274803826269,-103.6274769870044,-103.6274736320989,-103.627467720276,-103.6274668535574,-103.6274622074571,-103.6274512982758,-103.6274499988223,-103.6274432412839,-103.6274373714485,-103.6274208654657,-103.6274045414161,-103.6274003840149,-103.6273962756131,-103.6273963035859,-103.627394626133,-103.627388435517,-103.6273867580642,-103.6273863660699,-103.6273832980436,-103.6273720912835,-103.6273696792542,-103.6273692885102,-103.6273671980576,-103.6273664235579,-103.627363329376,-103.6273524828587,-103.6273505112656,-103.6273505322511,-103.6273471855844,-103.6273435449058,-103.6273398132345,-103.6273372970562,-103.6273348660916,-103.6273298699686,-103.6273294919731,-103.6273237271122,-103.6273212961489,-103.6273183809693,-103.6273143215362,-103.6273084797012,-103.6273027638043,-103.6273016882907,-103.6272988583283,-103.6272977465606,-103.6272941421242,-103.6272952314974,-103.6272936392631,-103.6272938351908,-103.6272956093753,-103.6273003057028,-103.6273104111231,-103.6273388795466,-103.6273418214469,-103.6273452380737,-103.6273520025904,-103.6273712755349,-103.6273789627359,-103.6273911223697,-103.6273987313673,-103.6274184592576,-103.6274226796241,-103.6274227076171,-103.627425251784,-103.6274365574457,-103.6274525047108,-103.6274570808208,-103.6274679760044,-103.6274687854871,-103.6274743135401,-103.6274862323943,-103.6275066115615,-103.6275165825864,-103.6275208113994,-103.627522844638,-103.627527415013,-103.627544577756,-103.6275483164151,-103.6275629909751,-103.6275667436299,-103.6275671343773,-103.6275700483074,-103.6275690626663,-103.6275668265494,-103.6275655550918,-103.6275675603432,-103.6275678461385,-103.6275665607064,-103.627560258147,-103.6275593774365,-103.6275564075456,-103.6275563725682,-103.6275551138552,-103.6275533606916,-103.6275512632532,-103.6275495450877,-103.6275489471391,-103.6275510393718,-103.6275555817821,-103.6275558128665,-103.6275528010095,-103.6275527170384,-103.6275510325997,-103.6275505006709,-103.6275453086517],"lat":[44.14447486226825,44.14447874212875,44.14448536863159,44.14448773907556,44.14449317279433,44.14449733403719,44.14449730883522,44.1444997246214,44.14450090229608,44.14450085192198,44.14450325168379,44.14450413196643,44.14450684927582,44.14451041160267,44.14451161949577,44.14451346155404,44.1445170843332,44.14451917830649,44.1445199063502,44.14451897551572,44.14451682739757,44.1445107838008,44.14450766420245,44.14450760374871,44.1445093743906,44.14450933407786,44.14451107538495,44.14451227319976,44.14451372720812,44.1445138977282,44.14451569445773,44.14451772720837,44.14451765667429,44.14452410269222,44.14452269830317,44.14452113850835,44.14451746445059,44.14451625745764,44.1445162373001,44.14451193500615,44.14451191484849,44.14451070190857,44.14450902696194,44.14450842655159,44.14450687759672,44.14450566467173,44.14450533794361,44.14450261057043,44.14450163374573,44.14450274360321,44.14450151272893,44.14450060725921,44.14450026543458,44.1444944830443,44.14449262675618,44.14449259651862,44.14448894351714,44.14448737364059,44.14448555675397,44.14448095706543,44.14447730406366,44.14447636330883,44.14447057678557,44.14446929835195,44.14446258619979,44.14445472068382,44.14445015716464,44.1444438019499,44.14443651015692,44.14442565188478,44.14442200896191,44.14441355551118,44.14440934802971,44.14440578068034,44.14440409067885,44.14440624423837,44.14440597798469,44.14440330097698,44.14440096670873,44.14440180152708,44.14439585455713,44.14439600067757,44.14439337404701,44.14439270538803,44.14439154787278,44.14439033997972,44.14438916232228,44.14438990229083,44.14438948980363,44.1443910555282,44.14439148805375,44.14439270601001,44.14438945025479,44.14438726276672,44.14438923423058,44.14439006278705,44.14439182131071,44.14439456290712,44.14439643016717,44.14439784461594,44.14439939937417,44.14439957569416,44.14440052650524,44.1444017394296,44.14440268016308,44.14440901017441,44.14441502355375,44.14441561239158,44.14441956188035,44.14442530395388,44.1444264958382,44.14442702422588,44.14442882598801,44.1444303001404,44.14443180955676,44.14443179443288,44.14443509554876,44.14443507034723,44.1444368611466,44.14444057163907,44.14444473169196,44.14444780594396,44.14445596291864,44.14445924801051,44.14446287168982,44.14446315305785,44.14446797868386,44.14447486226825]}]],[[{"lng":[-103.626862905828,-103.6268574477619,-103.6268531714036,-103.626845170392,-103.6268409277781,-103.6268371553984,-103.6268291251728,-103.6268249328064,-103.6268228016064,-103.6268156533399,-103.6268118517047,-103.6268067353693,-103.6267911654485,-103.6267878754806,-103.6267869947485,-103.6267827673846,-103.6267773232986,-103.6267740326583,-103.6267677428583,-103.6267652979331,-103.6267569049589,-103.6267497986804,-103.626742796167,-103.6267429431711,-103.6267349841886,-103.6267329439988,-103.6267298345878,-103.6267302051003,-103.6267340347424,-103.6267340767319,-103.6267316305806,-103.626730910856,-103.6267321695651,-103.6267322185668,-103.6267285499344,-103.6267286689537,-103.6267262017878,-103.6267220024127,-103.6267178800678,-103.6267175580859,-103.6267188575346,-103.6267213877055,-103.6267239528747,-103.6267264748042,-103.6267390531404,-103.6267427987595,-103.6267486685666,-103.6267541616263,-103.6267580612599,-103.6267664879927,-103.6267665369931,-103.6267644618066,-103.6267640780678,-103.6267595007179,-103.6267566428223,-103.6267596547319,-103.6267621836515,-103.6267622116577,-103.6267647488183,-103.6267647838156,-103.6267669149931,-103.6267775807713,-103.6267899894778,-103.626794957558,-103.6267957612835,-103.6267982704589,-103.626799904645,-103.6268048949698,-103.626808269623,-103.6268142514282,-103.6268201632197,-103.626824838567,-103.6268286331845,-103.6268386883583,-103.6268448661512,-103.6268452428804,-103.6268535378688,-103.6268563887794,-103.6268626703098,-103.6268675614145,-103.6268737811971,-103.6268758773782,-103.6268775198285,-103.6268816911982,-103.6268845631036,-103.6268924451021,-103.626892424089,-103.626896589719,-103.6268973711845,-103.6268986298933,-103.6269035629879,-103.6269035139923,-103.626906846641,-103.626907238624,-103.6269097535422,-103.626910858275,-103.626913338179,-103.626913275203,-103.6269107042777,-103.6269093615793,-103.626902570306,-103.6268962525048,-103.6268953857782,-103.6268874197843,-103.6268861133285,-103.6268823327091,-103.626862905828],"lat":[44.14429603311303,44.1442962691064,44.14429984148622,44.14430125603874,44.14430331898713,44.144303273637,44.14430589426596,44.14430584386647,44.14430732898265,44.14430814876955,44.14430931129629,44.14431287357629,44.14431116869371,44.14431234433534,44.14431414609127,44.14431560510611,44.14431523804932,44.14431248042258,44.1443124048052,44.14430935573839,44.14430955644266,44.14430856528639,44.14430304496694,44.14429670488021,44.14429630668579,44.14429386659898,44.14428855675102,44.14428537786492,44.14428300744814,44.14428119650913,44.14427814652652,44.14427300424892,44.14427301938184,44.1442709060196,44.14426633240323,44.14426119930917,44.14425905569604,44.14425930771601,44.14425623758079,44.14425200580696,44.14425020998598,44.14424963629063,44.14424755317939,44.14424728099208,44.14424743221583,44.14424868547693,44.14424875604635,44.14424701064221,44.14424162139277,44.14423991035729,44.14423779699499,44.1442368663246,44.14423535187453,44.14423378700759,44.1442304304682,44.14422714449752,44.14422657078626,44.14422536289351,44.14422448767404,44.14422297825813,44.14422149404306,44.14421905721973,44.14422116733338,44.14422394512592,44.14422546462497,44.14422579639747,44.14422762838779,44.1442295007254,44.14422863467293,44.14422387456791,44.1442221341945,44.14421947233434,44.14421861223028,44.1442190347175,44.14422394100197,44.14422575787503,44.14422978298876,44.144233441049,44.1442338190696,44.14423991721416,44.14424301255796,44.1442430377568,44.14424456733786,44.14424552320493,44.14424827579492,44.14425199433396,44.14425290070363,44.14425415810837,44.14425658396136,44.14425659909244,44.14426088629633,44.14426299965874,44.1442639454426,44.14426515838407,44.14426518861595,44.14427184535727,44.14427338590514,44.14427610231389,44.14427848786771,44.14428209551515,44.14428563766502,44.14428676994755,44.14428796775796,44.14428787199741,44.14428997024361,44.14429022640311,44.14429603311303]}]],[[{"lng":[-103.6288076094835,-103.6288061903054,-103.6287982200514,-103.6287847471388,-103.6287720800163,-103.6287682265788,-103.6287577552788,-103.6287480809593,-103.6287389427151,-103.6287389754953,-103.628729213779,-103.6287279693543,-103.6287249107923,-103.6287135341541,-103.6287018074932,-103.6286882360504,-103.6286796309588,-103.6286585347772,-103.6286510025429,-103.6286381079542,-103.6286355972529,-103.6286272110563,-103.6286239361469,-103.6286226686368,-103.6286148622083,-103.6286043799991,-103.6285960278406,-103.6285888982589,-103.6285864081546,-103.6285793222586,-103.6285755877397,-103.6285697572038,-103.6285677704172,-103.6285635503756,-103.6285580087226,-103.6285529424024,-103.6285503333983,-103.6285477886927,-103.6285465770424,-103.6285401133713,-103.6285390901473,-103.6285416636441,-103.6285443394456,-103.6285444923851,-103.6285407141683,-103.6285427832112,-103.6285474836941,-103.6285494486365,-103.6285525134389,-103.6285505199778,-103.6285665478654,-103.6285699550912,-103.628577859811,-103.6285838432728,-103.6285959675271,-103.6286172766126,-103.6286251157857,-103.6286341569227,-103.6286459490706,-103.6286517577606,-103.6286608632154,-103.628667470122,-103.6286803078804,-103.6286878110279,-103.6286910216598,-103.628696229973,-103.6287013169164,-103.6287032831083,-103.6287038288681,-103.6287083385223,-103.6287082620617,-103.6287167016013,-103.6287403075079,-103.6287461601475,-103.6287492943255,-103.6287551576237,-103.62875974374,-103.6287637173243,-103.6287728895566,-103.6287741667392,-103.6287795279914,-103.628785424069,-103.6287899883254,-103.6287912546099,-103.6287951857452,-103.6287974577694,-103.6287981330096,-103.6288109624765,-103.6288138344454,-103.62881444575,-103.6288183441291,-103.6288220883499,-103.6288220118956,-103.6288153188432,-103.6288131044512,-103.6288130153433,-103.6288135611125,-103.628815526057,-103.6288159966216,-103.6288249928672,-103.6288234644807,-103.6288245996975,-103.6288217831847,-103.6288240754776,-103.6288233003438,-103.6288199695874,-103.6288178845095,-103.6288132437671,-103.6288095941741,-103.6288076094835],"lat":[44.14455859436583,44.1445632959065,44.14456791880514,44.14456889024434,44.14456477439883,44.14456142486539,44.14456082739208,44.1445541047051,44.14455257969792,44.14455116388811,44.14454821609235,44.14454536964658,44.14454451120517,44.14454613988521,44.14454316849751,44.14453498371618,44.14453297493824,44.1445319098031,44.14452981812867,44.14452069703182,44.14451594831156,44.14451018551505,44.14451014619655,44.1445082430078,44.14450579044511,44.14450566459443,44.14449848600094,44.14449509712718,44.14448940511777,44.14448412969723,44.14447559124024,44.14447268972985,44.14447360941089,44.1444733884371,44.14447066160074,44.14446305068801,44.14446254759497,44.14445921376752,44.1444549524102,44.14445109976108,44.14444628389825,44.14444073768518,44.14443841007401,44.14443180536214,44.14442515435034,44.14441868603608,44.14441579847569,44.14441582206808,44.14441310606377,44.14439790325774,44.14438488350155,44.14437926229781,44.14437746923422,44.1443737660321,44.14437140856192,44.14437322390408,44.14437426155671,44.14438003311696,44.14438017469177,44.14438401947141,44.14438695939498,44.14438467987671,44.14438216440612,44.1443835087769,44.14438637792801,44.14438785665918,44.14439452337756,44.1443945469823,44.14439927211149,44.14440262952526,44.14440593188143,44.14440933647406,44.14440860181963,44.14441063366087,44.14441680516659,44.14441829175811,44.14441834681363,44.14441650654462,44.1444166166548,44.14441804819034,44.14441292130518,44.14441299208527,44.14441399131286,44.14441589358475,44.14441594077611,44.14441809621209,44.14443013188794,44.14442998812649,44.14443126480995,44.14443315921901,44.14443462131939,44.14444268811731,44.1444459904736,44.14445204490877,44.14445772139607,44.14446664475583,44.14447136988455,44.14447139347239,44.14447942097238,44.14448707904928,44.14449649785637,44.14450406156725,44.14451252137595,44.14452670462444,44.14453188656463,44.14453420541971,44.14453937073456,44.1445416747643,44.14454655112783,44.14455859436583]}]],[[{"lng":[-103.6289122106245,-103.6289047193362,-103.6289045445973,-103.6288972511528,-103.6288964214269,-103.6288863866384,-103.6288849455995,-103.6288809816758,-103.6288809379799,-103.6288781869737,-103.6288722362672,-103.6288656523762,-103.6288609679304,-103.6288483896393,-103.6288359533156,-103.628830843225,-103.6288309742967,-103.6288282238342,-103.6288150542993,-103.6288113415456,-103.6288108176121,-103.6288048467155,-103.6287985232871,-103.6287958705633,-103.628795815966,-103.6287879099326,-103.628783914498,-103.6287773633854,-103.6287709529991,-103.6287708765408,-103.6287668155664,-103.6287563332859,-103.6287525659569,-103.6287368437881,-103.6287316354085,-103.628720073313,-103.6287154863677,-103.6287155956102,-103.6287190234419,-103.6287216774166,-103.6287217538568,-103.6287257178029,-103.6287258707037,-103.6287181394565,-103.6287158797768,-103.6287165021637,-103.6287199736938,-103.62872668989,-103.6287249093652,-103.628726208395,-103.628728381708,-103.6287289497475,-103.6287224641648,-103.6287034864544,-103.6287032719889,-103.6287104101522,-103.6287105521551,-103.628706151694,-103.6287063592179,-103.628708422474,-103.6287144059678,-103.6287204986817,-103.6287296928061,-103.6287400986,-103.6287492587152,-103.6287594897751,-103.6287647199836,-103.6287731377387,-103.6287749728667,-103.6287795753829,-103.6287841111467,-103.6287867760143,-103.6287946589427,-103.6287996793995,-103.6288023889374,-103.6288023343407,-103.6288056052403,-103.6288245760517,-103.6288335735943,-103.6288387819678,-103.628841314535,-103.6288478219606,-103.6288510216828,-103.6288673782254,-103.6288724882899,-103.6288821832738,-103.628887882814,-103.6288956796068,-103.6288956468509,-103.6288976471377,-103.6289074281715,-103.6289107645627,-103.6289127364834,-103.6289122106245],"lat":[44.14485240896331,44.14486458770141,44.14487213568695,44.14487582228073,44.14488336240403,44.14489220733581,44.1448978530504,44.14489922077146,44.14490110821786,44.1449054609062,44.14490902471463,44.14491036188583,44.14491455246331,44.14492006358581,44.14491944253142,44.14491371907699,44.14490805763801,44.14490691201265,44.14490804034265,44.14490687842582,44.14490121002427,44.14489564533255,44.14489445589036,44.14489584024905,44.14489819843186,44.14489999149457,44.1449027741369,44.14490269549322,44.14489648465885,44.14489978701484,44.14490540037598,44.14490527453835,44.14489815099679,44.14489796225304,44.14489648442333,44.14489149326639,44.14488638163081,44.14488166346519,44.14487509896956,44.14487371462767,44.14487041317182,44.14486904455624,44.14486244074441,44.1448566849173,44.14485088093075,44.14484250953086,44.14483405758882,44.14482705990223,44.14481901667613,44.1448195049391,44.14481801755684,44.14481434660448,44.14481143813843,44.14481026587122,44.14480704639514,44.14479430619094,44.14478817311559,44.14478009843614,44.14477113554144,44.14476691350215,44.14476321029384,44.1447547898195,44.1447539566607,44.14475738485645,44.14475796659075,44.1447689418699,44.1447694764251,44.14477382428719,44.14477950932984,44.14478121940208,44.14478103433452,44.14477917925453,44.14477832944982,44.14478059715106,44.14478408525682,44.14478644343969,44.14478834888901,44.14478812664004,44.14479578473146,44.14479726255648,44.14480106799923,44.14480303318542,44.14480637486887,44.14480751474711,44.14481323910002,44.14481901758863,44.14482757962266,44.14483050471889,44.14483191962866,44.14483294482574,44.1448325328142,44.14483485697524,44.14483915636796,44.14485240896331]}]],[[{"lng":[-103.6248574270484,-103.6248549897802,-103.6248420798297,-103.6248378050253,-103.6248325846475,-103.6248289210651,-103.624828905747,-103.6248218682499,-103.6248209061079,-103.6248216844935,-103.6248197971739,-103.624816097855,-103.6248093551442,-103.6248029697029,-103.6248029544054,-103.6248004864787,-103.6247882745347,-103.6247811298465,-103.6247737669634,-103.6247734454086,-103.624768055025,-103.6247542010625,-103.6247499428256,-103.6247480797916,-103.6247480338343,-103.6247458351757,-103.6247421409744,-103.6247421205558,-103.6247387223706,-103.624738701952,-103.6247346453365,-103.6247318928612,-103.6247229220976,-103.6247189522767,-103.6247137931498,-103.6246979022968,-103.6246942795508,-103.6246934092804,-103.6246892110515,-103.6246883471518,-103.6246820574592,-103.6246803130699,-103.624676927547,-103.6246785381187,-103.6246841208948,-103.6246872651527,-103.6246882987772,-103.6246879121683,-103.6246919456746,-103.6246999072183,-103.6247042483769,-103.6247056278232,-103.6247069000536,-103.6247149443991,-103.6247202221818,-103.624723351115,-103.6247255089338,-103.6247314324246,-103.6247336553485,-103.6247383117085,-103.6247410909677,-103.6247429221316,-103.6247503309609,-103.6247564831754,-103.6247610996688,-103.6247617606959,-103.6247626769025,-103.6247648602369,-103.6247655161436,-103.6247719589771,-103.6247775047509,-103.6247775251689,-103.6247790730143,-103.6247836719647,-103.6247903687278,-103.6247966775849,-103.6247990995514,-103.6248033743488,-103.6248040251551,-103.624809587496,-103.6248133276427,-103.6248167168696,-103.6248197845427,-103.6248237186185,-103.6248261610024,-103.6248310968027,-103.6248362916759,-103.6248399195166,-103.6248413895421,-103.6248508183579,-103.6248522947537,-103.6248553215723,-103.6248625313446,-103.6248667959236,-103.6248698176439,-103.6248715990263,-103.624872515233,-103.6248730180225,-103.6248768997996,-103.6248805531793,-103.6248841669553,-103.6248858756209,-103.6248870968136,-103.624892113042,-103.6248942351245,-103.6248947799774,-103.6248940768932,-103.6248897522915,-103.624888153416,-103.6248880819483,-103.6248898633326,-103.6248900764345,-103.6248878777846,-103.6248878216344,-103.6248847539584,-103.6248803974906,-103.6248802852104,-103.6248790640169,-103.6248771920184,-103.6248720010082,-103.6248664347932,-103.624865482851,-103.6248672532521,-103.624865869489,-103.6248643369602,-103.6248643165435,-103.6248621548759,-103.6248574270484],"lat":[44.1435285755714,44.14352832565073,44.14353190925654,44.14353185779163,44.14353311391156,44.14353306980493,44.14353372955513,44.14353430476357,44.14353627208362,44.14354221906582,44.14354461550391,44.14354611051399,44.14354712862686,44.14354595245901,44.14354661130915,44.14354768178778,44.14354753476176,44.14355272641888,44.1435541764192,44.14355483248241,44.14355694359228,44.14355504104097,44.14355432983762,44.14355562637576,44.14355760562631,44.14356021799279,44.14356149248364,44.14356237185051,44.14356409016183,44.14356496952872,44.14356865971627,44.1435688462544,44.14357379624363,44.14357374844631,44.1435723664601,44.14357283506408,44.14357103221937,44.14356904283742,44.14356569351616,44.14356348363243,44.14355813022517,44.14355437109282,44.1435443576212,44.1435387363705,44.14353506546098,44.14353114461191,44.14352609905896,44.14351641866398,44.14350762312517,44.1434996298689,44.1434968236216,44.14349002300679,44.14348783974315,44.14348331795702,44.14347964337352,44.14347638227353,44.14347552864123,44.14347032228422,44.14346661091931,44.1434633682092,44.14346208180225,44.14346210384942,44.14345867460033,44.14345249004908,44.14344209161203,44.14343990008864,44.14343991111959,44.14343795850291,44.14343598749629,44.1434347451971,44.14343261338482,44.14343173401791,44.14343087304071,44.14343004879766,44.14343100903669,44.14343548305607,44.14343639182808,44.14343644329435,44.14343469190419,44.1434319003552,44.14342864661135,44.14342736754614,44.14342674454416,44.14342833145501,44.1434283608595,44.143426221701,44.14342606366459,44.14342764688806,44.143430083746,44.14343173680757,44.14343395316364,44.14343508979468,44.14344023369086,44.14344072528827,44.14344208153567,44.14344430156316,44.14344431259323,44.14344893638806,44.14345272214946,44.14345320548792,44.1434554484753,44.14346074672191,44.1434607614235,44.14346829807046,44.14346898355214,44.14347184952807,44.14347579887104,44.1434779462906,44.14348100523664,44.14348408347101,44.14348630349826,44.1434902647712,44.14349287714052,44.14349529562464,44.14349591862839,44.14349938463289,44.14350422070105,44.14350420599936,44.14350594268825,44.14350588019461,44.1435088922784,44.14351042036543,44.14351845819385,44.14352010076018,44.14352030198832,44.14352118135525,44.14352225462193,44.1435285755714]}]],[[{"lng":[-103.6255738125296,-103.6255699287176,-103.625569582003,-103.6255657022876,-103.6255605533434,-103.6255551165206,-103.6255509341357,-103.6255476849369,-103.6255438159145,-103.6255431492187,-103.6255379842328,-103.6255360363435,-103.6255360149557,-103.6255321525296,-103.6255321364887,-103.6255253756958,-103.6255186429086,-103.6255176508636,-103.6255147430318,-103.6255067344187,-103.6255051011831,-103.6254990083357,-103.6254955074579,-103.6254955288463,-103.6254910639296,-103.6254904400097,-103.6254875576841,-103.6254859310243,-103.6254782210031,-103.6254778421617,-103.6254762142726,-103.6254626511329,-103.6254568889806,-103.6254530693723,-103.6254492163888,-103.6254425263992,-103.6254332098548,-103.6254299713664,-103.6254203681959,-103.6254197109215,-103.625416179189,-103.6254151817941,-103.6254113234834,-103.625404857158,-103.6254041958067,-103.6253987108337,-103.6253833184493,-103.6253788406385,-103.6253758953492,-103.6253733342532,-103.6253729982297,-103.6253691304518,-103.6253604485172,-103.6253565646959,-103.625352718329,-103.6253449708473,-103.6253350517909,-103.6253328374351,-103.6253200319542,-103.6253188001822,-103.6253124515662,-103.6253105785832,-103.6253097136939,-103.6252992361882,-103.6252989577615,-103.6252973792496,-103.6252952451554,-103.625293046845,-103.6252898671802,-103.6252861010753,-103.6252745862193,-103.6252746397199,-103.6252733972542,-103.6252744214134,-103.6252786210965,-103.6252805945011,-103.6252806265888,-103.6252855304702,-103.6252865826181,-103.6252878839318,-103.6252882788249,-103.6252883216291,-103.6252867324225,-103.625282250196,-103.6252783758219,-103.6252751961799,-103.6252752496804,-103.6252740179111,-103.6252744288488,-103.6252792845554,-103.6252812525902,-103.6252831790705,-103.6252886961498,-103.6252887603456,-103.6252833556357,-103.6252833717004,-103.6252814666121,-103.6252814933727,-103.6252853998326,-103.6252854319411,-103.625286391882,-103.6252880465336,-103.625288126794,-103.6252920159594,-103.6252942570713,-103.6252959010266,-103.6253029539304,-103.6253176696852,-103.6253246796439,-103.6253259340553,-103.6253355318664,-103.6253355104755,-103.6253393259796,-103.6253418924198,-103.6253502905668,-103.6253573165903,-103.6253611962872,-103.625362182987,-103.6253657266814,-103.625367364016,-103.6253673961225,-103.6253671082487,-103.6253607756835,-103.625361442403,-103.6253605038528,-103.6253570136771,-103.6253571099763,-103.6253600231547,-103.6253661118758,-103.6253664478988,-103.6253731699827,-103.6253782386692,-103.6253884830356,-103.6253932263952,-103.6254108274597,-103.6254155868629,-103.6254242300791,-103.6254280937313,-103.6254344744466,-103.6254393194495,-103.6254460575761,-103.6254483361395,-103.6254486989189,-103.6254509881766,-103.6254570703003,-103.6254586393469,-103.6254608697639,-103.625472637788,-103.6254781829518,-103.6254788562451,-103.6254776499765,-103.6254763807501,-103.6254761397693,-103.6254781197399,-103.6254790969926,-103.6254858190756,-103.6254880869222,-103.6254957969518,-103.6254971357111,-103.6254997128642,-103.6255070333595,-103.6255108690241,-103.6255137072981,-103.6255242950831,-103.625526139262,-103.6255261232211,-103.6255283482913,-103.6255446266366,-103.6255484195058,-103.6255483874036,-103.6255511828835,-103.625553093321,-103.6255530772596,-103.6255584445465,-103.6255638813638,-103.6255663942926,-103.625568944691,-103.6255714469473,-103.6255714148456,-103.6255735864284,-103.6255811787687,-103.6255819033268,-103.6255884983011,-103.6255905990654,-103.625593138772,-103.6255931227318,-103.6255944039036,-103.6255940357817,-103.6255924346295,-103.625592407875,-103.6255904492942,-103.6255903904592,-103.625593555316,-103.6255899474411,-103.625586394304,-103.625586372917,-103.625580600074,-103.6255738125296],"lat":[44.14262423720605,44.14262603522944,44.14262718346743,44.14262875105799,44.14262984241209,44.14262954650976,44.14263041811158,44.14263245425241,44.14263356100695,44.14263470539453,44.14263648800053,44.14263761787174,44.14263853954233,44.14263941589385,44.14264010714676,44.14264164006776,44.14264202001514,44.14264339186987,44.14264451018961,44.142644644302,44.14264600754069,44.14264639608781,44.14264543113223,44.1426445094617,44.14264376338735,44.14264306443351,44.14264302974925,44.14264416348514,44.14264522311653,44.14264775566016,44.1426488884808,44.14265379857186,44.14265372923192,44.14265276043954,44.14265317593792,44.14265171163968,44.1426529833177,44.1426545577198,44.14265444215534,44.14265512659193,44.14265554505484,44.14265714732628,44.14265779234094,44.14266048210865,44.14266139607776,44.14266317482665,44.14266265573997,44.14266385763048,44.14266658977003,44.14266655894869,44.14266724635078,44.14266835311435,44.14266986290562,44.14267166092162,44.14267184511407,44.14267451855982,44.14267416870462,44.14267298874509,44.14267283463298,44.14267074457059,44.14266836244521,44.14266626466576,44.14266210378058,44.14265828817099,44.14265644006397,44.14265549913849,44.14265086111387,44.14264898990076,44.14264802970506,44.14264475583093,44.14264415628269,44.14264185120648,44.14264022197884,44.14263746672053,44.1426359038911,44.14263362102112,44.14263223851543,44.14262791567621,44.14262400834475,44.1426231020784,44.14261987828264,44.14261803404165,44.14261755395128,44.14261750000669,44.14261883716979,44.14261787607364,44.14261557099741,44.14261348093455,44.14260956588601,44.14260731860572,44.14260526705339,44.14260505975707,44.14260189760791,44.14259913169643,44.14259745237543,44.14259676022252,44.14259604584838,44.14259489286022,44.14259217319129,44.14259078978549,44.14259080133859,44.14258851553253,44.14258505746811,44.14258302903674,44.14258305600885,44.14258123103789,44.14257933367401,44.1425814930243,44.14258296118065,44.14258412958755,44.14258447557744,44.14258539724791,44.14258659647682,44.14258639688126,44.1425832694019,44.14258404540335,44.14258247871994,44.1425813372842,44.14258045710262,44.14257886343326,44.14257748002744,44.14257609277082,44.14257301939531,44.14257187410876,44.1425709408858,44.14256951509083,44.14256536577343,44.14256401704006,44.142563859833,44.14256317243093,44.14256325332768,44.14256562004655,44.14256574333089,44.14256833661598,44.14256877891255,44.14257068094384,44.14257078495663,44.1425699095238,44.14257090823686,44.14256912178488,44.14256851142446,44.14256692457003,44.14256508417945,44.14256303648971,44.14256310968039,44.14256451235403,44.14256500015814,44.14256622271986,44.14256405518791,44.14256268039811,44.14255943733404,44.14255896109679,44.14255549916656,44.14255298679048,44.14255230620401,44.14255238709413,44.14255126197421,44.14255020144188,44.14254768134953,44.14254702001502,44.14254895286097,44.14254922949848,44.14255110840826,44.14255213198913,44.14255356462454,44.14255425587746,44.14255497409789,44.14255724521362,44.14255936609113,44.14256074949706,44.14256447264716,44.14256495659917,44.14256564875216,44.14256894098398,44.1425692368861,44.14257134326206,44.14257183491432,44.1425744012254,44.14257578463134,44.14257880792742,44.14258281927778,44.14259297460524,44.14259858732807,44.1426046087384,44.14260556122544,44.14260625247838,44.14260626789408,44.1426083387028,44.14260831943691,44.14260947242521,44.14261106313271,44.14261359862687,44.14261525098232,44.14261889708278,44.14262023812164,44.14262115979221,44.14262155129386,44.14262423720605]}]],[[{"lng":[-103.6263931471202,-103.6263885543299,-103.6263809700774,-103.626373614777,-103.6263705240809,-103.6263670041382,-103.6263639237121,-103.6263624682724,-103.6263589722721,-103.6263564794456,-103.6263486902039,-103.6263413725402,-103.6263375213165,-103.6263357106324,-103.6263283484651,-103.6263208373348,-103.626312081309,-103.6263036102424,-103.6263028279259,-103.6263008100809,-103.626298433591,-103.6262956026601,-103.6262932193236,-103.6262919996422,-103.6262896950266,-103.6262898284613,-103.6262881114234,-103.6262882962113,-103.6262877086135,-103.6262864867799,-103.626285299161,-103.6262780704575,-103.6262781012696,-103.6262769124012,-103.6262755843018,-103.6262769400904,-103.6262792552947,-103.6262797302982,-103.6262803452632,-103.6262818849993,-103.6262819739699,-103.6262830057586,-103.6262849144091,-103.6262849725885,-103.6262866454594,-103.6262909797544,-103.6262924442133,-103.6262955451756,-103.6262972180461,-103.626301561361,-103.6263054685821,-103.6263144693719,-103.6263167640536,-103.6263202681239,-103.6263317412165,-103.6263360537403,-103.6263401419852,-103.6263404754386,-103.6263416472121,-103.6263428587748,-103.6263498121829,-103.6263501866966,-103.6263550868196,-103.6263581330071,-103.6263661203984,-103.6263673593274,-103.6263708428785,-103.6263742636016,-103.6263767016714,-103.6263781365896,-103.6263817109728,-103.6263818577858,-103.6263824693484,-103.6263830227148,-103.6263854608061,-103.626385850243,-103.626387266795,-103.6263874478412,-103.626388472783,-103.6263890591327,-103.626390278793,-103.6263908732184,-103.6263937200369,-103.6263981429911,-103.6263971690739,-103.6263978145243,-103.6263996376516,-103.6263995965932,-103.6264006100157,-103.6264019730881,-103.6264029967805,-103.6264031675363,-103.6264059882411,-103.6264087644438,-103.6264131724586,-103.6264138897782,-103.6264145034938,-103.6264138247576,-103.6264125845777,-103.6264111030034,-103.6264100780608,-103.6264092353939,-103.6264075852367,-103.6264071615667,-103.6264051060847,-103.6264050889893,-103.6263993085784,-103.6263976310348,-103.6263976139185,-103.6263963681207,-103.6263950800353,-103.6263943568371,-103.6263937418713,-103.6263928740119,-103.6263931471202],"lat":[44.14291269085533,44.14291632513676,44.14291638158416,44.14291540721678,44.14291610831156,44.14291768925901,44.14291794751956,44.14291881503154,44.1429193635994,44.14292080924589,44.142920863226,44.14291826603182,44.14291644878723,44.14291495138711,44.14291427313957,44.14291123065991,44.14290876471872,44.14290290709638,44.1429012744107,44.14289992217115,44.142896351731,44.14289469350757,44.14289141829001,44.14289096156441,44.14288429218598,44.14287853894398,44.14287305785208,44.14286509043994,44.14286390305344,44.14286359305411,44.14286180784141,44.14285537544862,44.14285404694655,44.14285226171874,44.14284704472254,44.14284222708267,44.14283959898191,44.14283680019707,44.14283680759296,44.14283225158357,44.14282841548884,44.14282813259259,44.14282535194977,44.14282284345704,44.14282138795089,44.14282011210468,44.14281880174454,44.14281765781777,44.14281620231149,44.14281448361579,44.14281393999513,44.14281463885089,44.1428128955173,44.14281205264308,44.14281219061968,44.14281179952468,44.14281229164745,44.14281554221223,44.14281806459609,44.14281881742885,44.1428194916601,44.14282097178879,44.14282176807927,44.14282298593236,44.14282322873922,44.14282280158104,44.14282284347325,44.14282554055447,44.14282645578898,44.14282647304481,44.14283138586108,44.14283389681902,44.14283405092563,44.14283671442516,44.14283762875942,44.14283851935772,44.14283927465514,44.14284030949961,44.14284032182512,44.1428415091961,44.14284196682071,44.14284285988408,44.14284377913334,44.14284752183378,44.14285415088383,44.14286168532266,44.14286259226137,44.14286436269748,44.1428648178419,44.14286793313561,44.14286794544596,44.1428694240245,44.1428715232792,44.14287554148138,44.14287987461162,44.14288431011209,44.14288431749222,44.14288711382763,44.14288754097128,44.14288958938969,44.14288957706439,44.1428906004986,44.14289102271206,44.1428916082273,44.14289187881432,44.14289261597101,44.1428944650414,44.14289606814549,44.14289680620222,44.14289752948346,44.14290002228572,44.14290473576835,44.14290472837308,44.14290678417148,44.14291269085533]}]],[[{"lng":[-103.628325512677,-103.6283244376512,-103.6283158246898,-103.6283092367538,-103.628292895695,-103.6282867970998,-103.6282837530762,-103.6282797436888,-103.6282684544964,-103.62825712092,-103.6282479067639,-103.6282420369539,-103.6282391776836,-103.628234557288,-103.6282181355004,-103.6282031955648,-103.6282064969775,-103.6281955176089,-103.6281855728307,-103.6281795527191,-103.6281749606286,-103.6281633214463,-103.6281583442647,-103.6281562341378,-103.6281569139194,-103.6281547019729,-103.628151225958,-103.6281487915805,-103.6281428632614,-103.628141421739,-103.6281376864341,-103.628138952052,-103.6281373866783,-103.6281358867638,-103.6281337263193,-103.6281330596348,-103.6281333182647,-103.6281354362064,-103.6281395469229,-103.6281451158584,-103.628147792162,-103.6281503433211,-103.6281569761063,-103.6281648987866,-103.6281708508874,-103.6281908346963,-103.6281933107865,-103.6281937440081,-103.6281967367467,-103.6281997711985,-103.6282057733526,-103.6282143433404,-103.6282178206234,-103.6282187538173,-103.6282281581688,-103.6282506835505,-103.6282611045238,-103.6282731255311,-103.628274576646,-103.6282790455147,-103.6282944507786,-103.6282979530779,-103.6282984196769,-103.6283063061766,-103.6283128083047,-103.6283127832914,-103.6283182103955,-103.6283222126669,-103.6283271648342,-103.6283341669347,-103.6283411202385,-103.6283484984347,-103.6283509995423,-103.6283559337867,-103.6283604527056,-103.6283609776896,-103.6283647004547,-103.6283679810411,-103.6283679476914,-103.6283699321318,-103.6283698487366,-103.6283723331489,-103.6283744091427,-103.6283728933065,-103.628374483919,-103.6283814359781,-103.628381410966,-103.6283869047971,-103.6283858131011,-103.6283833036548,-103.6283807024557,-103.6283746335736,-103.6283719757907,-103.628374883298,-103.6283763832138,-103.6283787341879,-103.6283798943367,-103.6283785173114,-103.6283704806376,-103.628368439041,-103.6283648085457,-103.6283552966196,-103.6283534740867,-103.6283534323781,-103.6283503812492,-103.6283496810711,-103.6283436038454,-103.6283371254697,-103.6283315732285,-103.6283310399055,-103.628325512677],"lat":[44.14286883653941,44.14287206658331,44.14287664661921,44.14287746666624,44.14287576025597,44.14287701918909,44.14287878327404,44.14287909615383,44.1428783647556,44.14287543042175,44.14287087392932,44.14286531228603,44.14285915306957,44.14285808129392,44.14286034087711,44.14285727952943,44.14284434826462,44.14284313602161,44.14284049388979,44.1428411427457,44.14283947971892,44.14282905818003,44.14282791711933,44.14282548585683,44.14281556207069,44.14281238066449,44.14281125763258,44.1428083464703,44.14280503231672,44.14280249320676,44.14279091884392,44.14278390533843,44.14278226856817,44.14278225055384,44.14278052006037,44.14277465030795,44.1427634840412,44.14275846498389,44.14275383088867,44.14275101494722,44.14274348079869,44.14274134976955,44.1427391957127,44.14273936291264,44.14274159606612,44.14274291735343,44.14274402747498,44.1427469155033,44.14274731157339,44.14274590660354,44.14274597868739,44.14274319968442,44.14274432182933,44.14274721586199,44.14275165214124,44.1427512024001,44.14275493062929,44.14275435383426,44.14275653292966,44.1427580280091,44.14276253634767,44.14276257840625,44.14276402542228,44.14276916462396,44.14276924270627,44.14277032279019,44.14277363091607,44.1427736789779,44.14277590011538,44.14277598420043,44.14277822936798,44.14278372259093,44.14278375262517,44.14278669380239,44.14278602781074,44.14278495373058,44.14278402008498,44.14278503782858,44.1427864779405,44.14278722292659,44.14279082410648,44.14279157509629,44.14279417127415,44.14280364249926,44.14280673350576,44.14280897865589,44.14281005873985,44.14281048573861,44.14281443583918,44.14281476583365,44.14281905793599,44.14282186698514,44.1428288157832,44.14283267922866,44.14283269723988,44.14283921047737,44.14284565465302,44.14284857570514,44.14284992061215,44.14285169763703,44.14285191131199,44.14284899753062,44.14284971639287,44.1428515174328,44.14285364246263,44.14286228163047,44.14286545070585,44.14286429252623,44.14286638752095,44.14286782162888,44.14286883653941]}]],[[{"lng":[-103.6281681535268,-103.6281671273011,-103.6281576157906,-103.6281551313701,-103.62815173046,-103.6281482531895,-103.6281397666561,-103.6281302384482,-103.6281232851791,-103.6281157818868,-103.6281123309047,-103.6281038777285,-103.6281014517239,-103.6280994505962,-103.6280979911539,-103.6280895213011,-103.6280774919975,-103.6280710136839,-103.6280634866045,-103.6280630354414,-103.6280605343446,-103.6280600594137,-103.6280531073992,-103.6280351164318,-103.6280326487136,-103.6280241705245,-103.6280241955429,-103.6280207278865,-103.6280172256016,-103.6280127663465,-103.6280108236171,-103.6280048882444,-103.6279969016662,-103.6279934411009,-103.6279910151035,-103.627983036866,-103.6279741755097,-103.6279711911455,-103.6279707245355,-103.6279680969011,-103.6279548181661,-103.6279528671001,-103.6279464234032,-103.6279395619292,-103.6279355609276,-103.6279326086749,-103.6279323840512,-103.6279264820683,-103.6279255321918,-103.6279261322828,-103.6279241561989,-103.6279223433232,-103.627923323125,-103.6279273825461,-103.6279274659881,-103.6279289671439,-103.6279309255716,-103.6279316267594,-103.6279309092574,-103.6279329688028,-103.6279327107981,-103.6279332608272,-103.6279368286168,-103.6279384632734,-103.6279465165756,-103.6279541032892,-103.6279547033773,-103.627961427994,-103.6279737442975,-103.6279836151635,-103.6279866162228,-103.627989558863,-103.6280005548246,-103.6280035225051,-103.6280034891469,-103.6280084662901,-103.6280094245083,-103.6280143933125,-103.6280238977103,-103.6280253475579,-103.6280323508645,-103.6280334092185,-103.6280444719173,-103.6280564690671,-103.6280604450251,-103.6280613711172,-103.6280692158542,-103.6280751762585,-103.628079185595,-103.6280822463206,-103.628082288016,-103.6280868306975,-103.6280993528554,-103.6281023288779,-103.6281052465071,-103.6281141829565,-103.6281141495801,-103.628117185267,-103.6281261884488,-103.6281360760125,-103.6281435446641,-103.6281499061846,-103.6281548499788,-103.6281576591685,-103.6281630528593,-103.6281629610931,-103.6281742651656,-103.6281771577652,-103.6281789420061,-103.6281849107584,-103.6281918139705,-103.6281937316705,-103.628194825188,-103.6281929134456,-103.6281903289239,-103.6281886121125,-103.6281855442976,-103.6281836928522,-103.6281857606337,-103.6281877117094,-103.6281880948778,-103.6281925470509,-103.6281938944193,-103.6281923635219,-103.6281877945679,-103.6281802745772,-103.6281681535268],"lat":[44.14255565113784,44.14255672009755,44.14255696599225,44.14255621589797,44.14255185081442,44.14255072866763,44.14254990558632,44.14255087243475,44.14254862725472,44.14254853713724,44.14254633402043,44.14254407082463,44.14254079873336,44.14254077469871,44.14253895562909,44.14253741248815,44.14253834929238,44.14253719019806,44.14253818107609,44.14253601398823,44.14253598394782,44.1425348969588,44.14253265178957,44.14253171544289,44.14253024439,44.14252906127222,44.14252798118838,44.14252649812475,44.14252645605786,44.1425246009555,44.1425220558236,44.14251910170611,44.14251828551966,44.14251644241226,44.14251317031872,44.14251199410337,44.14250576278521,44.14250500578144,44.14250355966421,44.14250174549236,44.14249904436232,44.14249685925743,44.1424942600594,44.14248805276091,44.14248800470094,44.14248580756944,44.14247391524153,44.14246952010826,44.14246734702925,44.14246303089958,44.142461925878,44.14245849220362,44.14245471060777,44.14245223667245,44.14244863459297,44.14244865262496,44.14244711820245,44.14244183943719,44.14242958106064,44.14242708310251,44.14241663178633,44.14241447672426,44.14241163675499,44.1424058916396,44.14240382670634,44.14240031475516,44.14239599862526,44.14239351514228,44.14239478592723,44.14240066924324,44.14240070529066,44.14240326333379,44.14240375553967,44.14240523259853,44.14240667271034,44.1424078137774,44.1424096268278,44.14241112792256,44.14241124208245,44.14241342116593,44.14241350528393,44.14241099529852,44.14240860637651,44.14240911060234,44.14241023964194,44.14241349371887,44.14242043307615,44.14242230620633,44.14242199423339,44.14241950829749,44.14241770815767,44.14241596117753,44.14241539041989,44.14241650744823,44.14242014557232,44.14242313482862,44.14242457584054,44.14242317088763,44.14242327901921,44.14242844226632,44.14242997337922,44.14243617466102,44.14243875583364,44.14244707612019,44.14245182526508,44.14245578737291,44.14246456981044,44.14246928891675,44.14247867727757,44.14248019037413,44.14248459661827,44.14248822273116,44.14249523057445,44.1425019040751,44.14250547611739,44.14251482333143,44.14251766931313,44.14252358914696,44.14252992166903,44.14253210677006,44.14253715586636,44.14253937100494,44.14254310957521,44.14254729522054,44.14255012227365,44.1425507531164,44.14255565113784]}]]],null,"machine piles",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":0.5,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#4A0E5F","#274983","#005589","#274983","#008D98","#00A094","#412F72","#E7E22B","#009796","#00618F","#00A094","#008D98","#373C7B","#274983","#373C7B","#B6DC3A","#00A98F","#00A094","#412F72","#2FC86F","#007796","#006C93","#008D98","#462169","#008298","#00A094"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6],"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>46.62793&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td> 76.30865&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 1&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td> 76.03950&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>15.27058&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>48.54183&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>133.64823&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 2&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>133.30759&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>14.95721&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>52.30751&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>144.94465&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 3&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>144.67638&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>16.11087&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>51.47470&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>135.03140&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 4&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>134.76650&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>14.77658&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>66.51802&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>220.58699&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 5&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>220.40300&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>20.57680&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>66.11499&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>253.30856&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 6&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>253.24089&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>21.87853&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>44.35665&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>104.63626&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 7&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>104.44545&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>14.12607&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>94.50276&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>409.00230&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 8&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>408.67902&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>34.78950&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>70.22959&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>235.87781&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td> 9&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>235.51292&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>24.32416&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>56.52928&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>155.84923&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>10&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>155.76041&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>19.71508&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>70.35132&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>250.31565&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>11&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>250.09498&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>24.65223&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>66.38881&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>223.46413&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>12&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>223.07894&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>21.78399&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>48.05618&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>124.54846&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>13&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>124.31804&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>13.95920&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>47.05633&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>129.98970&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>14&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>129.74064&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>14.69910&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>50.58201&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>125.89146&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>15&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>125.64311&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>14.52970&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>98.65619&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>378.75144&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>16&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>378.00453&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>37.95325&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>79.50590&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>269.64609&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>17&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>269.47564&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>27.58500&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>68.66064&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>249.46501&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>18&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>248.96073&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>22.39215&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>47.86496&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>109.39157&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>19&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>108.97686&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>15.88289&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>78.68516&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>323.53070&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>20&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>323.15045&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>27.83942&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>65.89388&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>192.89342&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>21&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>192.31742&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>21.01752&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>57.46797&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>173.35682&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>22&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>173.23499&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>20.05914&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>76.84989&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>226.98922&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>23&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>226.76622&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>25.95405&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>24&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>39.24485&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td> 93.68883&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>24&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td> 93.49428&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>13.32966&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>25&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>64.30679&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>208.39517&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>25&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>208.24924&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>21.87022&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>26&emsp;<\/td><\/tr><tr><td>1<\/td><th>shape_leng&emsp;<\/th><td>70.44078&emsp;<\/td><\/tr><tr><td>2<\/td><th>shape_area&emsp;<\/th><td>256.54211&emsp;<\/td><\/tr><tr><td>3<\/td><th>pile_id&emsp;<\/th><td>26&emsp;<\/td><\/tr><tr><td>4<\/td><th>image_gt_area_m2&emsp;<\/th><td>256.30239&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><tr><td>6<\/td><th>image_gt_diameter_m&emsp;<\/th><td>25.67604&emsp;<\/td><\/tr><tr><td>7<\/td><th>is_in_stand&emsp;<\/th><td>TRUE&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["76.0395028113853","133.307590693905","144.67637546359","134.766497135446","220.403002436215","253.240893630478","104.44544559365","408.679016972397","235.512922280821","155.760408743721","250.094977663786","223.078938055725","124.318040638434","129.740637042851","125.643107597949","378.004531081242","269.475644428196","248.960732380219","108.976859636023","323.150451968424","192.31742082804","173.23498580954","226.766215957134","93.4942793726223","208.249238171986","256.302394698985"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":1,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addLayersControl","args":[["Esri.WorldImagery","OpenStreetMap"],["stand boundary","machine piles"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#4B0055 , #471E67 7.20314219104372%, #185086 22.2344291763289%, #007A97 37.2657161616141%, #00A194 52.2970031468992%, #00C07B 67.3282901321844%, #90D64F 82.3595771174696%, #EFE22E 97.3908641027547%, #FDE333 "],"labels":["100","150","200","250","300","350","400"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"numeric","title":"machine piles","extra":{"p_1":0.07203142191043715,"p_n":0.9739086410275473},"layerId":null,"className":"info legend","group":"machine piles"}]},{"method":"addHomeButton","args":[-103.644866726,44.14030185899996,-103.622970405,44.14895321799997,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[44.14030185899996,44.14895321799997],"lng":[-103.644866726,-103.622970405]},"fitBounds":[44.14030185899996,-103.644866726,44.14895321799997,-103.622970405,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\"position\":\"relative\",\"bottomleft\":\"0px\",\"background-color\":\"rgba(255, 255, 255, 0.7)\",\"box-shadow\":\"0 0 2px #bbb\",\"background-clip\":\"padding-box\",\"margin\":\"0\",\"padding-left\":\"5px\",\"padding-right\":\"5px\",\"color\":\"#333\",\"font-size\":\"9px\",\"font-family\":\"\\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif\",\"text-align\":\"left\",\"z-index\":\"700\"});\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>we’ll work with the CHM in the study unit boundary plus a buffer to limit the amount of data we process</p>
<p>Given the expected massive size of these piles, we utilize a slightly coarser CHM resolution, aggregating the raster to 0.15m. This is sufficient detail for identification and quantification of large objects, and previous analysis of the training data indicated that this 0.15m resolution provided similarly high detection and form quantification accuracies as the finer 0.1m CHM.</p>
<p>first, we’ll borrow from the <code>cloud2trees</code> codebase to get a function to change the resolution of a raster exactly</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="method-validation-bhef-machine-piles.html#cb635-1" tabindex="-1"></a><span class="do">###___________________________________________###</span></span>
<span id="cb635-2"><a href="method-validation-bhef-machine-piles.html#cb635-2" tabindex="-1"></a><span class="co"># adjust the resolution of a raster to be in exactly the target resolution</span></span>
<span id="cb635-3"><a href="method-validation-bhef-machine-piles.html#cb635-3" tabindex="-1"></a><span class="do">###___________________________________________###</span></span>
<span id="cb635-4"><a href="method-validation-bhef-machine-piles.html#cb635-4" tabindex="-1"></a>adjust_raster_resolution <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb635-5"><a href="method-validation-bhef-machine-piles.html#cb635-5" tabindex="-1"></a>  raster_object</span>
<span id="cb635-6"><a href="method-validation-bhef-machine-piles.html#cb635-6" tabindex="-1"></a>  , target_resolution</span>
<span id="cb635-7"><a href="method-validation-bhef-machine-piles.html#cb635-7" tabindex="-1"></a>  , <span class="at">fun =</span> mean</span>
<span id="cb635-8"><a href="method-validation-bhef-machine-piles.html#cb635-8" tabindex="-1"></a>  , <span class="at">resample_method =</span> <span class="st">&quot;bilinear&quot;</span></span>
<span id="cb635-9"><a href="method-validation-bhef-machine-piles.html#cb635-9" tabindex="-1"></a>  , <span class="at">ofile =</span> <span class="cn">NULL</span></span>
<span id="cb635-10"><a href="method-validation-bhef-machine-piles.html#cb635-10" tabindex="-1"></a>) {</span>
<span id="cb635-11"><a href="method-validation-bhef-machine-piles.html#cb635-11" tabindex="-1"></a>  <span class="co"># check if the input is a spatraster object</span></span>
<span id="cb635-12"><a href="method-validation-bhef-machine-piles.html#cb635-12" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">inherits</span>(raster_object, <span class="st">&quot;SpatRaster&quot;</span>)) {</span>
<span id="cb635-13"><a href="method-validation-bhef-machine-piles.html#cb635-13" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Input must be a SpatRaster object.&quot;</span>)</span>
<span id="cb635-14"><a href="method-validation-bhef-machine-piles.html#cb635-14" tabindex="-1"></a>  }</span>
<span id="cb635-15"><a href="method-validation-bhef-machine-piles.html#cb635-15" tabindex="-1"></a></span>
<span id="cb635-16"><a href="method-validation-bhef-machine-piles.html#cb635-16" tabindex="-1"></a>  current_resolution <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">res</span>(raster_object)[<span class="dv">1</span>] <span class="co"># get current resolution (assuming square pixels)</span></span>
<span id="cb635-17"><a href="method-validation-bhef-machine-piles.html#cb635-17" tabindex="-1"></a>  result_raster <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb635-18"><a href="method-validation-bhef-machine-piles.html#cb635-18" tabindex="-1"></a></span>
<span id="cb635-19"><a href="method-validation-bhef-machine-piles.html#cb635-19" tabindex="-1"></a>  <span class="co"># aggregating (decreasing resolution)</span></span>
<span id="cb635-20"><a href="method-validation-bhef-machine-piles.html#cb635-20" tabindex="-1"></a>  <span class="cf">if</span> (target_resolution <span class="sc">&gt;</span> current_resolution) {</span>
<span id="cb635-21"><a href="method-validation-bhef-machine-piles.html#cb635-21" tabindex="-1"></a>    <span class="co"># calculate the aggregation factor</span></span>
<span id="cb635-22"><a href="method-validation-bhef-machine-piles.html#cb635-22" tabindex="-1"></a>    <span class="co"># we aim for an integer factor for aggregate, but then refine with resample</span></span>
<span id="cb635-23"><a href="method-validation-bhef-machine-piles.html#cb635-23" tabindex="-1"></a>    fact <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="dv">1</span>, <span class="fu">floor</span>(target_resolution <span class="sc">/</span> current_resolution))</span>
<span id="cb635-24"><a href="method-validation-bhef-machine-piles.html#cb635-24" tabindex="-1"></a></span>
<span id="cb635-25"><a href="method-validation-bhef-machine-piles.html#cb635-25" tabindex="-1"></a>    <span class="co"># aggregate the raster</span></span>
<span id="cb635-26"><a href="method-validation-bhef-machine-piles.html#cb635-26" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(ofile,<span class="st">&quot;character&quot;</span>)){</span>
<span id="cb635-27"><a href="method-validation-bhef-machine-piles.html#cb635-27" tabindex="-1"></a>      aggregated_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">aggregate</span>(raster_object, <span class="at">fact =</span> fact, <span class="at">fun =</span> fun, <span class="at">filename =</span> ofile, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb635-28"><a href="method-validation-bhef-machine-piles.html#cb635-28" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb635-29"><a href="method-validation-bhef-machine-piles.html#cb635-29" tabindex="-1"></a>      aggregated_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">aggregate</span>(raster_object, <span class="at">fact =</span> fact, <span class="at">fun =</span> fun) </span>
<span id="cb635-30"><a href="method-validation-bhef-machine-piles.html#cb635-30" tabindex="-1"></a>    }</span>
<span id="cb635-31"><a href="method-validation-bhef-machine-piles.html#cb635-31" tabindex="-1"></a>    result_raster <span class="ot">&lt;-</span> aggregated_raster  </span>
<span id="cb635-32"><a href="method-validation-bhef-machine-piles.html#cb635-32" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(target_resolution <span class="sc">&lt;</span> current_resolution) {</span>
<span id="cb635-33"><a href="method-validation-bhef-machine-piles.html#cb635-33" tabindex="-1"></a>    <span class="co"># disaggregating (increasing resolution)</span></span>
<span id="cb635-34"><a href="method-validation-bhef-machine-piles.html#cb635-34" tabindex="-1"></a></span>
<span id="cb635-35"><a href="method-validation-bhef-machine-piles.html#cb635-35" tabindex="-1"></a>    <span class="co"># calculate the disaggregation factor</span></span>
<span id="cb635-36"><a href="method-validation-bhef-machine-piles.html#cb635-36" tabindex="-1"></a>    <span class="co"># we aim for an integer factor for disaggregate, but then refine with resample</span></span>
<span id="cb635-37"><a href="method-validation-bhef-machine-piles.html#cb635-37" tabindex="-1"></a>    fact <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="dv">1</span>, <span class="fu">floor</span>(current_resolution <span class="sc">/</span> target_resolution)) <span class="co"># round down to ensure disagg factor is not too large</span></span>
<span id="cb635-38"><a href="method-validation-bhef-machine-piles.html#cb635-38" tabindex="-1"></a>    </span>
<span id="cb635-39"><a href="method-validation-bhef-machine-piles.html#cb635-39" tabindex="-1"></a>    <span class="co"># disaggregate the raster</span></span>
<span id="cb635-40"><a href="method-validation-bhef-machine-piles.html#cb635-40" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(ofile,<span class="st">&quot;character&quot;</span>)){</span>
<span id="cb635-41"><a href="method-validation-bhef-machine-piles.html#cb635-41" tabindex="-1"></a>      disaggregated_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">disagg</span>(raster_object, <span class="at">fact =</span> fact, <span class="at">filename =</span> ofile, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb635-42"><a href="method-validation-bhef-machine-piles.html#cb635-42" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb635-43"><a href="method-validation-bhef-machine-piles.html#cb635-43" tabindex="-1"></a>      disaggregated_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">disagg</span>(raster_object, <span class="at">fact =</span> fact)</span>
<span id="cb635-44"><a href="method-validation-bhef-machine-piles.html#cb635-44" tabindex="-1"></a>    }</span>
<span id="cb635-45"><a href="method-validation-bhef-machine-piles.html#cb635-45" tabindex="-1"></a>    </span>
<span id="cb635-46"><a href="method-validation-bhef-machine-piles.html#cb635-46" tabindex="-1"></a>    result_raster <span class="ot">&lt;-</span> disaggregated_raster</span>
<span id="cb635-47"><a href="method-validation-bhef-machine-piles.html#cb635-47" tabindex="-1"></a></span>
<span id="cb635-48"><a href="method-validation-bhef-machine-piles.html#cb635-48" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span>(target_resolution <span class="sc">==</span> current_resolution){</span>
<span id="cb635-49"><a href="method-validation-bhef-machine-piles.html#cb635-49" tabindex="-1"></a>    <span class="fu">return</span>(raster_object)</span>
<span id="cb635-50"><a href="method-validation-bhef-machine-piles.html#cb635-50" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb635-51"><a href="method-validation-bhef-machine-piles.html#cb635-51" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;this resolution is unresovable D: &quot;</span>)</span>
<span id="cb635-52"><a href="method-validation-bhef-machine-piles.html#cb635-52" tabindex="-1"></a>  }</span>
<span id="cb635-53"><a href="method-validation-bhef-machine-piles.html#cb635-53" tabindex="-1"></a></span>
<span id="cb635-54"><a href="method-validation-bhef-machine-piles.html#cb635-54" tabindex="-1"></a>  <span class="co"># check if the resulting resolution is exactly the target resolution</span></span>
<span id="cb635-55"><a href="method-validation-bhef-machine-piles.html#cb635-55" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">abs</span>(terra<span class="sc">::</span><span class="fu">res</span>(result_raster)[<span class="dv">1</span>] <span class="sc">-</span> target_resolution) <span class="sc">&gt;</span> <span class="fl">0.0001</span>) { <span class="co"># Using a small tolerance for comparison</span></span>
<span id="cb635-56"><a href="method-validation-bhef-machine-piles.html#cb635-56" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;the initial aggregation/disaggregation did not result in the exact target resolution. resampling to achieve the precise target resolution.&quot;</span>)</span>
<span id="cb635-57"><a href="method-validation-bhef-machine-piles.html#cb635-57" tabindex="-1"></a>    </span>
<span id="cb635-58"><a href="method-validation-bhef-machine-piles.html#cb635-58" tabindex="-1"></a>    <span class="co"># create a dummy raster with the desired resolution and extent for resampling</span></span>
<span id="cb635-59"><a href="method-validation-bhef-machine-piles.html#cb635-59" tabindex="-1"></a>    template_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(result_raster)</span>
<span id="cb635-60"><a href="method-validation-bhef-machine-piles.html#cb635-60" tabindex="-1"></a>    terra<span class="sc">::</span><span class="fu">res</span>(template_raster) <span class="ot">&lt;-</span> target_resolution</span>
<span id="cb635-61"><a href="method-validation-bhef-machine-piles.html#cb635-61" tabindex="-1"></a>    </span>
<span id="cb635-62"><a href="method-validation-bhef-machine-piles.html#cb635-62" tabindex="-1"></a>    <span class="co"># resample the result_raster to the exact target resolution</span></span>
<span id="cb635-63"><a href="method-validation-bhef-machine-piles.html#cb635-63" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">inherits</span>(ofile,<span class="st">&quot;character&quot;</span>)){</span>
<span id="cb635-64"><a href="method-validation-bhef-machine-piles.html#cb635-64" tabindex="-1"></a>      result_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(result_raster, template_raster, <span class="at">method =</span> resample_method, <span class="at">filename =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.tif&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb635-65"><a href="method-validation-bhef-machine-piles.html#cb635-65" tabindex="-1"></a>      terra<span class="sc">::</span><span class="fu">writeRaster</span>(result_raster, <span class="at">filename =</span> ofile, <span class="at">overwrite=</span>T)</span>
<span id="cb635-66"><a href="method-validation-bhef-machine-piles.html#cb635-66" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb635-67"><a href="method-validation-bhef-machine-piles.html#cb635-67" tabindex="-1"></a>      result_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">resample</span>(result_raster, template_raster, <span class="at">method =</span> resample_method)</span>
<span id="cb635-68"><a href="method-validation-bhef-machine-piles.html#cb635-68" tabindex="-1"></a>    }</span>
<span id="cb635-69"><a href="method-validation-bhef-machine-piles.html#cb635-69" tabindex="-1"></a>  }</span>
<span id="cb635-70"><a href="method-validation-bhef-machine-piles.html#cb635-70" tabindex="-1"></a></span>
<span id="cb635-71"><a href="method-validation-bhef-machine-piles.html#cb635-71" tabindex="-1"></a>  <span class="fu">return</span>(result_raster)</span>
<span id="cb635-72"><a href="method-validation-bhef-machine-piles.html#cb635-72" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="method-validation-bhef-machine-piles.html#cb636-1" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb636-2"><a href="method-validation-bhef-machine-piles.html#cb636-2" tabindex="-1"></a><span class="co"># crop/mask RGB raster</span></span>
<span id="cb636-3"><a href="method-validation-bhef-machine-piles.html#cb636-3" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb636-4"><a href="method-validation-bhef-machine-piles.html#cb636-4" tabindex="-1"></a>rgb_fnm_temp <span class="ot">&lt;-</span> <span class="st">&quot;../data/BHEF_202306/bhef_rgb_small.tif&quot;</span></span>
<span id="cb636-5"><a href="method-validation-bhef-machine-piles.html#cb636-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(rgb_fnm_temp)){</span>
<span id="cb636-6"><a href="method-validation-bhef-machine-piles.html#cb636-6" tabindex="-1"></a>  <span class="co"># Crop the raster to the rectangular extent of the polygon</span></span>
<span id="cb636-7"><a href="method-validation-bhef-machine-piles.html#cb636-7" tabindex="-1"></a>  <span class="co"># Specify a filename to ensure the result is written to disk</span></span>
<span id="cb636-8"><a href="method-validation-bhef-machine-piles.html#cb636-8" tabindex="-1"></a>  crop_rgb_rast_temp <span class="ot">&lt;-</span> bhef_rgb_rast <span class="sc">%&gt;%</span> </span>
<span id="cb636-9"><a href="method-validation-bhef-machine-piles.html#cb636-9" tabindex="-1"></a>    terra<span class="sc">::</span><span class="fu">crop</span>(</span>
<span id="cb636-10"><a href="method-validation-bhef-machine-piles.html#cb636-10" tabindex="-1"></a>      bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb636-11"><a href="method-validation-bhef-machine-piles.html#cb636-11" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-12"><a href="method-validation-bhef-machine-piles.html#cb636-12" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb636-13"><a href="method-validation-bhef-machine-piles.html#cb636-13" tabindex="-1"></a>        terra<span class="sc">::</span><span class="fu">vect</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-14"><a href="method-validation-bhef-machine-piles.html#cb636-14" tabindex="-1"></a>        terra<span class="sc">::</span><span class="fu">project</span>(terra<span class="sc">::</span><span class="fu">crs</span>(bhef_rgb_rast))</span>
<span id="cb636-15"><a href="method-validation-bhef-machine-piles.html#cb636-15" tabindex="-1"></a>      , <span class="at">filename =</span>  <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.tif&quot;</span>)</span>
<span id="cb636-16"><a href="method-validation-bhef-machine-piles.html#cb636-16" tabindex="-1"></a>      , <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb636-17"><a href="method-validation-bhef-machine-piles.html#cb636-17" tabindex="-1"></a>    ) </span>
<span id="cb636-18"><a href="method-validation-bhef-machine-piles.html#cb636-18" tabindex="-1"></a>  <span class="co"># Mask the cropped raster to the precise shape of the polygon</span></span>
<span id="cb636-19"><a href="method-validation-bhef-machine-piles.html#cb636-19" tabindex="-1"></a>  <span class="co"># This function will also be processed on disk due to the file size</span></span>
<span id="cb636-20"><a href="method-validation-bhef-machine-piles.html#cb636-20" tabindex="-1"></a>  bhef_rgb_rast <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(</span>
<span id="cb636-21"><a href="method-validation-bhef-machine-piles.html#cb636-21" tabindex="-1"></a>    crop_rgb_rast_temp</span>
<span id="cb636-22"><a href="method-validation-bhef-machine-piles.html#cb636-22" tabindex="-1"></a>    , bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb636-23"><a href="method-validation-bhef-machine-piles.html#cb636-23" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-24"><a href="method-validation-bhef-machine-piles.html#cb636-24" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb636-25"><a href="method-validation-bhef-machine-piles.html#cb636-25" tabindex="-1"></a>      terra<span class="sc">::</span><span class="fu">vect</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-26"><a href="method-validation-bhef-machine-piles.html#cb636-26" tabindex="-1"></a>      terra<span class="sc">::</span><span class="fu">project</span>(terra<span class="sc">::</span><span class="fu">crs</span>(bhef_rgb_rast))</span>
<span id="cb636-27"><a href="method-validation-bhef-machine-piles.html#cb636-27" tabindex="-1"></a>    , <span class="at">filename =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.tif&quot;</span>)</span>
<span id="cb636-28"><a href="method-validation-bhef-machine-piles.html#cb636-28" tabindex="-1"></a>    , <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb636-29"><a href="method-validation-bhef-machine-piles.html#cb636-29" tabindex="-1"></a>  )</span>
<span id="cb636-30"><a href="method-validation-bhef-machine-piles.html#cb636-30" tabindex="-1"></a>  </span>
<span id="cb636-31"><a href="method-validation-bhef-machine-piles.html#cb636-31" tabindex="-1"></a>  <span class="do">## apply the change_res_fn for our analysis we don&#39;t need such finery</span></span>
<span id="cb636-32"><a href="method-validation-bhef-machine-piles.html#cb636-32" tabindex="-1"></a>  <span class="co"># this takes too long...</span></span>
<span id="cb636-33"><a href="method-validation-bhef-machine-piles.html#cb636-33" tabindex="-1"></a>  bhef_rgb_rast <span class="ot">&lt;-</span> <span class="fu">change_res_fn</span>(bhef_rgb_rast, <span class="at">my_res=</span><span class="fl">0.08</span>, <span class="at">ofile =</span> rgb_fnm_temp)</span>
<span id="cb636-34"><a href="method-validation-bhef-machine-piles.html#cb636-34" tabindex="-1"></a>  </span>
<span id="cb636-35"><a href="method-validation-bhef-machine-piles.html#cb636-35" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb636-36"><a href="method-validation-bhef-machine-piles.html#cb636-36" tabindex="-1"></a>  bhef_rgb_rast <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(rgb_fnm_temp)</span>
<span id="cb636-37"><a href="method-validation-bhef-machine-piles.html#cb636-37" tabindex="-1"></a>}</span>
<span id="cb636-38"><a href="method-validation-bhef-machine-piles.html#cb636-38" tabindex="-1"></a><span class="co"># terra::res(bhef_rgb_rast)</span></span>
<span id="cb636-39"><a href="method-validation-bhef-machine-piles.html#cb636-39" tabindex="-1"></a><span class="co"># terra::plotRGB(bhef_rgb_rast, stretch=&quot;lin&quot;)</span></span>
<span id="cb636-40"><a href="method-validation-bhef-machine-piles.html#cb636-40" tabindex="-1"></a><span class="co"># terra::plot(</span></span>
<span id="cb636-41"><a href="method-validation-bhef-machine-piles.html#cb636-41" tabindex="-1"></a><span class="co">#   bhef_stand_boundary %&gt;% </span></span>
<span id="cb636-42"><a href="method-validation-bhef-machine-piles.html#cb636-42" tabindex="-1"></a><span class="co">#     terra::vect() %&gt;% </span></span>
<span id="cb636-43"><a href="method-validation-bhef-machine-piles.html#cb636-43" tabindex="-1"></a><span class="co">#     terra::project(terra::crs(bhef_rgb_rast))</span></span>
<span id="cb636-44"><a href="method-validation-bhef-machine-piles.html#cb636-44" tabindex="-1"></a><span class="co">#   , add = T, border = &quot;black&quot;, col = NA, lwd = 1.2</span></span>
<span id="cb636-45"><a href="method-validation-bhef-machine-piles.html#cb636-45" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb636-46"><a href="method-validation-bhef-machine-piles.html#cb636-46" tabindex="-1"></a><span class="co"># terra::plot(</span></span>
<span id="cb636-47"><a href="method-validation-bhef-machine-piles.html#cb636-47" tabindex="-1"></a><span class="co">#   bhef_slash_piles_polys %&gt;% </span></span>
<span id="cb636-48"><a href="method-validation-bhef-machine-piles.html#cb636-48" tabindex="-1"></a><span class="co">#     terra::vect() %&gt;% </span></span>
<span id="cb636-49"><a href="method-validation-bhef-machine-piles.html#cb636-49" tabindex="-1"></a><span class="co">#     terra::project(terra::crs(bhef_rgb_rast))</span></span>
<span id="cb636-50"><a href="method-validation-bhef-machine-piles.html#cb636-50" tabindex="-1"></a><span class="co">#   , add = T, border = &quot;blue&quot;, col = NA, lwd = 1.2</span></span>
<span id="cb636-51"><a href="method-validation-bhef-machine-piles.html#cb636-51" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb636-52"><a href="method-validation-bhef-machine-piles.html#cb636-52" tabindex="-1"></a><span class="co"># terra::inMemory(bhef_rgb_rast)</span></span>
<span id="cb636-53"><a href="method-validation-bhef-machine-piles.html#cb636-53" tabindex="-1"></a></span>
<span id="cb636-54"><a href="method-validation-bhef-machine-piles.html#cb636-54" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb636-55"><a href="method-validation-bhef-machine-piles.html#cb636-55" tabindex="-1"></a><span class="co"># crop/mask CHM raster</span></span>
<span id="cb636-56"><a href="method-validation-bhef-machine-piles.html#cb636-56" tabindex="-1"></a><span class="do">###############################################################</span></span>
<span id="cb636-57"><a href="method-validation-bhef-machine-piles.html#cb636-57" tabindex="-1"></a>chm_fnm_temp <span class="ot">&lt;-</span> <span class="st">&quot;../data/BHEF_202306/bhef_chm_small.tif&quot;</span></span>
<span id="cb636-58"><a href="method-validation-bhef-machine-piles.html#cb636-58" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(chm_fnm_temp)){</span>
<span id="cb636-59"><a href="method-validation-bhef-machine-piles.html#cb636-59" tabindex="-1"></a>  <span class="co"># Crop the raster to the rectangular extent of the polygon</span></span>
<span id="cb636-60"><a href="method-validation-bhef-machine-piles.html#cb636-60" tabindex="-1"></a>  <span class="co"># Specify a filename to ensure the result is written to disk</span></span>
<span id="cb636-61"><a href="method-validation-bhef-machine-piles.html#cb636-61" tabindex="-1"></a>  crop_chm_rast_temp <span class="ot">&lt;-</span> cloud2raster_ans<span class="sc">$</span>chm_rast <span class="sc">%&gt;%</span> </span>
<span id="cb636-62"><a href="method-validation-bhef-machine-piles.html#cb636-62" tabindex="-1"></a>    terra<span class="sc">::</span><span class="fu">crop</span>(</span>
<span id="cb636-63"><a href="method-validation-bhef-machine-piles.html#cb636-63" tabindex="-1"></a>      bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb636-64"><a href="method-validation-bhef-machine-piles.html#cb636-64" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-65"><a href="method-validation-bhef-machine-piles.html#cb636-65" tabindex="-1"></a>        sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb636-66"><a href="method-validation-bhef-machine-piles.html#cb636-66" tabindex="-1"></a>        terra<span class="sc">::</span><span class="fu">vect</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-67"><a href="method-validation-bhef-machine-piles.html#cb636-67" tabindex="-1"></a>        terra<span class="sc">::</span><span class="fu">project</span>(terra<span class="sc">::</span><span class="fu">crs</span>(cloud2raster_ans<span class="sc">$</span>chm_rast))</span>
<span id="cb636-68"><a href="method-validation-bhef-machine-piles.html#cb636-68" tabindex="-1"></a>      , <span class="at">filename =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.tif&quot;</span>)</span>
<span id="cb636-69"><a href="method-validation-bhef-machine-piles.html#cb636-69" tabindex="-1"></a>      , <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb636-70"><a href="method-validation-bhef-machine-piles.html#cb636-70" tabindex="-1"></a>    ) </span>
<span id="cb636-71"><a href="method-validation-bhef-machine-piles.html#cb636-71" tabindex="-1"></a>  <span class="co"># Mask the cropped raster to the precise shape of the polygon</span></span>
<span id="cb636-72"><a href="method-validation-bhef-machine-piles.html#cb636-72" tabindex="-1"></a>  <span class="co"># This function will also be processed on disk due to the file size</span></span>
<span id="cb636-73"><a href="method-validation-bhef-machine-piles.html#cb636-73" tabindex="-1"></a>  chm_rast_stand <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(</span>
<span id="cb636-74"><a href="method-validation-bhef-machine-piles.html#cb636-74" tabindex="-1"></a>    crop_chm_rast_temp</span>
<span id="cb636-75"><a href="method-validation-bhef-machine-piles.html#cb636-75" tabindex="-1"></a>    , bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb636-76"><a href="method-validation-bhef-machine-piles.html#cb636-76" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-77"><a href="method-validation-bhef-machine-piles.html#cb636-77" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb636-78"><a href="method-validation-bhef-machine-piles.html#cb636-78" tabindex="-1"></a>      terra<span class="sc">::</span><span class="fu">vect</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb636-79"><a href="method-validation-bhef-machine-piles.html#cb636-79" tabindex="-1"></a>      terra<span class="sc">::</span><span class="fu">project</span>(terra<span class="sc">::</span><span class="fu">crs</span>(cloud2raster_ans<span class="sc">$</span>chm_rast))</span>
<span id="cb636-80"><a href="method-validation-bhef-machine-piles.html#cb636-80" tabindex="-1"></a>    , <span class="at">filename =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.tif&quot;</span>)</span>
<span id="cb636-81"><a href="method-validation-bhef-machine-piles.html#cb636-81" tabindex="-1"></a>    , <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb636-82"><a href="method-validation-bhef-machine-piles.html#cb636-82" tabindex="-1"></a>  )</span>
<span id="cb636-83"><a href="method-validation-bhef-machine-piles.html#cb636-83" tabindex="-1"></a>  </span>
<span id="cb636-84"><a href="method-validation-bhef-machine-piles.html#cb636-84" tabindex="-1"></a>  <span class="co"># aggregate</span></span>
<span id="cb636-85"><a href="method-validation-bhef-machine-piles.html#cb636-85" tabindex="-1"></a>  chm_rast_stand <span class="ot">&lt;-</span> <span class="fu">adjust_raster_resolution</span>(chm_rast_stand, <span class="at">target_resolution =</span> <span class="fl">0.15</span>, <span class="at">ofile =</span> chm_fnm_temp)</span>
<span id="cb636-86"><a href="method-validation-bhef-machine-piles.html#cb636-86" tabindex="-1"></a>  </span>
<span id="cb636-87"><a href="method-validation-bhef-machine-piles.html#cb636-87" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb636-88"><a href="method-validation-bhef-machine-piles.html#cb636-88" tabindex="-1"></a>  chm_rast_stand <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(chm_fnm_temp)</span>
<span id="cb636-89"><a href="method-validation-bhef-machine-piles.html#cb636-89" tabindex="-1"></a>}</span>
<span id="cb636-90"><a href="method-validation-bhef-machine-piles.html#cb636-90" tabindex="-1"></a><span class="co"># put raster in memory</span></span>
<span id="cb636-91"><a href="method-validation-bhef-machine-piles.html#cb636-91" tabindex="-1"></a><span class="co"># chm_rast_stand &lt;- chm_rast_stand*1</span></span>
<span id="cb636-92"><a href="method-validation-bhef-machine-piles.html#cb636-92" tabindex="-1"></a><span class="co"># terra::inMemory(chm_rast_stand)</span></span>
<span id="cb636-93"><a href="method-validation-bhef-machine-piles.html#cb636-93" tabindex="-1"></a><span class="co"># # huh?</span></span>
<span id="cb636-94"><a href="method-validation-bhef-machine-piles.html#cb636-94" tabindex="-1"></a><span class="co"># chm_rast_stand %&gt;%</span></span>
<span id="cb636-95"><a href="method-validation-bhef-machine-piles.html#cb636-95" tabindex="-1"></a><span class="co">#   terra::aggregate(fact = 2, na.rm=T, cores = lasR::half_cores()) %&gt;%</span></span>
<span id="cb636-96"><a href="method-validation-bhef-machine-piles.html#cb636-96" tabindex="-1"></a><span class="co">#   terra::plot(col = viridis::plasma(100), axes = F)</span></span>
<span id="cb636-97"><a href="method-validation-bhef-machine-piles.html#cb636-97" tabindex="-1"></a><span class="co">#   terra::plot(</span></span>
<span id="cb636-98"><a href="method-validation-bhef-machine-piles.html#cb636-98" tabindex="-1"></a><span class="co">#     bhef_stand_boundary %&gt;%</span></span>
<span id="cb636-99"><a href="method-validation-bhef-machine-piles.html#cb636-99" tabindex="-1"></a><span class="co">#       terra::vect() %&gt;%</span></span>
<span id="cb636-100"><a href="method-validation-bhef-machine-piles.html#cb636-100" tabindex="-1"></a><span class="co">#       terra::project(terra::crs(cloud2raster_ans$chm_rast))</span></span>
<span id="cb636-101"><a href="method-validation-bhef-machine-piles.html#cb636-101" tabindex="-1"></a><span class="co">#     , add = T, border = &quot;black&quot;, col = NA, lwd = 1.2</span></span>
<span id="cb636-102"><a href="method-validation-bhef-machine-piles.html#cb636-102" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb636-103"><a href="method-validation-bhef-machine-piles.html#cb636-103" tabindex="-1"></a><span class="co">#   terra::plot(</span></span>
<span id="cb636-104"><a href="method-validation-bhef-machine-piles.html#cb636-104" tabindex="-1"></a><span class="co">#     bhef_slash_piles_polys %&gt;%</span></span>
<span id="cb636-105"><a href="method-validation-bhef-machine-piles.html#cb636-105" tabindex="-1"></a><span class="co">#       terra::vect() %&gt;%</span></span>
<span id="cb636-106"><a href="method-validation-bhef-machine-piles.html#cb636-106" tabindex="-1"></a><span class="co">#       terra::project(terra::crs(cloud2raster_ans$chm_rast))</span></span>
<span id="cb636-107"><a href="method-validation-bhef-machine-piles.html#cb636-107" tabindex="-1"></a><span class="co">#     , add = T, border = &quot;blue&quot;, col = NA, lwd = 1.2</span></span>
<span id="cb636-108"><a href="method-validation-bhef-machine-piles.html#cb636-108" tabindex="-1"></a><span class="co">#   )</span></span></code></pre></div>
</div>
</div>
<div id="bhef_detect_fusion" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Pile Detection: Data Fusion<a href="method-validation-bhef-machine-piles.html#bhef_detect_fusion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>since we have both structural and spectral data, we’ll start by using the data fusion approach and do a full walk-through of our detection results</p>
<div id="structural-candidate-segments-1" class="section level3 hasAnchor" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Structural Candidate Segments<a href="method-validation-bhef-machine-piles.html#structural-candidate-segments-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>we’ll start by detecting candidate slash piles based on the structural CHM data alone with our <code>slash_pile_detect_watershed()</code> function we defined in <a href="raster_watershed.html#slash_pile_detect_watershed">this earlier section</a>.</p>
<p>the treatment prescription for the unit of interest called for…</p>
<p><em>insert prescription description</em></p>
<p>To apply the detection methodology to the massive machine pile site, we first set the four primary structural parameters (<code>min_ht_m</code>, <code>max_ht_m</code>, <code>min_area_m2</code>, and <code>max_area_m2</code>) based on expectations derived from the specific treatment prescription and its implementation on the ground. These parameters, along with the two shape filters, are used to define the expected pile geometric form.</p>
<p>Onsite observations indicated that these piles are uniformly massive, leading us to rely on strict size and scale filters to exclude smaller non-pile objects like shrubs and boulders. To establish these thresholds, we utilized familiar objects as anchors for contextualizing scale: a standard US parking spot is approximately 16.7 square meters, with maneuvering space increasing the footprint up to 26.7 square meters; common human heights range from approximately 1.61 m (average adult female) to 1.75 m (average adult male).</p>
<p>The geometric filters are critical for distinguishing man-made piles from naturally irregular canopy clumps, especially given the observed variability in pile perimeter (from circular to rectangular). Because we do not expect machine piles to adhere to a circular shape, we disregard the circularity check entirely by setting the <code>circle_fit_iou_pct</code> to zero (‘0’) and instead rely on the <code>convexity_pct</code> filter to identify regular-shaped segments that would be consistent with a man-made objects. The <code>convexity_pct</code> filter ensures the smoothness of the segment’s boundary by removing objects that are too irregularly shaped with many inward angles and also ensures that the candidate segment does not have internal holes (i.e., is not shaped like a doughnut), which would typically indicate that the object’s top has been removed by the CHM height thresholding (or “slice”).</p>
<p>The specific structural and geometric settings used are:</p>
<ul>
<li>Height and Area Filters (Scale-based):
<ul>
<li><strong><code>max_ht_m</code></strong> = 4.0 (more than twice the height of an average adult male)</li>
<li><strong><code>min_ht_m</code></strong> = 1.5 (almost the average adult female height)</li>
<li><strong><code>min_area_m2</code></strong> = 54 (two large parking spaces)</li>
<li><strong><code>max_area_m2</code></strong> = 432 (16 large parking spaces)</li>
</ul></li>
<li>Geometric Filters (Shape-based):
<ul>
<li><strong><code>circle_fit_iou_pct</code></strong> = 0 (disregards circularity, round piles are not expected)</li>
<li><strong><code>convexity_pct</code></strong> = 0.14 (filters out highly irregular segments, set to the training-optimization value for the given CHM resolution)</li>
</ul></li>
</ul>
<p>As noted above, we will also use a slightly coarser CHM resolution than we used for the training data and Pinyon-Juniper validation site. Given the expected massive size of these piles, we utilize a slightly coarser CHM resolution, aggregating the raster to 0.15m. This is sufficient detail for identification and quantification of large objects, and our previous analysis of the training data indicated that this 0.15m resolution provided similarly high detection and form quantification accuracies as the finer 0.1m CHM.</p>
<p>Finally, recognizing the prolific tree regeneration in this ecosystem, which can result in large, dense, and continuous tree clumps, we will rely on spectral filtering to help discriminate between genuine large piles and aggregated vegetation that might otherwise appear as a singular object in the CHM. To achieve this, the <code>spectral_weight</code> parameter will be set to its maximum setting of ‘5’ (which applies all of the five spectral thresholds) based on the expectation of incorrect detection of clumped small trees using the structural data.</p>
<p><code>slash_pile_detect_watershed()</code> that CHM</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="method-validation-bhef-machine-piles.html#cb637-1" tabindex="-1"></a>outdir_temp <span class="ot">&lt;-</span> <span class="st">&quot;../data/BHEF_202306/&quot;</span></span>
<span id="cb637-2"><a href="method-validation-bhef-machine-piles.html#cb637-2" tabindex="-1"></a>fnm_temp <span class="ot">&lt;-</span> <span class="fu">file.path</span>(outdir_temp,<span class="st">&quot;bhef_structural_candidate_segments.gpkg&quot;</span>)</span>
<span id="cb637-3"><a href="method-validation-bhef-machine-piles.html#cb637-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(fnm_temp)){</span>
<span id="cb637-4"><a href="method-validation-bhef-machine-piles.html#cb637-4" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">22</span>)</span>
<span id="cb637-5"><a href="method-validation-bhef-machine-piles.html#cb637-5" tabindex="-1"></a>  <span class="co"># we&#39;ll process each stand separately and bring the segments together</span></span>
<span id="cb637-6"><a href="method-validation-bhef-machine-piles.html#cb637-6" tabindex="-1"></a>    slash_pile_detect_watershed_ans <span class="ot">&lt;-</span> </span>
<span id="cb637-7"><a href="method-validation-bhef-machine-piles.html#cb637-7" tabindex="-1"></a>      <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(bhef_stand_boundary) <span class="sc">%&gt;%</span> </span>
<span id="cb637-8"><a href="method-validation-bhef-machine-piles.html#cb637-8" tabindex="-1"></a>      <span class="fu">rev</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb637-9"><a href="method-validation-bhef-machine-piles.html#cb637-9" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb637-10"><a href="method-validation-bhef-machine-piles.html#cb637-10" tabindex="-1"></a>        <span class="cf">function</span>(x){</span>
<span id="cb637-11"><a href="method-validation-bhef-machine-piles.html#cb637-11" tabindex="-1"></a>          <span class="co"># crop to boundary</span></span>
<span id="cb637-12"><a href="method-validation-bhef-machine-piles.html#cb637-12" tabindex="-1"></a>          chm_temp <span class="ot">&lt;-</span> chm_rast_stand <span class="sc">%&gt;%</span> </span>
<span id="cb637-13"><a href="method-validation-bhef-machine-piles.html#cb637-13" tabindex="-1"></a>            terra<span class="sc">::</span><span class="fu">crop</span>(</span>
<span id="cb637-14"><a href="method-validation-bhef-machine-piles.html#cb637-14" tabindex="-1"></a>              bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb637-15"><a href="method-validation-bhef-machine-piles.html#cb637-15" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">slice</span>(x) <span class="sc">%&gt;%</span> </span>
<span id="cb637-16"><a href="method-validation-bhef-machine-piles.html#cb637-16" tabindex="-1"></a>                sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb637-17"><a href="method-validation-bhef-machine-piles.html#cb637-17" tabindex="-1"></a>                sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(chm_rast_stand)) <span class="sc">%&gt;%</span> </span>
<span id="cb637-18"><a href="method-validation-bhef-machine-piles.html#cb637-18" tabindex="-1"></a>                terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb637-19"><a href="method-validation-bhef-machine-piles.html#cb637-19" tabindex="-1"></a>            ) <span class="sc">%&gt;%</span> </span>
<span id="cb637-20"><a href="method-validation-bhef-machine-piles.html#cb637-20" tabindex="-1"></a>            terra<span class="sc">::</span><span class="fu">mask</span>(</span>
<span id="cb637-21"><a href="method-validation-bhef-machine-piles.html#cb637-21" tabindex="-1"></a>              bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb637-22"><a href="method-validation-bhef-machine-piles.html#cb637-22" tabindex="-1"></a>                dplyr<span class="sc">::</span><span class="fu">slice</span>(x) <span class="sc">%&gt;%</span> </span>
<span id="cb637-23"><a href="method-validation-bhef-machine-piles.html#cb637-23" tabindex="-1"></a>                sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb637-24"><a href="method-validation-bhef-machine-piles.html#cb637-24" tabindex="-1"></a>                sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(chm_rast_stand)) <span class="sc">%&gt;%</span> </span>
<span id="cb637-25"><a href="method-validation-bhef-machine-piles.html#cb637-25" tabindex="-1"></a>                terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb637-26"><a href="method-validation-bhef-machine-piles.html#cb637-26" tabindex="-1"></a>            )</span>
<span id="cb637-27"><a href="method-validation-bhef-machine-piles.html#cb637-27" tabindex="-1"></a>          <span class="co"># get in my memory</span></span>
<span id="cb637-28"><a href="method-validation-bhef-machine-piles.html#cb637-28" tabindex="-1"></a>          chm_temp <span class="ot">&lt;-</span> chm_temp<span class="sc">*</span><span class="dv">1</span></span>
<span id="cb637-29"><a href="method-validation-bhef-machine-piles.html#cb637-29" tabindex="-1"></a>          <span class="co"># slash_pile_detect_watershed</span></span>
<span id="cb637-30"><a href="method-validation-bhef-machine-piles.html#cb637-30" tabindex="-1"></a>          ans_temp <span class="ot">&lt;-</span> <span class="fu">slash_pile_detect_watershed</span>(</span>
<span id="cb637-31"><a href="method-validation-bhef-machine-piles.html#cb637-31" tabindex="-1"></a>            <span class="at">chm_rast =</span> chm_temp</span>
<span id="cb637-32"><a href="method-validation-bhef-machine-piles.html#cb637-32" tabindex="-1"></a>            <span class="do">#### height and area thresholds for the detected piles</span></span>
<span id="cb637-33"><a href="method-validation-bhef-machine-piles.html#cb637-33" tabindex="-1"></a>            <span class="co"># these should be based on data from the literature or expectations based on the prescription</span></span>
<span id="cb637-34"><a href="method-validation-bhef-machine-piles.html#cb637-34" tabindex="-1"></a>            , <span class="at">max_ht_m =</span> <span class="dv">4</span> <span class="co"># set the max expected pile height</span></span>
<span id="cb637-35"><a href="method-validation-bhef-machine-piles.html#cb637-35" tabindex="-1"></a>            , <span class="at">min_ht_m =</span> <span class="fl">1.5</span> <span class="co"># set the min expected pile height</span></span>
<span id="cb637-36"><a href="method-validation-bhef-machine-piles.html#cb637-36" tabindex="-1"></a>            , <span class="at">min_area_m2 =</span> (<span class="dv">27</span><span class="sc">*</span><span class="dv">2</span>) <span class="co"># 66 # set the min expected pile area</span></span>
<span id="cb637-37"><a href="method-validation-bhef-machine-piles.html#cb637-37" tabindex="-1"></a>            , <span class="at">max_area_m2 =</span> (<span class="dv">27</span><span class="sc">*</span><span class="dv">16</span>) <span class="co"># 444 # set the max expected pile area</span></span>
<span id="cb637-38"><a href="method-validation-bhef-machine-piles.html#cb637-38" tabindex="-1"></a>            <span class="do">#### irregularity filtering</span></span>
<span id="cb637-39"><a href="method-validation-bhef-machine-piles.html#cb637-39" tabindex="-1"></a>            <span class="co"># 1 = perfectly convex (no inward angles); 0 = so many inward angles</span></span>
<span id="cb637-40"><a href="method-validation-bhef-machine-piles.html#cb637-40" tabindex="-1"></a>            <span class="co"># values closer to 1 remove more irregular segments; </span></span>
<span id="cb637-41"><a href="method-validation-bhef-machine-piles.html#cb637-41" tabindex="-1"></a>              <span class="co"># values closer to 0 keep more irregular segments (and also regular segments)</span></span>
<span id="cb637-42"><a href="method-validation-bhef-machine-piles.html#cb637-42" tabindex="-1"></a>            <span class="co"># these will all be further filtered for their circularity and later smoothed to remove blocky edges</span></span>
<span id="cb637-43"><a href="method-validation-bhef-machine-piles.html#cb637-43" tabindex="-1"></a>            <span class="co"># and most inward angles by applying a convex hull to the original detected segment</span></span>
<span id="cb637-44"><a href="method-validation-bhef-machine-piles.html#cb637-44" tabindex="-1"></a>            , <span class="at">convexity_pct =</span> <span class="fl">0.14</span> <span class="co"># min required overlap between the predicted pile and the convex hull of the predicted pile</span></span>
<span id="cb637-45"><a href="method-validation-bhef-machine-piles.html#cb637-45" tabindex="-1"></a>            <span class="do">#### circularity filtering</span></span>
<span id="cb637-46"><a href="method-validation-bhef-machine-piles.html#cb637-46" tabindex="-1"></a>            <span class="co"># 1 = perfectly circular; 0 = not circular (e.g. linear) but also circular</span></span>
<span id="cb637-47"><a href="method-validation-bhef-machine-piles.html#cb637-47" tabindex="-1"></a>            <span class="co"># min required IoU between the predicted pile and the best fit circle of the predicted pile</span></span>
<span id="cb637-48"><a href="method-validation-bhef-machine-piles.html#cb637-48" tabindex="-1"></a>            , <span class="at">circle_fit_iou_pct =</span> <span class="dv">0</span></span>
<span id="cb637-49"><a href="method-validation-bhef-machine-piles.html#cb637-49" tabindex="-1"></a>            <span class="do">#### shape refinement &amp; overlap removal</span></span>
<span id="cb637-50"><a href="method-validation-bhef-machine-piles.html#cb637-50" tabindex="-1"></a>            <span class="do">## smooth_segs = T ... convex hulls of raster detected segments are returned, any that overlap are removed</span></span>
<span id="cb637-51"><a href="method-validation-bhef-machine-piles.html#cb637-51" tabindex="-1"></a>            <span class="do">## smooth_segs = F ... raster detected segments are returned (blocky) if they meet all prior rules</span></span>
<span id="cb637-52"><a href="method-validation-bhef-machine-piles.html#cb637-52" tabindex="-1"></a>            , <span class="at">smooth_segs =</span> T</span>
<span id="cb637-53"><a href="method-validation-bhef-machine-piles.html#cb637-53" tabindex="-1"></a>          )</span>
<span id="cb637-54"><a href="method-validation-bhef-machine-piles.html#cb637-54" tabindex="-1"></a>          <span class="fu">return</span>(ans_temp)</span>
<span id="cb637-55"><a href="method-validation-bhef-machine-piles.html#cb637-55" tabindex="-1"></a>        }</span>
<span id="cb637-56"><a href="method-validation-bhef-machine-piles.html#cb637-56" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb637-57"><a href="method-validation-bhef-machine-piles.html#cb637-57" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb637-58"><a href="method-validation-bhef-machine-piles.html#cb637-58" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pred_id =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>())</span>
<span id="cb637-59"><a href="method-validation-bhef-machine-piles.html#cb637-59" tabindex="-1"></a>    <span class="co"># save</span></span>
<span id="cb637-60"><a href="method-validation-bhef-machine-piles.html#cb637-60" tabindex="-1"></a>    slash_pile_detect_watershed_ans <span class="sc">%&gt;%</span> sf<span class="sc">::</span><span class="fu">st_write</span>(fnm_temp, <span class="at">append =</span> F)</span>
<span id="cb637-61"><a href="method-validation-bhef-machine-piles.html#cb637-61" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb637-62"><a href="method-validation-bhef-machine-piles.html#cb637-62" tabindex="-1"></a>  slash_pile_detect_watershed_ans <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(fnm_temp, <span class="at">quiet=</span>T)</span>
<span id="cb637-63"><a href="method-validation-bhef-machine-piles.html#cb637-63" tabindex="-1"></a>}</span>
<span id="cb637-64"><a href="method-validation-bhef-machine-piles.html#cb637-64" tabindex="-1"></a><span class="co"># what did we get?</span></span>
<span id="cb637-65"><a href="method-validation-bhef-machine-piles.html#cb637-65" tabindex="-1"></a>slash_pile_detect_watershed_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 303
## Columns: 8
## $ pred_id         &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…
## $ area_m2         &lt;dbl&gt; 357.1650, 373.4325, 186.5025, 347.5013, 375.1312, 185.…
## $ volume_m3       &lt;dbl&gt; 1082.1780, 986.4124, 404.8439, 1050.6005, 974.9271, 41…
## $ max_height_m    &lt;dbl&gt; 3.999975, 3.999148, 3.991482, 3.999136, 4.000000, 3.99…
## $ volume_per_area &lt;dbl&gt; 3.0299105, 2.6414743, 2.1707159, 3.0233000, 2.5988961,…
## $ pct_chull       &lt;dbl&gt; 0.4918105, 0.6169187, 0.6529135, 0.3911425, 0.5213375,…
## $ diameter_m      &lt;dbl&gt; 32.60111, 26.64137, 19.20234, 26.96831, 28.31148, 22.6…
## $ geom            &lt;POLYGON [m]&gt; POLYGON ((608427.5 4888468,..., POLYGON ((6086…</code></pre>
</div>
<div id="accuracy-of-these-structural-settings-1" class="section level3 hasAnchor" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Accuracy of these structural settings<a href="method-validation-bhef-machine-piles.html#accuracy-of-these-structural-settings-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>let’s quickly look at the accuracy of the pile detection if we were to only use the structural data to identify piles with these specific settings.</p>
<p>note, that if we only had structural data, we would be much more restrictive in setting the pile detection parameters as we’ll demonstrate below.</p>
<p>we aren’t going to fully discuss this accuracy assessment, it is presented only for the curious</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="method-validation-bhef-machine-piles.html#cb639-1" tabindex="-1"></a><span class="co"># add filter for those in stand</span></span>
<span id="cb639-2"><a href="method-validation-bhef-machine-piles.html#cb639-2" tabindex="-1"></a><span class="co"># pred</span></span>
<span id="cb639-3"><a href="method-validation-bhef-machine-piles.html#cb639-3" tabindex="-1"></a>struct_temp <span class="ot">&lt;-</span> slash_pile_detect_watershed_ans <span class="sc">%&gt;%</span> </span>
<span id="cb639-4"><a href="method-validation-bhef-machine-piles.html#cb639-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb639-5"><a href="method-validation-bhef-machine-piles.html#cb639-5" tabindex="-1"></a>    slash_pile_detect_watershed_ans <span class="sc">%&gt;%</span> </span>
<span id="cb639-6"><a href="method-validation-bhef-machine-piles.html#cb639-6" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb639-7"><a href="method-validation-bhef-machine-piles.html#cb639-7" tabindex="-1"></a>        bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb639-8"><a href="method-validation-bhef-machine-piles.html#cb639-8" tabindex="-1"></a>          sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb639-9"><a href="method-validation-bhef-machine-piles.html#cb639-9" tabindex="-1"></a>          sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(slash_pile_detect_watershed_ans))</span>
<span id="cb639-10"><a href="method-validation-bhef-machine-piles.html#cb639-10" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-11"><a href="method-validation-bhef-machine-piles.html#cb639-11" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb639-12"><a href="method-validation-bhef-machine-piles.html#cb639-12" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">distinct</span>(pred_id) <span class="sc">%&gt;%</span> </span>
<span id="cb639-13"><a href="method-validation-bhef-machine-piles.html#cb639-13" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">is_in_stand=</span>T)</span>
<span id="cb639-14"><a href="method-validation-bhef-machine-piles.html#cb639-14" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;pred_id&quot;</span></span>
<span id="cb639-15"><a href="method-validation-bhef-machine-piles.html#cb639-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-16"><a href="method-validation-bhef-machine-piles.html#cb639-16" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">is_in_stand=</span>dplyr<span class="sc">::</span><span class="fu">coalesce</span>(is_in_stand, F))</span>
<span id="cb639-17"><a href="method-validation-bhef-machine-piles.html#cb639-17" tabindex="-1"></a><span class="co"># ground truth and prediction matching process</span></span>
<span id="cb639-18"><a href="method-validation-bhef-machine-piles.html#cb639-18" tabindex="-1"></a>gt_pred_match_temp <span class="ot">&lt;-</span> <span class="fu">ground_truth_prediction_match</span>(</span>
<span id="cb639-19"><a href="method-validation-bhef-machine-piles.html#cb639-19" tabindex="-1"></a>  <span class="at">ground_truth =</span> </span>
<span id="cb639-20"><a href="method-validation-bhef-machine-piles.html#cb639-20" tabindex="-1"></a>    bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb639-21"><a href="method-validation-bhef-machine-piles.html#cb639-21" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand) <span class="sc">%&gt;%</span> </span>
<span id="cb639-22"><a href="method-validation-bhef-machine-piles.html#cb639-22" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(image_gt_diameter_m)) <span class="sc">%&gt;%</span> </span>
<span id="cb639-23"><a href="method-validation-bhef-machine-piles.html#cb639-23" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(struct_temp))</span>
<span id="cb639-24"><a href="method-validation-bhef-machine-piles.html#cb639-24" tabindex="-1"></a>  , <span class="at">gt_id =</span> <span class="st">&quot;pile_id&quot;</span></span>
<span id="cb639-25"><a href="method-validation-bhef-machine-piles.html#cb639-25" tabindex="-1"></a>  , <span class="at">predictions =</span> struct_temp <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand)</span>
<span id="cb639-26"><a href="method-validation-bhef-machine-piles.html#cb639-26" tabindex="-1"></a>  , <span class="at">pred_id =</span> <span class="st">&quot;pred_id&quot;</span></span>
<span id="cb639-27"><a href="method-validation-bhef-machine-piles.html#cb639-27" tabindex="-1"></a>  , <span class="at">min_iou_pct =</span> <span class="fl">0.05</span></span>
<span id="cb639-28"><a href="method-validation-bhef-machine-piles.html#cb639-28" tabindex="-1"></a>)</span>
<span id="cb639-29"><a href="method-validation-bhef-machine-piles.html#cb639-29" tabindex="-1"></a><span class="co"># add data from gt and pred piles</span></span>
<span id="cb639-30"><a href="method-validation-bhef-machine-piles.html#cb639-30" tabindex="-1"></a>gt_pred_match_temp <span class="ot">&lt;-</span> </span>
<span id="cb639-31"><a href="method-validation-bhef-machine-piles.html#cb639-31" tabindex="-1"></a>  gt_pred_match_temp <span class="sc">%&gt;%</span> </span>
<span id="cb639-32"><a href="method-validation-bhef-machine-piles.html#cb639-32" tabindex="-1"></a>  <span class="co"># add area of gt</span></span>
<span id="cb639-33"><a href="method-validation-bhef-machine-piles.html#cb639-33" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb639-34"><a href="method-validation-bhef-machine-piles.html#cb639-34" tabindex="-1"></a>    bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb639-35"><a href="method-validation-bhef-machine-piles.html#cb639-35" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb639-36"><a href="method-validation-bhef-machine-piles.html#cb639-36" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand) <span class="sc">%&gt;%</span> </span>
<span id="cb639-37"><a href="method-validation-bhef-machine-piles.html#cb639-37" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb639-38"><a href="method-validation-bhef-machine-piles.html#cb639-38" tabindex="-1"></a>        pile_id</span>
<span id="cb639-39"><a href="method-validation-bhef-machine-piles.html#cb639-39" tabindex="-1"></a>        , image_gt_area_m2</span>
<span id="cb639-40"><a href="method-validation-bhef-machine-piles.html#cb639-40" tabindex="-1"></a>        , image_gt_diameter_m</span>
<span id="cb639-41"><a href="method-validation-bhef-machine-piles.html#cb639-41" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-42"><a href="method-validation-bhef-machine-piles.html#cb639-42" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb639-43"><a href="method-validation-bhef-machine-piles.html#cb639-43" tabindex="-1"></a>        <span class="at">gt_diameter_m =</span> image_gt_diameter_m</span>
<span id="cb639-44"><a href="method-validation-bhef-machine-piles.html#cb639-44" tabindex="-1"></a>        , <span class="at">gt_area_m2 =</span> image_gt_area_m2</span>
<span id="cb639-45"><a href="method-validation-bhef-machine-piles.html#cb639-45" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-46"><a href="method-validation-bhef-machine-piles.html#cb639-46" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pile_id=</span><span class="fu">as.numeric</span>(pile_id))</span>
<span id="cb639-47"><a href="method-validation-bhef-machine-piles.html#cb639-47" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;pile_id&quot;</span></span>
<span id="cb639-48"><a href="method-validation-bhef-machine-piles.html#cb639-48" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-49"><a href="method-validation-bhef-machine-piles.html#cb639-49" tabindex="-1"></a>  <span class="co"># add info from predictions</span></span>
<span id="cb639-50"><a href="method-validation-bhef-machine-piles.html#cb639-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb639-51"><a href="method-validation-bhef-machine-piles.html#cb639-51" tabindex="-1"></a>    struct_temp <span class="sc">%&gt;%</span></span>
<span id="cb639-52"><a href="method-validation-bhef-machine-piles.html#cb639-52" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb639-53"><a href="method-validation-bhef-machine-piles.html#cb639-53" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb639-54"><a href="method-validation-bhef-machine-piles.html#cb639-54" tabindex="-1"></a>        pred_id</span>
<span id="cb639-55"><a href="method-validation-bhef-machine-piles.html#cb639-55" tabindex="-1"></a>        , area_m2, volume_m3, max_height_m, diameter_m</span>
<span id="cb639-56"><a href="method-validation-bhef-machine-piles.html#cb639-56" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb639-57"><a href="method-validation-bhef-machine-piles.html#cb639-57" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb639-58"><a href="method-validation-bhef-machine-piles.html#cb639-58" tabindex="-1"></a>        <span class="at">pred_area_m2 =</span> area_m2, <span class="at">pred_volume_m3 =</span> volume_m3</span>
<span id="cb639-59"><a href="method-validation-bhef-machine-piles.html#cb639-59" tabindex="-1"></a>        , <span class="at">pred_height_m =</span> max_height_m, <span class="at">pred_diameter_m =</span> diameter_m</span>
<span id="cb639-60"><a href="method-validation-bhef-machine-piles.html#cb639-60" tabindex="-1"></a>      )</span>
<span id="cb639-61"><a href="method-validation-bhef-machine-piles.html#cb639-61" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(pred_id)</span>
<span id="cb639-62"><a href="method-validation-bhef-machine-piles.html#cb639-62" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb639-63"><a href="method-validation-bhef-machine-piles.html#cb639-63" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb639-64"><a href="method-validation-bhef-machine-piles.html#cb639-64" tabindex="-1"></a>    <span class="do">### calculate these based on the formulas below...agg_ground_truth_match() depends on those formulas</span></span>
<span id="cb639-65"><a href="method-validation-bhef-machine-piles.html#cb639-65" tabindex="-1"></a>    <span class="at">diff_image_diameter_m =</span> pred_diameter_m<span class="sc">-</span>gt_diameter_m</span>
<span id="cb639-66"><a href="method-validation-bhef-machine-piles.html#cb639-66" tabindex="-1"></a>    , <span class="at">pct_diff_image_diameter_m =</span> (gt_diameter_m<span class="sc">-</span>pred_diameter_m)<span class="sc">/</span>gt_diameter_m</span>
<span id="cb639-67"><a href="method-validation-bhef-machine-piles.html#cb639-67" tabindex="-1"></a>    <span class="co"># area diffs</span></span>
<span id="cb639-68"><a href="method-validation-bhef-machine-piles.html#cb639-68" tabindex="-1"></a>    , <span class="at">diff_area_m2 =</span> pred_area_m2<span class="sc">-</span>gt_area_m2</span>
<span id="cb639-69"><a href="method-validation-bhef-machine-piles.html#cb639-69" tabindex="-1"></a>    , <span class="at">pct_diff_area_m2 =</span> (gt_area_m2<span class="sc">-</span>pred_area_m2)<span class="sc">/</span>gt_area_m2</span>
<span id="cb639-70"><a href="method-validation-bhef-machine-piles.html#cb639-70" tabindex="-1"></a>  )</span>
<span id="cb639-71"><a href="method-validation-bhef-machine-piles.html#cb639-71" tabindex="-1"></a><span class="co"># huh?</span></span>
<span id="cb639-72"><a href="method-validation-bhef-machine-piles.html#cb639-72" tabindex="-1"></a><span class="fu">agg_ground_truth_match</span>(<span class="at">ground_truth_prediction_match_ans =</span> gt_pred_match_temp) <span class="sc">%&gt;%</span> </span>
<span id="cb639-73"><a href="method-validation-bhef-machine-piles.html#cb639-73" tabindex="-1"></a>  <span class="fu">kbl_agg_gt_match</span>(<span class="at">caption =</span> <span class="st">&quot;pile detection and form quantification accuracy metrics&lt;br&gt;structural only prior to data fusion&quot;</span>)</span></code></pre></div>
<table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-585">Table 11.1: </span>pile detection and form quantification accuracy metrics<br>structural only prior to data fusion
</caption>
<thead>
<tr>
<th style="text-align:left;">
.
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Detection Count
</td>
<td style="text-align:left;">
TP
</td>
<td style="text-align:left;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
FN
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
FP
</td>
<td style="text-align:left;">
281
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Detection
</td>
<td style="text-align:left;">
F-score
</td>
<td style="text-align:left;">
13%
</td>
</tr>
<tr>
<td style="text-align:left;">
Recall
</td>
<td style="text-align:left;">
85%
</td>
</tr>
<tr>
<td style="text-align:left;">
Precision
</td>
<td style="text-align:left;">
7%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Area m<sup>2</sup>
</td>
<td style="text-align:left;">
ME
</td>
<td style="text-align:left;">
-17.98
</td>
</tr>
<tr>
<td style="text-align:left;">
RMSE
</td>
<td style="text-align:left;">
49.4
</td>
</tr>
<tr>
<td style="text-align:left;">
MAPE
</td>
<td style="text-align:left;">
9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Diameter m (image)
</td>
<td style="text-align:left;">
ME
</td>
<td style="text-align:left;">
-1.52
</td>
</tr>
<tr>
<td style="text-align:left;">
RMSE
</td>
<td style="text-align:left;">
4.0
</td>
</tr>
<tr>
<td style="text-align:left;">
MAPE
</td>
<td style="text-align:left;">
7%
</td>
</tr>
</tbody>
</table>
</div>
<div id="spect_filtering_final_bhef" class="section level3 hasAnchor" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Spectral Filtering of Candidate Segments<a href="method-validation-bhef-machine-piles.html#spect_filtering_final_bhef" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now we’ll filter the structurally-detected candidate slash piles using the RGB spectral data with the <code>polygon_spectral_filtering()</code> function we defined in <a href="data_fusion.html#polygon_spectral_filtering">this earlier section</a></p>
<p>The spectral filtering approach is a data fusion method used to filter candidate slash pile detections first identified using structural data alone. After initial candidates are identified based on structural data, this method applies a set of five spectral index thresholds to the candidate segments. The <code>spectral_weight</code> parameter is an integer from 1 to 5 that directly controls the number of thresholds that are applied. For example, a value of “3” means a candidate pile must pass at least three of the five thresholds to be retained. This process helps to filter out objects like shrubs, lower tree branches, or boulders that may have been structurally misidentified as piles.</p>
<p>Given that the BHEF ponderosa pine validation site has a high likelihood of structural false positives from clumps of small tree regeneration, we set this parameter to its highest level (‘5’) to require all available spectral criteria to be met for retention in a attempt to maximize the removal of vegetation candidate segments.</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="method-validation-bhef-machine-piles.html#cb640-1" tabindex="-1"></a>final_predicted_slash_piles <span class="ot">&lt;-</span> <span class="fu">polygon_spectral_filtering</span>(</span>
<span id="cb640-2"><a href="method-validation-bhef-machine-piles.html#cb640-2" tabindex="-1"></a>  <span class="at">sf_data =</span> slash_pile_detect_watershed_ans</span>
<span id="cb640-3"><a href="method-validation-bhef-machine-piles.html#cb640-3" tabindex="-1"></a>  , <span class="at">rgb_rast =</span> bhef_rgb_rast</span>
<span id="cb640-4"><a href="method-validation-bhef-machine-piles.html#cb640-4" tabindex="-1"></a>  <span class="co"># define the band index</span></span>
<span id="cb640-5"><a href="method-validation-bhef-machine-piles.html#cb640-5" tabindex="-1"></a>  , <span class="at">red_band_idx =</span> <span class="dv">1</span></span>
<span id="cb640-6"><a href="method-validation-bhef-machine-piles.html#cb640-6" tabindex="-1"></a>  , <span class="at">green_band_idx =</span> <span class="dv">2</span></span>
<span id="cb640-7"><a href="method-validation-bhef-machine-piles.html#cb640-7" tabindex="-1"></a>  , <span class="at">blue_band_idx =</span> <span class="dv">3</span></span>
<span id="cb640-8"><a href="method-validation-bhef-machine-piles.html#cb640-8" tabindex="-1"></a>  <span class="co"># spectral weighting</span></span>
<span id="cb640-9"><a href="method-validation-bhef-machine-piles.html#cb640-9" tabindex="-1"></a>  , <span class="at">spectral_weight =</span> <span class="dv">5</span></span>
<span id="cb640-10"><a href="method-validation-bhef-machine-piles.html#cb640-10" tabindex="-1"></a>)</span></code></pre></div>
<p>what did we get?</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="method-validation-bhef-machine-piles.html#cb641-1" tabindex="-1"></a><span class="co"># huh?</span></span>
<span id="cb641-2"><a href="method-validation-bhef-machine-piles.html#cb641-2" tabindex="-1"></a>final_predicted_slash_piles <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 27
## Columns: 23
## $ pred_id          &lt;int&gt; 12, 14, 184, 205, 206, 207, 213, 214, 219, 220, 221, …
## $ area_m2          &lt;dbl&gt; 243.06750, 412.02000, 83.17125, 85.57875, 129.21750, …
## $ volume_m3        &lt;dbl&gt; 190.17413, 459.41608, 51.64908, 80.33105, 163.93064, …
## $ max_height_m     &lt;dbl&gt; 2.279373, 3.280074, 3.951835, 3.233303, 3.229062, 3.1…
## $ volume_per_area  &lt;dbl&gt; 0.7823923, 1.1150334, 0.6209969, 0.9386799, 1.2686412…
## $ pct_chull        &lt;dbl&gt; 0.7291493, 0.7536588, 0.7212228, 0.6465098, 0.7912241…
## $ diameter_m       &lt;dbl&gt; 25.53571, 34.47162, 15.40917, 14.71224, 15.59207, 21.…
## $ rast_agg_grvi    &lt;dbl&gt; -0.000884844, -0.016909355, -0.003707689, 0.015903159…
## $ rast_agg_rgri    &lt;dbl&gt; 1.0017713, 1.0344004, 1.0074430, 0.9686916, 1.0625240…
## $ rast_agg_vdvi    &lt;dbl&gt; -0.0123371137, -0.0278193671, 0.0146187926, 0.0118513…
## $ rast_agg_rgbvi   &lt;dbl&gt; -0.023686998, -0.054847319, 0.030401412, 0.024209474,…
## $ rast_agg_exg     &lt;dbl&gt; -0.016382098, -0.036751658, 0.019587159, 0.015864551,…
## $ rast_agg_exr     &lt;dbl&gt; 0.1316969, 0.1437417, 0.1398499, 0.1200436, 0.1580908…
## $ rast_agg_exgr    &lt;dbl&gt; -0.1493897, -0.1811858, -0.1194634, -0.1097121, -0.18…
## $ rast_agg_bi      &lt;dbl&gt; 0.3627696, 0.4615124, 0.5071353, 0.3606289, 0.3293038…
## $ rast_agg_sat     &lt;dbl&gt; 0.07652807, 0.08524459, 0.10809455, 0.10115670, 0.093…
## $ geom             &lt;POLYGON [m]&gt; POLYGON ((609317.3 4888606,..., POLYGON ((609…
## $ inrange_th_exgr  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ inrange_th_rgri  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ inrange_th_vdvi  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ inrange_th_bi    &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ inrange_th_sat   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ inrange_th_votes &lt;dbl&gt; 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,…</code></pre>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="method-validation-bhef-machine-piles.html#cb643-1" tabindex="-1"></a><span class="co"># final_predicted_slash_piles %&gt;%</span></span>
<span id="cb643-2"><a href="method-validation-bhef-machine-piles.html#cb643-2" tabindex="-1"></a><span class="co">#   sf::st_drop_geometry() %&gt;% </span></span>
<span id="cb643-3"><a href="method-validation-bhef-machine-piles.html#cb643-3" tabindex="-1"></a><span class="co">#   dplyr::count(inrange_th_votes)</span></span></code></pre></div>
<p>how many piles were removed?</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="method-validation-bhef-machine-piles.html#cb644-1" tabindex="-1"></a><span class="co"># how many piles were removed?</span></span>
<span id="cb644-2"><a href="method-validation-bhef-machine-piles.html#cb644-2" tabindex="-1"></a><span class="fu">nrow</span>(slash_pile_detect_watershed_ans)<span class="sc">-</span><span class="fu">nrow</span>(final_predicted_slash_piles)</span></code></pre></div>
<pre><code>## [1] 276</code></pre>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="method-validation-bhef-machine-piles.html#cb646-1" tabindex="-1"></a><span class="co"># what proportion were removed?</span></span>
<span id="cb646-2"><a href="method-validation-bhef-machine-piles.html#cb646-2" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">percent</span>(</span>
<span id="cb646-3"><a href="method-validation-bhef-machine-piles.html#cb646-3" tabindex="-1"></a>  (<span class="fu">nrow</span>(slash_pile_detect_watershed_ans)<span class="sc">-</span><span class="fu">nrow</span>(final_predicted_slash_piles))<span class="sc">/</span><span class="fu">nrow</span>(slash_pile_detect_watershed_ans)</span>
<span id="cb646-4"><a href="method-validation-bhef-machine-piles.html#cb646-4" tabindex="-1"></a>  , <span class="at">accuracy=</span><span class="fl">0.1</span></span>
<span id="cb646-5"><a href="method-validation-bhef-machine-piles.html#cb646-5" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;91.1%&quot;</code></pre>
<p>This result contrasts sharply with the <a href="method-validation-pinyon-juniper.html#spect_filtering_final_pj">Pinyon-Juniper site</a> where the spectral filter removed 0% of candidate piles. The 91.1% removal rate at the BHEF ponderosa pine validation site indicates that the strict <code>spectral_weight</code> setting of ‘5’, which was chosen specifically to combat the high risk of False Positives (FPs) from dense clumps of small tree regeneration, was highly effective at identifying and rejecting vegetation based on its spectral signature. This disparity between the spectral data inclusion performance suggests that the green vegetation in the BHEF ponderosa pine validation site environment had a sufficiently distinct spectral signature from the pile material, unlike the senescent or arid vegetation at the Pinyon-Juniper site that mimicked dead wood.</p>
</div>
<div id="detection-and-quantification-accuracy-2" class="section level3 hasAnchor" number="11.3.4">
<h3><span class="header-section-number">11.3.4</span> Detection and Quantification Accuracy<a href="method-validation-bhef-machine-piles.html#detection-and-quantification-accuracy-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>let’s see how we did given the list of predictions compared to the ground truth data using the confusion matrix matching process we outlined in this <a href="method-evaluation.html#iou_match">earlier section</a>.</p>
<p>we’ll filter both ground truth and predicted piles to keep only those that actually intersect with the study unit boundary for comparison</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="method-validation-bhef-machine-piles.html#cb648-1" tabindex="-1"></a><span class="co"># add filter</span></span>
<span id="cb648-2"><a href="method-validation-bhef-machine-piles.html#cb648-2" tabindex="-1"></a><span class="co"># pred</span></span>
<span id="cb648-3"><a href="method-validation-bhef-machine-piles.html#cb648-3" tabindex="-1"></a>final_predicted_slash_piles <span class="ot">&lt;-</span> final_predicted_slash_piles <span class="sc">%&gt;%</span> </span>
<span id="cb648-4"><a href="method-validation-bhef-machine-piles.html#cb648-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb648-5"><a href="method-validation-bhef-machine-piles.html#cb648-5" tabindex="-1"></a>    final_predicted_slash_piles <span class="sc">%&gt;%</span> </span>
<span id="cb648-6"><a href="method-validation-bhef-machine-piles.html#cb648-6" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_intersection</span>(</span>
<span id="cb648-7"><a href="method-validation-bhef-machine-piles.html#cb648-7" tabindex="-1"></a>        bhef_stand_boundary <span class="sc">%&gt;%</span> </span>
<span id="cb648-8"><a href="method-validation-bhef-machine-piles.html#cb648-8" tabindex="-1"></a>          sf<span class="sc">::</span><span class="fu">st_union</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb648-9"><a href="method-validation-bhef-machine-piles.html#cb648-9" tabindex="-1"></a>          sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(final_predicted_slash_piles))</span>
<span id="cb648-10"><a href="method-validation-bhef-machine-piles.html#cb648-10" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb648-11"><a href="method-validation-bhef-machine-piles.html#cb648-11" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb648-12"><a href="method-validation-bhef-machine-piles.html#cb648-12" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">distinct</span>(pred_id) <span class="sc">%&gt;%</span> </span>
<span id="cb648-13"><a href="method-validation-bhef-machine-piles.html#cb648-13" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">is_in_stand=</span>T)</span>
<span id="cb648-14"><a href="method-validation-bhef-machine-piles.html#cb648-14" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;pred_id&quot;</span></span>
<span id="cb648-15"><a href="method-validation-bhef-machine-piles.html#cb648-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb648-16"><a href="method-validation-bhef-machine-piles.html#cb648-16" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">is_in_stand=</span>dplyr<span class="sc">::</span><span class="fu">coalesce</span>(is_in_stand, F))</span></code></pre></div>
<div id="instance-matching-4" class="section level4 hasAnchor" number="11.3.4.1">
<h4><span class="header-section-number">11.3.4.1</span> Instance matching<a href="method-validation-bhef-machine-piles.html#instance-matching-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>now apply the instance matching process we outlined in this <a href="method-evaluation.html#iou_match">earlier section</a> to establish True Positives (TP), False Positives (FP, commissions), and False Negatives (FN, omissions)</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="method-validation-bhef-machine-piles.html#cb649-1" tabindex="-1"></a><span class="co"># ground truth and prediction matching process</span></span>
<span id="cb649-2"><a href="method-validation-bhef-machine-piles.html#cb649-2" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="ot">&lt;-</span> <span class="fu">ground_truth_prediction_match</span>(</span>
<span id="cb649-3"><a href="method-validation-bhef-machine-piles.html#cb649-3" tabindex="-1"></a>  <span class="at">ground_truth =</span> </span>
<span id="cb649-4"><a href="method-validation-bhef-machine-piles.html#cb649-4" tabindex="-1"></a>    bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb649-5"><a href="method-validation-bhef-machine-piles.html#cb649-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand) <span class="sc">%&gt;%</span> </span>
<span id="cb649-6"><a href="method-validation-bhef-machine-piles.html#cb649-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(image_gt_diameter_m)) <span class="sc">%&gt;%</span> </span>
<span id="cb649-7"><a href="method-validation-bhef-machine-piles.html#cb649-7" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(final_predicted_slash_piles))</span>
<span id="cb649-8"><a href="method-validation-bhef-machine-piles.html#cb649-8" tabindex="-1"></a>  , <span class="at">gt_id =</span> <span class="st">&quot;pile_id&quot;</span></span>
<span id="cb649-9"><a href="method-validation-bhef-machine-piles.html#cb649-9" tabindex="-1"></a>  , <span class="at">predictions =</span> final_predicted_slash_piles <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand)</span>
<span id="cb649-10"><a href="method-validation-bhef-machine-piles.html#cb649-10" tabindex="-1"></a>  , <span class="at">pred_id =</span> <span class="st">&quot;pred_id&quot;</span></span>
<span id="cb649-11"><a href="method-validation-bhef-machine-piles.html#cb649-11" tabindex="-1"></a>  , <span class="at">min_iou_pct =</span> <span class="fl">0.05</span></span>
<span id="cb649-12"><a href="method-validation-bhef-machine-piles.html#cb649-12" tabindex="-1"></a>)</span>
<span id="cb649-13"><a href="method-validation-bhef-machine-piles.html#cb649-13" tabindex="-1"></a><span class="co"># add data from gt and pred piles</span></span>
<span id="cb649-14"><a href="method-validation-bhef-machine-piles.html#cb649-14" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="ot">&lt;-</span> </span>
<span id="cb649-15"><a href="method-validation-bhef-machine-piles.html#cb649-15" tabindex="-1"></a>  ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb649-16"><a href="method-validation-bhef-machine-piles.html#cb649-16" tabindex="-1"></a>  <span class="co"># add area of gt</span></span>
<span id="cb649-17"><a href="method-validation-bhef-machine-piles.html#cb649-17" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb649-18"><a href="method-validation-bhef-machine-piles.html#cb649-18" tabindex="-1"></a>    bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb649-19"><a href="method-validation-bhef-machine-piles.html#cb649-19" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb649-20"><a href="method-validation-bhef-machine-piles.html#cb649-20" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand) <span class="sc">%&gt;%</span> </span>
<span id="cb649-21"><a href="method-validation-bhef-machine-piles.html#cb649-21" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb649-22"><a href="method-validation-bhef-machine-piles.html#cb649-22" tabindex="-1"></a>        pile_id</span>
<span id="cb649-23"><a href="method-validation-bhef-machine-piles.html#cb649-23" tabindex="-1"></a>        , image_gt_area_m2</span>
<span id="cb649-24"><a href="method-validation-bhef-machine-piles.html#cb649-24" tabindex="-1"></a>        , image_gt_diameter_m</span>
<span id="cb649-25"><a href="method-validation-bhef-machine-piles.html#cb649-25" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb649-26"><a href="method-validation-bhef-machine-piles.html#cb649-26" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb649-27"><a href="method-validation-bhef-machine-piles.html#cb649-27" tabindex="-1"></a>        <span class="at">gt_diameter_m =</span> image_gt_diameter_m</span>
<span id="cb649-28"><a href="method-validation-bhef-machine-piles.html#cb649-28" tabindex="-1"></a>        , <span class="at">gt_area_m2 =</span> image_gt_area_m2</span>
<span id="cb649-29"><a href="method-validation-bhef-machine-piles.html#cb649-29" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb649-30"><a href="method-validation-bhef-machine-piles.html#cb649-30" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">pile_id=</span><span class="fu">as.numeric</span>(pile_id))</span>
<span id="cb649-31"><a href="method-validation-bhef-machine-piles.html#cb649-31" tabindex="-1"></a>    , <span class="at">by =</span> <span class="st">&quot;pile_id&quot;</span></span>
<span id="cb649-32"><a href="method-validation-bhef-machine-piles.html#cb649-32" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb649-33"><a href="method-validation-bhef-machine-piles.html#cb649-33" tabindex="-1"></a>  <span class="co"># add info from predictions</span></span>
<span id="cb649-34"><a href="method-validation-bhef-machine-piles.html#cb649-34" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(</span>
<span id="cb649-35"><a href="method-validation-bhef-machine-piles.html#cb649-35" tabindex="-1"></a>    slash_pile_detect_watershed_ans <span class="sc">%&gt;%</span></span>
<span id="cb649-36"><a href="method-validation-bhef-machine-piles.html#cb649-36" tabindex="-1"></a>      sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb649-37"><a href="method-validation-bhef-machine-piles.html#cb649-37" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb649-38"><a href="method-validation-bhef-machine-piles.html#cb649-38" tabindex="-1"></a>        pred_id</span>
<span id="cb649-39"><a href="method-validation-bhef-machine-piles.html#cb649-39" tabindex="-1"></a>        , area_m2, volume_m3, max_height_m, diameter_m</span>
<span id="cb649-40"><a href="method-validation-bhef-machine-piles.html#cb649-40" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb649-41"><a href="method-validation-bhef-machine-piles.html#cb649-41" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb649-42"><a href="method-validation-bhef-machine-piles.html#cb649-42" tabindex="-1"></a>        <span class="at">pred_area_m2 =</span> area_m2, <span class="at">pred_volume_m3 =</span> volume_m3</span>
<span id="cb649-43"><a href="method-validation-bhef-machine-piles.html#cb649-43" tabindex="-1"></a>        , <span class="at">pred_height_m =</span> max_height_m, <span class="at">pred_diameter_m =</span> diameter_m</span>
<span id="cb649-44"><a href="method-validation-bhef-machine-piles.html#cb649-44" tabindex="-1"></a>      )</span>
<span id="cb649-45"><a href="method-validation-bhef-machine-piles.html#cb649-45" tabindex="-1"></a>    , <span class="at">by =</span> dplyr<span class="sc">::</span><span class="fu">join_by</span>(pred_id)</span>
<span id="cb649-46"><a href="method-validation-bhef-machine-piles.html#cb649-46" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb649-47"><a href="method-validation-bhef-machine-piles.html#cb649-47" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb649-48"><a href="method-validation-bhef-machine-piles.html#cb649-48" tabindex="-1"></a>    <span class="do">### calculate these based on the formulas below...agg_ground_truth_match() depends on those formulas</span></span>
<span id="cb649-49"><a href="method-validation-bhef-machine-piles.html#cb649-49" tabindex="-1"></a>    <span class="co"># image diameter</span></span>
<span id="cb649-50"><a href="method-validation-bhef-machine-piles.html#cb649-50" tabindex="-1"></a>    <span class="at">diff_image_diameter_m =</span> pred_diameter_m<span class="sc">-</span>gt_diameter_m</span>
<span id="cb649-51"><a href="method-validation-bhef-machine-piles.html#cb649-51" tabindex="-1"></a>    , <span class="at">pct_diff_image_diameter_m =</span> (gt_diameter_m<span class="sc">-</span>pred_diameter_m)<span class="sc">/</span>gt_diameter_m</span>
<span id="cb649-52"><a href="method-validation-bhef-machine-piles.html#cb649-52" tabindex="-1"></a>    <span class="co"># area diffs</span></span>
<span id="cb649-53"><a href="method-validation-bhef-machine-piles.html#cb649-53" tabindex="-1"></a>    , <span class="at">diff_area_m2 =</span> pred_area_m2<span class="sc">-</span>gt_area_m2</span>
<span id="cb649-54"><a href="method-validation-bhef-machine-piles.html#cb649-54" tabindex="-1"></a>    , <span class="at">pct_diff_area_m2 =</span> (gt_area_m2<span class="sc">-</span>pred_area_m2)<span class="sc">/</span>gt_area_m2</span>
<span id="cb649-55"><a href="method-validation-bhef-machine-piles.html#cb649-55" tabindex="-1"></a>  )</span>
<span id="cb649-56"><a href="method-validation-bhef-machine-piles.html#cb649-56" tabindex="-1"></a><span class="co"># huh?</span></span>
<span id="cb649-57"><a href="method-validation-bhef-machine-piles.html#cb649-57" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 31
## Columns: 16
## $ pile_id                   &lt;dbl&gt; 16, 8, 20, 17, 23, 26, 11, 9, 18, 25, 12, 21…
## $ i_area                    &lt;dbl&gt; 157.52972, 374.58214, 279.73937, 228.63537, …
## $ u_area                    &lt;dbl&gt; 387.05356, 446.11688, 333.30108, 285.22402, …
## $ iou                       &lt;dbl&gt; 0.4069972, 0.8396502, 0.8392993, 0.8015993, …
## $ pred_id                   &lt;int&gt; 299, 14, 296, 297, 300, 292, 12, 214, 286, 2…
## $ match_grp                 &lt;ord&gt; true positive, true positive, true positive,…
## $ gt_area_m2                &lt;dbl&gt; 378.00453, 408.67902, 323.15045, 269.47564, …
## $ gt_diameter_m             &lt;dbl&gt; 37.95325, 34.78950, 27.83942, 27.58500, 25.9…
## $ pred_area_m2              &lt;dbl&gt; 166.57875, 412.02000, 289.89000, 244.38375, …
## $ pred_volume_m3            &lt;dbl&gt; 146.45512, 459.41608, 354.32158, 267.35027, …
## $ pred_height_m             &lt;dbl&gt; 2.390827, 3.280074, 2.989531, 2.818481, 2.34…
## $ pred_diameter_m           &lt;dbl&gt; 20.81598, 34.47162, 26.88182, 26.76649, 25.7…
## $ diff_image_diameter_m     &lt;dbl&gt; -17.13726617, -0.31788093, -0.95759390, -0.8…
## $ pct_diff_image_diameter_m &lt;dbl&gt; 0.451536249, 0.009137266, 0.034397051, 0.029…
## $ diff_area_m2              &lt;dbl&gt; -211.4257811, 3.3409830, -33.2604520, -25.09…
## $ pct_diff_area_m2          &lt;dbl&gt; 0.559320759, -0.008175078, 0.102925593, 0.09…</code></pre>
<p>that’s a lot of great detail at the individual pile instance level for us to dig into. before we do that, let’s aggregate the instances to see how we did at the stand level overall</p>
</div>
<div id="overall-stand-level-1" class="section level4 hasAnchor" number="11.3.4.2">
<h4><span class="header-section-number">11.3.4.2</span> Overall (stand level)<a href="method-validation-bhef-machine-piles.html#overall-stand-level-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now we’ll aggregate the instance matching results to calculate overall performance assessment metrics. Here, we take the counts of True Positives (TP), False Positives (FP, commissions), and False Negatives (FN, omissions), to determine overall accuracy. This aggregation will give us two types of results:</p>
<ul>
<li><p><a href="method-evaluation.html#detect_metrics_form">detection accuracy metrics</a>: such as Recall, Precision, and F-score, are calculated directly by aggregating these raw TP, FP, and FN counts and quantifies the method’s ability to find the piles</p></li>
<li><p><a href="method-evaluation.html#quant_metrics_form">quantification accuracy metrics</a>: such as RMSE, MAPE, and Mean Error of pile form measurements (e.g. height, diameter) are calculated by aggregating the differences between the estimated pile attributes and the ground truth values for instances classified as True Positives. These metrics tell us about the method’s ability to accurately quantify the form of the piles it successfully identified</p></li>
</ul>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="method-validation-bhef-machine-piles.html#cb651-1" tabindex="-1"></a>agg_ground_truth_match_ans <span class="ot">&lt;-</span> <span class="fu">agg_ground_truth_match</span>(<span class="at">ground_truth_prediction_match_ans =</span> ground_truth_prediction_match_ans)</span></code></pre></div>
<p>let’s table the most relevant metrics</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="method-validation-bhef-machine-piles.html#cb652-1" tabindex="-1"></a>agg_ground_truth_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb652-2"><a href="method-validation-bhef-machine-piles.html#cb652-2" tabindex="-1"></a>  <span class="fu">kbl_agg_gt_match</span>(</span>
<span id="cb652-3"><a href="method-validation-bhef-machine-piles.html#cb652-3" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;pile detection and form quantification accuracy metrics&lt;br&gt;data fusion BHEF ponderosa pine validation site&quot;</span></span>
<span id="cb652-4"><a href="method-validation-bhef-machine-piles.html#cb652-4" tabindex="-1"></a>  )</span></code></pre></div>
<table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-593">Table 11.2: </span>pile detection and form quantification accuracy metrics<br>data fusion BHEF ponderosa pine validation site
</caption>
<thead>
<tr>
<th style="text-align:left;">
.
</th>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Detection Count
</td>
<td style="text-align:left;">
TP
</td>
<td style="text-align:left;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
FN
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
FP
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Detection
</td>
<td style="text-align:left;">
F-score
</td>
<td style="text-align:left;">
83%
</td>
</tr>
<tr>
<td style="text-align:left;">
Recall
</td>
<td style="text-align:left;">
85%
</td>
</tr>
<tr>
<td style="text-align:left;">
Precision
</td>
<td style="text-align:left;">
81%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Area m<sup>2</sup>
</td>
<td style="text-align:left;">
ME
</td>
<td style="text-align:left;">
-17.98
</td>
</tr>
<tr>
<td style="text-align:left;">
RMSE
</td>
<td style="text-align:left;">
49.4
</td>
</tr>
<tr>
<td style="text-align:left;">
MAPE
</td>
<td style="text-align:left;">
9%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
Diameter m (image)
</td>
<td style="text-align:left;">
ME
</td>
<td style="text-align:left;">
-1.52
</td>
</tr>
<tr>
<td style="text-align:left;">
RMSE
</td>
<td style="text-align:left;">
4.0
</td>
</tr>
<tr>
<td style="text-align:left;">
MAPE
</td>
<td style="text-align:left;">
7%
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="method-validation-bhef-machine-piles.html#cb653-1" tabindex="-1"></a><span class="co"># save the table for full comparison at the very end</span></span>
<span id="cb653-2"><a href="method-validation-bhef-machine-piles.html#cb653-2" tabindex="-1"></a><span class="co"># save the table for full comparison at the very end</span></span>
<span id="cb653-3"><a href="method-validation-bhef-machine-piles.html#cb653-3" tabindex="-1"></a>sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="at">dsn =</span> all_agg_ground_truth_match_ans_fp, <span class="at">quiet =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb653-4"><a href="method-validation-bhef-machine-piles.html#cb653-4" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_set_geometry</span>(<span class="st">&quot;geometry&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb653-5"><a href="method-validation-bhef-machine-piles.html#cb653-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb653-6"><a href="method-validation-bhef-machine-piles.html#cb653-6" tabindex="-1"></a>    site <span class="sc">!=</span> <span class="st">&quot;BHEF ponderosa pine validation site&quot;</span></span>
<span id="cb653-7"><a href="method-validation-bhef-machine-piles.html#cb653-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb653-8"><a href="method-validation-bhef-machine-piles.html#cb653-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb653-9"><a href="method-validation-bhef-machine-piles.html#cb653-9" tabindex="-1"></a>    <span class="fu">all_agg_ground_truth_sf_format</span>(</span>
<span id="cb653-10"><a href="method-validation-bhef-machine-piles.html#cb653-10" tabindex="-1"></a>      <span class="at">stand_boundary =</span> bhef_stand_boundary</span>
<span id="cb653-11"><a href="method-validation-bhef-machine-piles.html#cb653-11" tabindex="-1"></a>      , <span class="at">site =</span> <span class="st">&quot;BHEF ponderosa pine validation site&quot;</span></span>
<span id="cb653-12"><a href="method-validation-bhef-machine-piles.html#cb653-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb653-13"><a href="method-validation-bhef-machine-piles.html#cb653-13" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_set_geometry</span>(<span class="st">&quot;geometry&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb653-14"><a href="method-validation-bhef-machine-piles.html#cb653-14" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(</span>
<span id="cb653-15"><a href="method-validation-bhef-machine-piles.html#cb653-15" tabindex="-1"></a>      agg_ground_truth_match_ans</span>
<span id="cb653-16"><a href="method-validation-bhef-machine-piles.html#cb653-16" tabindex="-1"></a>      <span class="co"># join on aggregated form quantifications that we have for all</span></span>
<span id="cb653-17"><a href="method-validation-bhef-machine-piles.html#cb653-17" tabindex="-1"></a>      , ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb653-18"><a href="method-validation-bhef-machine-piles.html#cb653-18" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb653-19"><a href="method-validation-bhef-machine-piles.html#cb653-19" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">image_gt_diameter_m =</span> gt_diameter_m) <span class="sc">%&gt;%</span> </span>
<span id="cb653-20"><a href="method-validation-bhef-machine-piles.html#cb653-20" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb653-21"><a href="method-validation-bhef-machine-piles.html#cb653-21" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb653-22"><a href="method-validation-bhef-machine-piles.html#cb653-22" tabindex="-1"></a>            <span class="fu">c</span>(image_gt_diameter_m, pred_diameter_m, gt_area_m2, pred_area_m2, pred_volume_m3, pred_height_m)</span>
<span id="cb653-23"><a href="method-validation-bhef-machine-piles.html#cb653-23" tabindex="-1"></a>            , <span class="sc">~</span> <span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb653-24"><a href="method-validation-bhef-machine-piles.html#cb653-24" tabindex="-1"></a>          )</span>
<span id="cb653-25"><a href="method-validation-bhef-machine-piles.html#cb653-25" tabindex="-1"></a>        )</span>
<span id="cb653-26"><a href="method-validation-bhef-machine-piles.html#cb653-26" tabindex="-1"></a>    )</span>
<span id="cb653-27"><a href="method-validation-bhef-machine-piles.html#cb653-27" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb653-28"><a href="method-validation-bhef-machine-piles.html#cb653-28" tabindex="-1"></a>  <span class="co"># dplyr::glimpse()</span></span>
<span id="cb653-29"><a href="method-validation-bhef-machine-piles.html#cb653-29" tabindex="-1"></a>  <span class="co"># readr::write_csv(file = all_agg_ground_truth_match_ans_fp, append = F, progress = F)</span></span>
<span id="cb653-30"><a href="method-validation-bhef-machine-piles.html#cb653-30" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_write</span>(<span class="at">dsn =</span> all_agg_ground_truth_match_ans_fp, <span class="at">append =</span> F, <span class="at">quiet =</span> T)</span></code></pre></div>
<p>The detection performance at the BHEF ponderosa pine validation site, using the data fusion approach, demonstrates strong generalizability of our method despite the novel pile structure and site conditions. With only 26 actual piles in the validation area, each False Positive (FP) or False Negative (FN) prediction exerted a significant influence on the overall accuracy metrics. The 84.6% recall rate means the method successfully identified approximately 8 out of every 10 actual piles, indicating the structural and spectral filters were effective at retaining most true piles. A strong precision rate of 81.5% confirms the methodology did well at excluding spurious False Positive predictions, successfully distinguishing genuine piles from non-pile objects like dense small tree regeneration clumps.</p>
<p>The combined accuracy, quantified by an F-score of 83.0%, is a desirable result that further indicates the methodology is transferable across varied treatments, prescriptions, and pile constructions over highly varied landscapes. Statistical testing on the original ponderosa pine training data predicted an F-score range of 79.7% to 82.3% when using 0.15m CHM data as input, demonstrating that the achieved 83.0% accuracy is aligned with the method’s predicted performance limits even when applied to a fundamentally different treatment site with novel pile construction and challenging vegetation response.</p>
</div>
<div id="instance-level-pile-level-1" class="section level4 hasAnchor" number="11.3.4.3">
<h4><span class="header-section-number">11.3.4.3</span> Instance level (pile level)<a href="method-validation-bhef-machine-piles.html#instance-level-pile-level-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>let’s look at the pile-level data directly to evaluate the true positive detections, omissions (false negatives), and commissions (false positives)</p>
<p>let’s quickly look at the IoU values on the true positives</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="method-validation-bhef-machine-piles.html#cb654-1" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb654-2"><a href="method-validation-bhef-machine-piles.html#cb654-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(match_grp<span class="sc">==</span><span class="st">&quot;true positive&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb654-3"><a href="method-validation-bhef-machine-piles.html#cb654-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(iou) <span class="sc">%&gt;%</span> </span>
<span id="cb654-4"><a href="method-validation-bhef-machine-piles.html#cb654-4" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       iou        
##  Min.   :0.4070  
##  1st Qu.:0.7985  
##  Median :0.8406  
##  Mean   :0.8256  
##  3rd Qu.:0.9006  
##  Max.   :0.9211</code></pre>
<p>for the majority (i.e. &gt;95%) of matches, the IoU was above 71.0%</p>
<p>here is the distribution of IoU for those matches</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="method-validation-bhef-machine-piles.html#cb656-1" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb656-2"><a href="method-validation-bhef-machine-piles.html#cb656-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(match_grp<span class="sc">==</span><span class="st">&quot;true positive&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb656-3"><a href="method-validation-bhef-machine-piles.html#cb656-3" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> iou, <span class="at">color =</span> match_grp, <span class="at">fill =</span> match_grp)) <span class="sc">+</span></span>
<span id="cb656-4"><a href="method-validation-bhef-machine-piles.html#cb656-4" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled)), <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb656-5"><a href="method-validation-bhef-machine-piles.html#cb656-5" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values=</span>pal_match_grp) <span class="sc">+</span></span>
<span id="cb656-6"><a href="method-validation-bhef-machine-piles.html#cb656-6" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values=</span>pal_match_grp) <span class="sc">+</span></span>
<span id="cb656-7"><a href="method-validation-bhef-machine-piles.html#cb656-7" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb656-8"><a href="method-validation-bhef-machine-piles.html#cb656-8" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb656-9"><a href="method-validation-bhef-machine-piles.html#cb656-9" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb656-10"><a href="method-validation-bhef-machine-piles.html#cb656-10" tabindex="-1"></a>    <span class="at">color=</span><span class="st">&quot;&quot;</span>,<span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span><span class="st">&quot;IoU of correct precitions&quot;</span></span>
<span id="cb656-11"><a href="method-validation-bhef-machine-piles.html#cb656-11" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb656-12"><a href="method-validation-bhef-machine-piles.html#cb656-12" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb656-13"><a href="method-validation-bhef-machine-piles.html#cb656-13" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb656-14"><a href="method-validation-bhef-machine-piles.html#cb656-14" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb656-15"><a href="method-validation-bhef-machine-piles.html#cb656-15" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb656-16"><a href="method-validation-bhef-machine-piles.html#cb656-16" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-595-1.png" width="1008" /></p>
<p>is there a difference between the image-annotated pile sizes of the true positive detections and the omissions (false negative)?</p>
<p>let’s compare the image-annotated area and diameter for omissions and true positives since those measurements exist for both sets</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="method-validation-bhef-machine-piles.html#cb657-1" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb657-2"><a href="method-validation-bhef-machine-piles.html#cb657-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(match_grp<span class="sc">!=</span><span class="st">&quot;commission&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb657-3"><a href="method-validation-bhef-machine-piles.html#cb657-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(pile_id,match_grp,gt_diameter_m,gt_area_m2) <span class="sc">%&gt;%</span> </span>
<span id="cb657-4"><a href="method-validation-bhef-machine-piles.html#cb657-4" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(pile_id,match_grp)) <span class="sc">%&gt;%</span> </span>
<span id="cb657-5"><a href="method-validation-bhef-machine-piles.html#cb657-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb657-6"><a href="method-validation-bhef-machine-piles.html#cb657-6" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">factor</span>(</span>
<span id="cb657-7"><a href="method-validation-bhef-machine-piles.html#cb657-7" tabindex="-1"></a>      name</span>
<span id="cb657-8"><a href="method-validation-bhef-machine-piles.html#cb657-8" tabindex="-1"></a>      , <span class="at">ordered =</span> T</span>
<span id="cb657-9"><a href="method-validation-bhef-machine-piles.html#cb657-9" tabindex="-1"></a>      , <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;gt_diameter_m&quot;</span>,<span class="st">&quot;gt_area_m2&quot;</span>)</span>
<span id="cb657-10"><a href="method-validation-bhef-machine-piles.html#cb657-10" tabindex="-1"></a>      , <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb657-11"><a href="method-validation-bhef-machine-piles.html#cb657-11" tabindex="-1"></a>        <span class="st">&quot;image annotated diameter (m)&quot;</span></span>
<span id="cb657-12"><a href="method-validation-bhef-machine-piles.html#cb657-12" tabindex="-1"></a>        , <span class="st">&quot;image annotated area (m2)&quot;</span></span>
<span id="cb657-13"><a href="method-validation-bhef-machine-piles.html#cb657-13" tabindex="-1"></a>      )</span>
<span id="cb657-14"><a href="method-validation-bhef-machine-piles.html#cb657-14" tabindex="-1"></a>    )</span>
<span id="cb657-15"><a href="method-validation-bhef-machine-piles.html#cb657-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb657-16"><a href="method-validation-bhef-machine-piles.html#cb657-16" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">color =</span> match_grp, <span class="at">fill =</span> match_grp)) <span class="sc">+</span></span>
<span id="cb657-17"><a href="method-validation-bhef-machine-piles.html#cb657-17" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled)), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb657-18"><a href="method-validation-bhef-machine-piles.html#cb657-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(<span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(name), <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span>) <span class="sc">+</span></span>
<span id="cb657-19"><a href="method-validation-bhef-machine-piles.html#cb657-19" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values=</span>pal_match_grp) <span class="sc">+</span></span>
<span id="cb657-20"><a href="method-validation-bhef-machine-piles.html#cb657-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values=</span>pal_match_grp) <span class="sc">+</span></span>
<span id="cb657-21"><a href="method-validation-bhef-machine-piles.html#cb657-21" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb657-22"><a href="method-validation-bhef-machine-piles.html#cb657-22" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb657-23"><a href="method-validation-bhef-machine-piles.html#cb657-23" tabindex="-1"></a>    <span class="at">color=</span><span class="st">&quot;&quot;</span>,<span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span><span class="st">&quot;&quot;</span></span>
<span id="cb657-24"><a href="method-validation-bhef-machine-piles.html#cb657-24" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;ground truth form measurements&quot;</span></span>
<span id="cb657-25"><a href="method-validation-bhef-machine-piles.html#cb657-25" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb657-26"><a href="method-validation-bhef-machine-piles.html#cb657-26" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb657-27"><a href="method-validation-bhef-machine-piles.html#cb657-27" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb657-28"><a href="method-validation-bhef-machine-piles.html#cb657-28" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span></span>
<span id="cb657-29"><a href="method-validation-bhef-machine-piles.html#cb657-29" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb657-30"><a href="method-validation-bhef-machine-piles.html#cb657-30" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-596-1.png" width="1008" /></p>
<p>wow! note that we did not inspect the image-annotated ground truth measurement data prior to implementing our remote-sensing based pile detection methodology. we purposefully did not look at this data until after making the predictions because we wanted to set up our remote sensing pile detection method without as if we did not measure a single pile in the field so as to not bias our implementation of the method. to implement this remote sensing method slash pile detection framework in practice, we would likely not have any field-measured data on pile structure and if we did it would only be for a very small sample of piles. remember, the entire objective of creating this method is so that time in the field can be minimized to the time needed to visually assess the treatment implementation to acquire quick observational anecdotes and potentially measure some sample piles and then fly a UAS data collection mission to get the data needed to implement this method. compare that minimal time to the traditional, field-based method of slash pile identification and measurement which is much more costly in terms of time and personnel needed.</p>
<p>there are so few omissions (i.e. FPs) for this validation data set that it’s difficult to make any inference from this comparison</p>
<p>let’s now look at the summary stats of ground truth piles</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="method-validation-bhef-machine-piles.html#cb658-1" tabindex="-1"></a><span class="fu">kbl_form_sum_stats</span>(</span>
<span id="cb658-2"><a href="method-validation-bhef-machine-piles.html#cb658-2" tabindex="-1"></a>  bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">contains</span>(<span class="st">&quot;volume_m3&quot;</span>))</span>
<span id="cb658-3"><a href="method-validation-bhef-machine-piles.html#cb658-3" tabindex="-1"></a>  , <span class="at">caption =</span> <span class="st">&quot;Ground Truth Piles: summary statistics for form measurements&lt;br&gt;BHEF ponderosa pine validation site&quot;</span></span>
<span id="cb658-4"><a href="method-validation-bhef-machine-piles.html#cb658-4" tabindex="-1"></a>)</span></code></pre></div>
<table class="table" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-597">Table 11.3: </span>Ground Truth Piles: summary statistics for form measurements<br>BHEF ponderosa pine validation site
</caption>
<thead>
<tr>
<th style="text-align:right;">
# piles
</th>
<th style="text-align:left;">
Metric
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std Dev
</th>
<th style="text-align:left;">
q 10%
</th>
<th style="text-align:left;">
Median
</th>
<th style="text-align:left;">
q 90%
</th>
<th style="text-align:left;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;vertical-align: top !important;" rowspan="2">
26
</td>
<td style="text-align:left;">
Diameter m (image)
</td>
<td style="text-align:left;">
21.0
</td>
<td style="text-align:left;">
6.5
</td>
<td style="text-align:left;">
14.3
</td>
<td style="text-align:left;">
20.8
</td>
<td style="text-align:left;">
27.7
</td>
<td style="text-align:left;">
13.3—38.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Area m<sup>2</sup> (image)
</td>
<td style="text-align:left;">
199.9
</td>
<td style="text-align:left;">
85.8
</td>
<td style="text-align:left;">
106.7
</td>
<td style="text-align:left;">
200.3
</td>
<td style="text-align:left;">
296.3
</td>
<td style="text-align:left;">
76.0—408.7
</td>
</tr>
</tbody>
</table>
<p>and let’s look at the summary stats of the predicted piles</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="method-validation-bhef-machine-piles.html#cb659-1" tabindex="-1"></a><span class="fu">kbl_form_sum_stats</span>(</span>
<span id="cb659-2"><a href="method-validation-bhef-machine-piles.html#cb659-2" tabindex="-1"></a>  final_predicted_slash_piles <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(is_in_stand)</span>
<span id="cb659-3"><a href="method-validation-bhef-machine-piles.html#cb659-3" tabindex="-1"></a>  , <span class="at">caption =</span> <span class="st">&quot;Predicted Piles: summary statistics for form measurements&lt;br&gt;BHEF ponderosa pine validation site&quot;</span></span>
<span id="cb659-4"><a href="method-validation-bhef-machine-piles.html#cb659-4" tabindex="-1"></a>)</span></code></pre></div>
<table class="table" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-598">Table 11.4: </span>Predicted Piles: summary statistics for form measurements<br>BHEF ponderosa pine validation site
</caption>
<thead>
<tr>
<th style="text-align:right;">
# piles
</th>
<th style="text-align:left;">
Metric
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std Dev
</th>
<th style="text-align:left;">
q 10%
</th>
<th style="text-align:left;">
Median
</th>
<th style="text-align:left;">
q 90%
</th>
<th style="text-align:left;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;vertical-align: top !important;" rowspan="4">
27
</td>
<td style="text-align:left;">
Height m
</td>
<td style="text-align:left;">
2.7
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.1
</td>
<td style="text-align:left;">
2.7
</td>
<td style="text-align:left;">
3.3
</td>
<td style="text-align:left;">
1.9—4.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Diameter m
</td>
<td style="text-align:left;">
20.0
</td>
<td style="text-align:left;">
5.4
</td>
<td style="text-align:left;">
14.2
</td>
<td style="text-align:left;">
20.0
</td>
<td style="text-align:left;">
26.4
</td>
<td style="text-align:left;">
12.6—34.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Area m<sup>2</sup>
</td>
<td style="text-align:left;">
178.1
</td>
<td style="text-align:left;">
76.8
</td>
<td style="text-align:left;">
89.4
</td>
<td style="text-align:left;">
164.8
</td>
<td style="text-align:left;">
265.7
</td>
<td style="text-align:left;">
73.8—412.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Volume m<sup>3</sup>
</td>
<td style="text-align:left;">
187.6
</td>
<td style="text-align:left;">
104.5
</td>
<td style="text-align:left;">
79.3
</td>
<td style="text-align:left;">
157.2
</td>
<td style="text-align:left;">
359.6
</td>
<td style="text-align:left;">
51.6—459.4
</td>
</tr>
</tbody>
</table>
<p>let’s look at some examples on our RGB image</p>
<p><strong>true positive matches (correct predictions)</strong></p>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="method-validation-bhef-machine-piles.html#cb660-1" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span></span>
<span id="cb660-2"><a href="method-validation-bhef-machine-piles.html#cb660-2" tabindex="-1"></a>  <span class="fu">which</span>(ground_truth_prediction_match_ans<span class="sc">$</span>match_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;true positive&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb660-3"><a href="method-validation-bhef-machine-piles.html#cb660-3" tabindex="-1"></a>  <span class="fu">sample</span>( <span class="fu">min</span>(<span class="dv">20</span>,agg_ground_truth_match_ans<span class="sc">$</span>tp_n) ) <span class="sc">%&gt;%</span> </span>
<span id="cb660-4"><a href="method-validation-bhef-machine-piles.html#cb660-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb660-5"><a href="method-validation-bhef-machine-piles.html#cb660-5" tabindex="-1"></a>    dta <span class="ot">&lt;-</span> ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb660-6"><a href="method-validation-bhef-machine-piles.html#cb660-6" tabindex="-1"></a>    gt <span class="ot">&lt;-</span> bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span>dta<span class="sc">$</span>pile_id)</span>
<span id="cb660-7"><a href="method-validation-bhef-machine-piles.html#cb660-7" tabindex="-1"></a>    pr <span class="ot">&lt;-</span> final_predicted_slash_piles <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pred_id<span class="sc">==</span>dta<span class="sc">$</span>pred_id)</span>
<span id="cb660-8"><a href="method-validation-bhef-machine-piles.html#cb660-8" tabindex="-1"></a>    <span class="co">#plt</span></span>
<span id="cb660-9"><a href="method-validation-bhef-machine-piles.html#cb660-9" tabindex="-1"></a>    <span class="fu">ortho_plt_fn</span>(<span class="at">my_ortho_rast=</span>bhef_rgb_rast, <span class="at">stand=</span>sf<span class="sc">::</span><span class="fu">st_union</span>(gt,pr), <span class="at">buffer=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb660-10"><a href="method-validation-bhef-machine-piles.html#cb660-10" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> gt, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb660-11"><a href="method-validation-bhef-machine-piles.html#cb660-11" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> pr, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;brown&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.5</span>)</span>
<span id="cb660-12"><a href="method-validation-bhef-machine-piles.html#cb660-12" tabindex="-1"></a>  })</span>
<span id="cb660-13"><a href="method-validation-bhef-machine-piles.html#cb660-13" tabindex="-1"></a><span class="co"># combine</span></span>
<span id="cb660-14"><a href="method-validation-bhef-machine-piles.html#cb660-14" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(</span>
<span id="cb660-15"><a href="method-validation-bhef-machine-piles.html#cb660-15" tabindex="-1"></a>  plts_temp</span>
<span id="cb660-16"><a href="method-validation-bhef-machine-piles.html#cb660-16" tabindex="-1"></a>  , <span class="at">ncol =</span> <span class="dv">4</span></span>
<span id="cb660-17"><a href="method-validation-bhef-machine-piles.html#cb660-17" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-599-1.png" width="1008" /></p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="method-validation-bhef-machine-piles.html#cb661-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/BHEF_202306/bhef_truepositives.jpg&quot;</span>, <span class="at">height =</span> <span class="dv">11</span>, <span class="at">width =</span> <span class="fl">8.5</span>)</span></code></pre></div>
<p>oh snap! there’s a pile with a vehicle next to it to provide context on the size of these massive piles. let’s plot that with details on it’s form measurements</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="method-validation-bhef-machine-piles.html#cb662-1" tabindex="-1"></a><span class="co">#plt</span></span>
<span id="cb662-2"><a href="method-validation-bhef-machine-piles.html#cb662-2" tabindex="-1"></a><span class="fu">ortho_plt_fn</span>(</span>
<span id="cb662-3"><a href="method-validation-bhef-machine-piles.html#cb662-3" tabindex="-1"></a>  <span class="at">my_ortho_rast=</span>bhef_rgb_rast</span>
<span id="cb662-4"><a href="method-validation-bhef-machine-piles.html#cb662-4" tabindex="-1"></a>  , <span class="at">stand=</span></span>
<span id="cb662-5"><a href="method-validation-bhef-machine-piles.html#cb662-5" tabindex="-1"></a>    bhef_slash_piles_polys <span class="sc">%&gt;%</span> </span>
<span id="cb662-6"><a href="method-validation-bhef-machine-piles.html#cb662-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span><span class="dv">8</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb662-7"><a href="method-validation-bhef-machine-piles.html#cb662-7" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_union</span>()</span>
<span id="cb662-8"><a href="method-validation-bhef-machine-piles.html#cb662-8" tabindex="-1"></a>  , <span class="at">buffer=</span><span class="dv">9</span></span>
<span id="cb662-9"><a href="method-validation-bhef-machine-piles.html#cb662-9" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb662-10"><a href="method-validation-bhef-machine-piles.html#cb662-10" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span><span class="dv">8</span>), <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb662-11"><a href="method-validation-bhef-machine-piles.html#cb662-11" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb662-12"><a href="method-validation-bhef-machine-piles.html#cb662-12" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(</span>
<span id="cb662-13"><a href="method-validation-bhef-machine-piles.html#cb662-13" tabindex="-1"></a>      <span class="co"># &quot;pile ID: &quot;,8</span></span>
<span id="cb662-14"><a href="method-validation-bhef-machine-piles.html#cb662-14" tabindex="-1"></a>      <span class="st">&quot;area: &quot;</span>, bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span><span class="dv">8</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">pull</span>(image_gt_area_m2) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">comma</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>,<span class="at">suffix =</span> <span class="st">&quot; m2&quot;</span>)</span>
<span id="cb662-15"><a href="method-validation-bhef-machine-piles.html#cb662-15" tabindex="-1"></a>      , <span class="st">&quot;</span><span class="sc">\n</span><span class="st"> diameter: &quot;</span>, bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span><span class="dv">8</span>) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">pull</span>(image_gt_diameter_m) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">comma</span>(<span class="at">accuracy =</span> <span class="fl">0.1</span>,<span class="at">suffix =</span> <span class="st">&quot; m&quot;</span>)</span>
<span id="cb662-16"><a href="method-validation-bhef-machine-piles.html#cb662-16" tabindex="-1"></a>    )</span>
<span id="cb662-17"><a href="method-validation-bhef-machine-piles.html#cb662-17" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb662-18"><a href="method-validation-bhef-machine-piles.html#cb662-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">plot.subtitle =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-601-1.png" width="1008" /></p>
<p>that thing is massive…</p>
<p><strong>omissions (false negatives)</strong></p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="method-validation-bhef-machine-piles.html#cb663-1" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span></span>
<span id="cb663-2"><a href="method-validation-bhef-machine-piles.html#cb663-2" tabindex="-1"></a>  <span class="fu">which</span>(ground_truth_prediction_match_ans<span class="sc">$</span>match_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;omission&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb663-3"><a href="method-validation-bhef-machine-piles.html#cb663-3" tabindex="-1"></a>  <span class="co"># sample( min(16,agg_ground_truth_match_ans$fn_n) ) %&gt;% </span></span>
<span id="cb663-4"><a href="method-validation-bhef-machine-piles.html#cb663-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb663-5"><a href="method-validation-bhef-machine-piles.html#cb663-5" tabindex="-1"></a>    dta <span class="ot">&lt;-</span> ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb663-6"><a href="method-validation-bhef-machine-piles.html#cb663-6" tabindex="-1"></a>    gt <span class="ot">&lt;-</span> bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span>dta<span class="sc">$</span>pile_id)</span>
<span id="cb663-7"><a href="method-validation-bhef-machine-piles.html#cb663-7" tabindex="-1"></a></span>
<span id="cb663-8"><a href="method-validation-bhef-machine-piles.html#cb663-8" tabindex="-1"></a>    <span class="co">#plt</span></span>
<span id="cb663-9"><a href="method-validation-bhef-machine-piles.html#cb663-9" tabindex="-1"></a>    <span class="fu">ortho_plt_fn</span>(<span class="at">my_ortho_rast=</span>bhef_rgb_rast, <span class="at">stand=</span>sf<span class="sc">::</span><span class="fu">st_union</span>(gt), <span class="at">buffer=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb663-10"><a href="method-validation-bhef-machine-piles.html#cb663-10" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> gt, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb663-11"><a href="method-validation-bhef-machine-piles.html#cb663-11" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">&quot;pile ID: &quot;</span>,dta<span class="sc">$</span>pile_id))</span>
<span id="cb663-12"><a href="method-validation-bhef-machine-piles.html#cb663-12" tabindex="-1"></a>  })</span>
<span id="cb663-13"><a href="method-validation-bhef-machine-piles.html#cb663-13" tabindex="-1"></a><span class="co"># combine</span></span>
<span id="cb663-14"><a href="method-validation-bhef-machine-piles.html#cb663-14" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(</span>
<span id="cb663-15"><a href="method-validation-bhef-machine-piles.html#cb663-15" tabindex="-1"></a>  plts_temp</span>
<span id="cb663-16"><a href="method-validation-bhef-machine-piles.html#cb663-16" tabindex="-1"></a>  , <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb663-17"><a href="method-validation-bhef-machine-piles.html#cb663-17" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-602-1.png" width="1008" /></p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="method-validation-bhef-machine-piles.html#cb664-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/BHEF_202306/bhef_omission.jpg&quot;</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="fl">8.5</span>)</span></code></pre></div>
<p>let’s add the CHM to that plot to see if it helps shed light on why these were missed</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="method-validation-bhef-machine-piles.html#cb665-1" tabindex="-1"></a><span class="co"># plot RGB + CHM</span></span>
<span id="cb665-2"><a href="method-validation-bhef-machine-piles.html#cb665-2" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span></span>
<span id="cb665-3"><a href="method-validation-bhef-machine-piles.html#cb665-3" tabindex="-1"></a>  <span class="fu">which</span>(ground_truth_prediction_match_ans<span class="sc">$</span>match_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;omission&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb665-4"><a href="method-validation-bhef-machine-piles.html#cb665-4" tabindex="-1"></a>  <span class="co"># sample(1) %&gt;%</span></span>
<span id="cb665-5"><a href="method-validation-bhef-machine-piles.html#cb665-5" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb665-6"><a href="method-validation-bhef-machine-piles.html#cb665-6" tabindex="-1"></a>    dta <span class="ot">&lt;-</span> ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb665-7"><a href="method-validation-bhef-machine-piles.html#cb665-7" tabindex="-1"></a>    gt <span class="ot">&lt;-</span> bhef_slash_piles_polys <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pile_id<span class="sc">==</span>dta<span class="sc">$</span>pile_id)</span>
<span id="cb665-8"><a href="method-validation-bhef-machine-piles.html#cb665-8" tabindex="-1"></a>    <span class="co">#plt</span></span>
<span id="cb665-9"><a href="method-validation-bhef-machine-piles.html#cb665-9" tabindex="-1"></a>    <span class="fu">ortho_plt_fn</span>(<span class="at">my_ortho_rast=</span>bhef_rgb_rast, <span class="at">stand=</span>sf<span class="sc">::</span><span class="fu">st_union</span>(gt), <span class="at">buffer=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb665-10"><a href="method-validation-bhef-machine-piles.html#cb665-10" tabindex="-1"></a>      ggnewscale<span class="sc">::</span><span class="fu">new_scale_fill</span>() <span class="sc">+</span></span>
<span id="cb665-11"><a href="method-validation-bhef-machine-piles.html#cb665-11" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>(</span>
<span id="cb665-12"><a href="method-validation-bhef-machine-piles.html#cb665-12" tabindex="-1"></a>        <span class="at">data =</span> chm_rast_stand <span class="sc">%&gt;%</span> </span>
<span id="cb665-13"><a href="method-validation-bhef-machine-piles.html#cb665-13" tabindex="-1"></a>          terra<span class="sc">::</span><span class="fu">crop</span>(</span>
<span id="cb665-14"><a href="method-validation-bhef-machine-piles.html#cb665-14" tabindex="-1"></a>            sf<span class="sc">::</span><span class="fu">st_union</span>(gt) <span class="sc">%&gt;%</span> </span>
<span id="cb665-15"><a href="method-validation-bhef-machine-piles.html#cb665-15" tabindex="-1"></a>              sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(chm_rast_stand)) <span class="sc">%&gt;%</span> </span>
<span id="cb665-16"><a href="method-validation-bhef-machine-piles.html#cb665-16" tabindex="-1"></a>              terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb665-17"><a href="method-validation-bhef-machine-piles.html#cb665-17" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb665-18"><a href="method-validation-bhef-machine-piles.html#cb665-18" tabindex="-1"></a>          terra<span class="sc">::</span><span class="fu">mask</span>(</span>
<span id="cb665-19"><a href="method-validation-bhef-machine-piles.html#cb665-19" tabindex="-1"></a>            sf<span class="sc">::</span><span class="fu">st_union</span>(gt) <span class="sc">%&gt;%</span> </span>
<span id="cb665-20"><a href="method-validation-bhef-machine-piles.html#cb665-20" tabindex="-1"></a>              sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(chm_rast_stand)) <span class="sc">%&gt;%</span> </span>
<span id="cb665-21"><a href="method-validation-bhef-machine-piles.html#cb665-21" tabindex="-1"></a>              terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb665-22"><a href="method-validation-bhef-machine-piles.html#cb665-22" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb665-23"><a href="method-validation-bhef-machine-piles.html#cb665-23" tabindex="-1"></a>          <span class="co"># slice the chm below our desired height</span></span>
<span id="cb665-24"><a href="method-validation-bhef-machine-piles.html#cb665-24" tabindex="-1"></a>          <span class="co"># this is what slash_pile_detect_watershed() does</span></span>
<span id="cb665-25"><a href="method-validation-bhef-machine-piles.html#cb665-25" tabindex="-1"></a>          <span class="co"># terra::clamp(upper = 2.3, lower = 0, values = F) %&gt;%</span></span>
<span id="cb665-26"><a href="method-validation-bhef-machine-piles.html#cb665-26" tabindex="-1"></a>          terra<span class="sc">::</span><span class="fu">as.data.frame</span>(<span class="at">xy=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb665-27"><a href="method-validation-bhef-machine-piles.html#cb665-27" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">f=</span><span class="dv">3</span>)</span>
<span id="cb665-28"><a href="method-validation-bhef-machine-piles.html#cb665-28" tabindex="-1"></a>        , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y,<span class="at">fill=</span>f)</span>
<span id="cb665-29"><a href="method-validation-bhef-machine-piles.html#cb665-29" tabindex="-1"></a>        , <span class="at">alpha =</span> <span class="fl">0.5</span></span>
<span id="cb665-30"><a href="method-validation-bhef-machine-piles.html#cb665-30" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb665-31"><a href="method-validation-bhef-machine-piles.html#cb665-31" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">na.value =</span> <span class="st">&quot;gray&quot;</span>,<span class="at">name =</span> <span class="st">&quot;CHM (m)&quot;</span>) <span class="sc">+</span></span>
<span id="cb665-32"><a href="method-validation-bhef-machine-piles.html#cb665-32" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> gt, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb665-33"><a href="method-validation-bhef-machine-piles.html#cb665-33" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb665-34"><a href="method-validation-bhef-machine-piles.html#cb665-34" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="fu">paste0</span>(</span>
<span id="cb665-35"><a href="method-validation-bhef-machine-piles.html#cb665-35" tabindex="-1"></a>          <span class="st">&quot;pile ID: &quot;</span>, dta<span class="sc">$</span>pile_id</span>
<span id="cb665-36"><a href="method-validation-bhef-machine-piles.html#cb665-36" tabindex="-1"></a>          , <span class="st">&quot;</span><span class="sc">\n</span><span class="st">GT area: &quot;</span>, <span class="fu">round</span>(dta<span class="sc">$</span>gt_area_m2,<span class="dv">1</span>)</span>
<span id="cb665-37"><a href="method-validation-bhef-machine-piles.html#cb665-37" tabindex="-1"></a>          <span class="co"># , &quot; | Pred ht: &quot;, round(dta$pred_height_m,1)</span></span>
<span id="cb665-38"><a href="method-validation-bhef-machine-piles.html#cb665-38" tabindex="-1"></a>          , <span class="st">&quot;</span><span class="sc">\n</span><span class="st">GT dia: &quot;</span>, <span class="fu">round</span>(dta<span class="sc">$</span>gt_diameter_m,<span class="dv">1</span>)</span>
<span id="cb665-39"><a href="method-validation-bhef-machine-piles.html#cb665-39" tabindex="-1"></a>          <span class="co"># , &quot; | Pred dia: &quot;, round(dta$pred_diameter_m,1)</span></span>
<span id="cb665-40"><a href="method-validation-bhef-machine-piles.html#cb665-40" tabindex="-1"></a>        )</span>
<span id="cb665-41"><a href="method-validation-bhef-machine-piles.html#cb665-41" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb665-42"><a href="method-validation-bhef-machine-piles.html#cb665-42" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>),<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>))</span>
<span id="cb665-43"><a href="method-validation-bhef-machine-piles.html#cb665-43" tabindex="-1"></a>  })</span>
<span id="cb665-44"><a href="method-validation-bhef-machine-piles.html#cb665-44" tabindex="-1"></a><span class="co"># plts_temp</span></span>
<span id="cb665-45"><a href="method-validation-bhef-machine-piles.html#cb665-45" tabindex="-1"></a><span class="co"># combine</span></span>
<span id="cb665-46"><a href="method-validation-bhef-machine-piles.html#cb665-46" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(</span>
<span id="cb665-47"><a href="method-validation-bhef-machine-piles.html#cb665-47" tabindex="-1"></a>  plts_temp</span>
<span id="cb665-48"><a href="method-validation-bhef-machine-piles.html#cb665-48" tabindex="-1"></a>  , <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb665-49"><a href="method-validation-bhef-machine-piles.html#cb665-49" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-604-1.png" width="1008" /></p>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="method-validation-bhef-machine-piles.html#cb666-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/BHEF_202306/bhef_omission_chm.jpg&quot;</span>, <span class="at">height =</span> <span class="fl">6.6</span>, <span class="at">width =</span> <span class="fl">8.5</span>)</span></code></pre></div>
<p>The review of the image-annotated footprints for all False Negative (FN) piles confirmed that none were filtered out based on area thresholds, as their footprints fell within the defined search range. The omissions stemmed from either incomplete data capture or issues within the segmentation and filtering pipeline.Two of the missed piles show incomplete CHM data within their footprints. This lack of data can be attributed to three potential causes: insufficient SfM point cloud density; the Cloth Simulation Filter (CSF), used to derive the Digital Terrain Model (DTM), incorrectly classified the pile area as ground; or the piles were constructed in a sprawling manner with limited vertical aggregation, meaning the resulting low CHM height values failed to meet the required minimum height thresholds (<code>min_ht_m</code>).</p>
<p>The remaining missed piles, which had full CHM coverage, visually displayed more than one distinct vertical peak. The CHM-based watershed segmentation approach may have interpreted these multiple peaks as separate, unique objects and split the actual single large pile into multiple candidate segments. Our structural detection methodology includes a smoothing option (<code>smooth_segs</code>) which we used for this validation data (set to <code>TRUE</code>). This smoothing option includes a step designed for shape refinement and overlap removal. Activating this parameter initiates a sequence: candidate segments that pass all size and shape checks first are combined if their perimeters touch but do not overlap. The combined shape is then smoothed using its convex hull to remove the “blocky” raster edges. Lastly, overlapping convex hull shapes are removed to prevent false positives from clustered small trees or shrubs. Given the distinct peaks in these FN piles, it is highly likely they were initially split by the watershed segmentation, and then one or more of the resulting smaller segments failed to meet the required size or shape thresholds. Because a significant area of the pile was removed in this filtering step, the remaining segments even if successfully combined were deemed insufficient in overall size (<code>min_area_m2</code>) to be retained in the final structural detection output.</p>
<p>now, let’s check out the predicted sizes of the commissions (false positives) compared to the predicted sizes of the predicted piles that were correctly matched with the ground truth data</p>
<p>let’s compare the <em>predicted</em> height, diameter, area for commissions and true positives since those measurements exist for both sets</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="method-validation-bhef-machine-piles.html#cb667-1" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb667-2"><a href="method-validation-bhef-machine-piles.html#cb667-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(match_grp<span class="sc">!=</span><span class="st">&quot;omission&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb667-3"><a href="method-validation-bhef-machine-piles.html#cb667-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(pile_id,match_grp,pred_diameter_m,pred_area_m2,pred_height_m) <span class="sc">%&gt;%</span> </span>
<span id="cb667-4"><a href="method-validation-bhef-machine-piles.html#cb667-4" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(pile_id,match_grp)) <span class="sc">%&gt;%</span> </span>
<span id="cb667-5"><a href="method-validation-bhef-machine-piles.html#cb667-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb667-6"><a href="method-validation-bhef-machine-piles.html#cb667-6" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">factor</span>(</span>
<span id="cb667-7"><a href="method-validation-bhef-machine-piles.html#cb667-7" tabindex="-1"></a>      name</span>
<span id="cb667-8"><a href="method-validation-bhef-machine-piles.html#cb667-8" tabindex="-1"></a>      , <span class="at">ordered =</span> T</span>
<span id="cb667-9"><a href="method-validation-bhef-machine-piles.html#cb667-9" tabindex="-1"></a>      , <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;pred_diameter_m&quot;</span>,<span class="st">&quot;pred_area_m2&quot;</span>,<span class="st">&quot;pred_height_m&quot;</span>)</span>
<span id="cb667-10"><a href="method-validation-bhef-machine-piles.html#cb667-10" tabindex="-1"></a>      , <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb667-11"><a href="method-validation-bhef-machine-piles.html#cb667-11" tabindex="-1"></a>        <span class="st">&quot;predicted diameter (m)&quot;</span></span>
<span id="cb667-12"><a href="method-validation-bhef-machine-piles.html#cb667-12" tabindex="-1"></a>        , <span class="st">&quot;predicted area (m2)&quot;</span></span>
<span id="cb667-13"><a href="method-validation-bhef-machine-piles.html#cb667-13" tabindex="-1"></a>        , <span class="st">&quot;predicted height (m)&quot;</span></span>
<span id="cb667-14"><a href="method-validation-bhef-machine-piles.html#cb667-14" tabindex="-1"></a>      )</span>
<span id="cb667-15"><a href="method-validation-bhef-machine-piles.html#cb667-15" tabindex="-1"></a>    )</span>
<span id="cb667-16"><a href="method-validation-bhef-machine-piles.html#cb667-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb667-17"><a href="method-validation-bhef-machine-piles.html#cb667-17" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">color =</span> match_grp, <span class="at">fill =</span> match_grp)) <span class="sc">+</span></span>
<span id="cb667-18"><a href="method-validation-bhef-machine-piles.html#cb667-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_density</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y=</span>ggplot2<span class="sc">::</span><span class="fu">after_stat</span>(scaled)), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb667-19"><a href="method-validation-bhef-machine-piles.html#cb667-19" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_grid</span>(<span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(name), <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span>) <span class="sc">+</span></span>
<span id="cb667-20"><a href="method-validation-bhef-machine-piles.html#cb667-20" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values=</span>pal_match_grp) <span class="sc">+</span></span>
<span id="cb667-21"><a href="method-validation-bhef-machine-piles.html#cb667-21" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values=</span>pal_match_grp) <span class="sc">+</span></span>
<span id="cb667-22"><a href="method-validation-bhef-machine-piles.html#cb667-22" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="cn">NULL</span>,<span class="at">breaks=</span><span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb667-23"><a href="method-validation-bhef-machine-piles.html#cb667-23" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">color=</span><span class="st">&quot;&quot;</span>,<span class="at">fill=</span><span class="st">&quot;&quot;</span>,<span class="at">x=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb667-24"><a href="method-validation-bhef-machine-piles.html#cb667-24" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb667-25"><a href="method-validation-bhef-machine-piles.html#cb667-25" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb667-26"><a href="method-validation-bhef-machine-piles.html#cb667-26" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span></span>
<span id="cb667-27"><a href="method-validation-bhef-machine-piles.html#cb667-27" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb667-28"><a href="method-validation-bhef-machine-piles.html#cb667-28" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-607-1.png" width="1008" /></p>
<p>this is interesting</p>
<p>let’s table the predicted form measurements</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="method-validation-bhef-machine-piles.html#cb668-1" tabindex="-1"></a>ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb668-2"><a href="method-validation-bhef-machine-piles.html#cb668-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(match_grp<span class="sc">!=</span><span class="st">&quot;omission&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb668-3"><a href="method-validation-bhef-machine-piles.html#cb668-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(pile_id,match_grp,pred_diameter_m,pred_area_m2,pred_height_m) <span class="sc">%&gt;%</span> </span>
<span id="cb668-4"><a href="method-validation-bhef-machine-piles.html#cb668-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(match_grp) <span class="sc">%&gt;%</span></span>
<span id="cb668-5"><a href="method-validation-bhef-machine-piles.html#cb668-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb668-6"><a href="method-validation-bhef-machine-piles.html#cb668-6" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb668-7"><a href="method-validation-bhef-machine-piles.html#cb668-7" tabindex="-1"></a>      <span class="fu">c</span>(pred_diameter_m,pred_area_m2,pred_height_m)</span>
<span id="cb668-8"><a href="method-validation-bhef-machine-piles.html#cb668-8" tabindex="-1"></a>      , <span class="at">.fns =</span> <span class="fu">list</span>(</span>
<span id="cb668-9"><a href="method-validation-bhef-machine-piles.html#cb668-9" tabindex="-1"></a>        <span class="at">mean =</span> <span class="sc">~</span><span class="fu">mean</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb668-10"><a href="method-validation-bhef-machine-piles.html#cb668-10" tabindex="-1"></a>        , <span class="at">sd =</span> <span class="sc">~</span><span class="fu">sd</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb668-11"><a href="method-validation-bhef-machine-piles.html#cb668-11" tabindex="-1"></a>        , <span class="at">q10 =</span> <span class="sc">~</span><span class="fu">quantile</span>(.x,<span class="at">na.rm=</span>T,<span class="at">probs=</span><span class="fl">0.1</span>)</span>
<span id="cb668-12"><a href="method-validation-bhef-machine-piles.html#cb668-12" tabindex="-1"></a>        , <span class="at">q50 =</span> <span class="sc">~</span><span class="fu">quantile</span>(.x,<span class="at">na.rm=</span>T,<span class="at">probs=</span><span class="fl">0.5</span>)</span>
<span id="cb668-13"><a href="method-validation-bhef-machine-piles.html#cb668-13" tabindex="-1"></a>        , <span class="at">q90 =</span> <span class="sc">~</span><span class="fu">quantile</span>(.x,<span class="at">na.rm=</span>T,<span class="at">probs=</span><span class="fl">0.9</span>)</span>
<span id="cb668-14"><a href="method-validation-bhef-machine-piles.html#cb668-14" tabindex="-1"></a>        , <span class="at">min =</span> <span class="sc">~</span><span class="fu">min</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb668-15"><a href="method-validation-bhef-machine-piles.html#cb668-15" tabindex="-1"></a>        , <span class="at">max =</span> <span class="sc">~</span><span class="fu">max</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb668-16"><a href="method-validation-bhef-machine-piles.html#cb668-16" tabindex="-1"></a>      )</span>
<span id="cb668-17"><a href="method-validation-bhef-machine-piles.html#cb668-17" tabindex="-1"></a>    )</span>
<span id="cb668-18"><a href="method-validation-bhef-machine-piles.html#cb668-18" tabindex="-1"></a>    , <span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>()</span>
<span id="cb668-19"><a href="method-validation-bhef-machine-piles.html#cb668-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb668-20"><a href="method-validation-bhef-machine-piles.html#cb668-20" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb668-21"><a href="method-validation-bhef-machine-piles.html#cb668-21" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>( match_grp,n)) <span class="sc">%&gt;%</span> </span>
<span id="cb668-22"><a href="method-validation-bhef-machine-piles.html#cb668-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb668-23"><a href="method-validation-bhef-machine-piles.html#cb668-23" tabindex="-1"></a>    <span class="at">agg =</span> stringr<span class="sc">::</span><span class="fu">word</span>(name,<span class="sc">-</span><span class="dv">1</span>,<span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb668-24"><a href="method-validation-bhef-machine-piles.html#cb668-24" tabindex="-1"></a>    , <span class="at">metric =</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(name, <span class="fu">paste0</span>(<span class="st">&quot;_&quot;</span>,agg))</span>
<span id="cb668-25"><a href="method-validation-bhef-machine-piles.html#cb668-25" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb668-26"><a href="method-validation-bhef-machine-piles.html#cb668-26" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>name) <span class="sc">%&gt;%</span> </span>
<span id="cb668-27"><a href="method-validation-bhef-machine-piles.html#cb668-27" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb668-28"><a href="method-validation-bhef-machine-piles.html#cb668-28" tabindex="-1"></a>    <span class="at">value =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb668-29"><a href="method-validation-bhef-machine-piles.html#cb668-29" tabindex="-1"></a>      T <span class="sc">~</span> scales<span class="sc">::</span><span class="fu">comma</span>(value,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb668-30"><a href="method-validation-bhef-machine-piles.html#cb668-30" tabindex="-1"></a>    )</span>
<span id="cb668-31"><a href="method-validation-bhef-machine-piles.html#cb668-31" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb668-32"><a href="method-validation-bhef-machine-piles.html#cb668-32" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> agg, <span class="at">values_from =</span> value) <span class="sc">%&gt;%</span> </span>
<span id="cb668-33"><a href="method-validation-bhef-machine-piles.html#cb668-33" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb668-34"><a href="method-validation-bhef-machine-piles.html#cb668-34" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">paste0</span>(min, <span class="st">&quot;—&quot;</span>, max)</span>
<span id="cb668-35"><a href="method-validation-bhef-machine-piles.html#cb668-35" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb668-36"><a href="method-validation-bhef-machine-piles.html#cb668-36" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>( match_grp, <span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb668-37"><a href="method-validation-bhef-machine-piles.html#cb668-37" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(n,min,max)) <span class="sc">%&gt;%</span> </span>
<span id="cb668-38"><a href="method-validation-bhef-machine-piles.html#cb668-38" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(match_grp) <span class="sc">%&gt;%</span> </span>
<span id="cb668-39"><a href="method-validation-bhef-machine-piles.html#cb668-39" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb668-40"><a href="method-validation-bhef-machine-piles.html#cb668-40" tabindex="-1"></a>    <span class="at">metric =</span> <span class="fu">factor</span>(</span>
<span id="cb668-41"><a href="method-validation-bhef-machine-piles.html#cb668-41" tabindex="-1"></a>      metric</span>
<span id="cb668-42"><a href="method-validation-bhef-machine-piles.html#cb668-42" tabindex="-1"></a>      , <span class="at">ordered =</span> T</span>
<span id="cb668-43"><a href="method-validation-bhef-machine-piles.html#cb668-43" tabindex="-1"></a>      , <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;pred_diameter_m&quot;</span>,<span class="st">&quot;pred_area_m2&quot;</span>,<span class="st">&quot;pred_height_m&quot;</span>)</span>
<span id="cb668-44"><a href="method-validation-bhef-machine-piles.html#cb668-44" tabindex="-1"></a>      , <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb668-45"><a href="method-validation-bhef-machine-piles.html#cb668-45" tabindex="-1"></a>        <span class="st">&quot;predicted diameter (m)&quot;</span></span>
<span id="cb668-46"><a href="method-validation-bhef-machine-piles.html#cb668-46" tabindex="-1"></a>        , <span class="st">&quot;predicted area (m2)&quot;</span></span>
<span id="cb668-47"><a href="method-validation-bhef-machine-piles.html#cb668-47" tabindex="-1"></a>        , <span class="st">&quot;predicted height (m)&quot;</span></span>
<span id="cb668-48"><a href="method-validation-bhef-machine-piles.html#cb668-48" tabindex="-1"></a>      )</span>
<span id="cb668-49"><a href="method-validation-bhef-machine-piles.html#cb668-49" tabindex="-1"></a>    )</span>
<span id="cb668-50"><a href="method-validation-bhef-machine-piles.html#cb668-50" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb668-51"><a href="method-validation-bhef-machine-piles.html#cb668-51" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb668-52"><a href="method-validation-bhef-machine-piles.html#cb668-52" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Predicted Piles: summary statistics for form measurements&quot;</span></span>
<span id="cb668-53"><a href="method-validation-bhef-machine-piles.html#cb668-53" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb668-54"><a href="method-validation-bhef-machine-piles.html#cb668-54" tabindex="-1"></a>      <span class="st">&quot;segmentation&lt;br&gt;classification&quot;</span>, <span class="st">&quot;Metric&quot;</span></span>
<span id="cb668-55"><a href="method-validation-bhef-machine-piles.html#cb668-55" tabindex="-1"></a>      , <span class="st">&quot;Mean&quot;</span></span>
<span id="cb668-56"><a href="method-validation-bhef-machine-piles.html#cb668-56" tabindex="-1"></a>      , <span class="st">&quot;Std Dev&quot;</span></span>
<span id="cb668-57"><a href="method-validation-bhef-machine-piles.html#cb668-57" tabindex="-1"></a>      , <span class="st">&quot;q 10%&quot;</span>, <span class="st">&quot;Median&quot;</span>, <span class="st">&quot;q 90%&quot;</span></span>
<span id="cb668-58"><a href="method-validation-bhef-machine-piles.html#cb668-58" tabindex="-1"></a>      , <span class="st">&quot;Range&quot;</span></span>
<span id="cb668-59"><a href="method-validation-bhef-machine-piles.html#cb668-59" tabindex="-1"></a>    )</span>
<span id="cb668-60"><a href="method-validation-bhef-machine-piles.html#cb668-60" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb668-61"><a href="method-validation-bhef-machine-piles.html#cb668-61" tabindex="-1"></a>    <span class="co"># , digits = 2</span></span>
<span id="cb668-62"><a href="method-validation-bhef-machine-piles.html#cb668-62" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb668-63"><a href="method-validation-bhef-machine-piles.html#cb668-63" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">13</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb668-64"><a href="method-validation-bhef-machine-piles.html#cb668-64" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<table class="table" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-608">Table 11.5: </span>Predicted Piles: summary statistics for form measurements
</caption>
<thead>
<tr>
<th style="text-align:left;">
segmentation<br>classification
</th>
<th style="text-align:left;">
Metric
</th>
<th style="text-align:left;">
Mean
</th>
<th style="text-align:left;">
Std Dev
</th>
<th style="text-align:left;">
q 10%
</th>
<th style="text-align:left;">
Median
</th>
<th style="text-align:left;">
q 90%
</th>
<th style="text-align:left;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
commission
</td>
<td style="text-align:left;">
predicted diameter (m)
</td>
<td style="text-align:left;">
18.5
</td>
<td style="text-align:left;">
5.0
</td>
<td style="text-align:left;">
15.0
</td>
<td style="text-align:left;">
15.4
</td>
<td style="text-align:left;">
24.1
</td>
<td style="text-align:left;">
14.7—26.2
</td>
</tr>
<tr>
<td style="text-align:left;">
predicted area (m2)
</td>
<td style="text-align:left;">
125.3
</td>
<td style="text-align:left;">
45.9
</td>
<td style="text-align:left;">
84.1
</td>
<td style="text-align:left;">
110.4
</td>
<td style="text-align:left;">
175.5
</td>
<td style="text-align:left;">
83.2—182.6
</td>
</tr>
<tr>
<td style="text-align:left;">
predicted height (m)
</td>
<td style="text-align:left;">
3.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.7
</td>
<td style="text-align:left;">
3.2
</td>
<td style="text-align:left;">
3.7
</td>
<td style="text-align:left;">
2.5—4.0
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="3">
true positive
</td>
<td style="text-align:left;">
predicted diameter (m)
</td>
<td style="text-align:left;">
20.3
</td>
<td style="text-align:left;">
5.5
</td>
<td style="text-align:left;">
14.2
</td>
<td style="text-align:left;">
20.2
</td>
<td style="text-align:left;">
26.7
</td>
<td style="text-align:left;">
12.6—34.5
</td>
</tr>
<tr>
<td style="text-align:left;">
predicted area (m2)
</td>
<td style="text-align:left;">
190.1
</td>
<td style="text-align:left;">
78.0
</td>
<td style="text-align:left;">
114.7
</td>
<td style="text-align:left;">
177.6
</td>
<td style="text-align:left;">
267.8
</td>
<td style="text-align:left;">
73.8—412.0
</td>
</tr>
<tr>
<td style="text-align:left;">
predicted height (m)
</td>
<td style="text-align:left;">
2.6
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.1
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
3.2
</td>
<td style="text-align:left;">
1.9—3.7
</td>
</tr>
</tbody>
</table>
<p>let’s look at some examples on our RGB image</p>
<p><strong>commissions (false positives)</strong></p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="method-validation-bhef-machine-piles.html#cb669-1" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span></span>
<span id="cb669-2"><a href="method-validation-bhef-machine-piles.html#cb669-2" tabindex="-1"></a>  <span class="fu">which</span>(ground_truth_prediction_match_ans<span class="sc">$</span>match_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;commission&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb669-3"><a href="method-validation-bhef-machine-piles.html#cb669-3" tabindex="-1"></a>  <span class="fu">sample</span>( <span class="fu">min</span>(<span class="dv">16</span>,agg_ground_truth_match_ans<span class="sc">$</span>fp_n) ) <span class="sc">%&gt;%</span> </span>
<span id="cb669-4"><a href="method-validation-bhef-machine-piles.html#cb669-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb669-5"><a href="method-validation-bhef-machine-piles.html#cb669-5" tabindex="-1"></a>    dta <span class="ot">&lt;-</span> ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb669-6"><a href="method-validation-bhef-machine-piles.html#cb669-6" tabindex="-1"></a>    pr <span class="ot">&lt;-</span> final_predicted_slash_piles <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pred_id<span class="sc">==</span>dta<span class="sc">$</span>pred_id)</span>
<span id="cb669-7"><a href="method-validation-bhef-machine-piles.html#cb669-7" tabindex="-1"></a>    <span class="co">#plt</span></span>
<span id="cb669-8"><a href="method-validation-bhef-machine-piles.html#cb669-8" tabindex="-1"></a>    <span class="fu">ortho_plt_fn</span>(<span class="at">my_ortho_rast=</span>bhef_rgb_rast, <span class="at">stand=</span>sf<span class="sc">::</span><span class="fu">st_union</span>(pr), <span class="at">buffer=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb669-9"><a href="method-validation-bhef-machine-piles.html#cb669-9" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> pr, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;brown&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.5</span>)</span>
<span id="cb669-10"><a href="method-validation-bhef-machine-piles.html#cb669-10" tabindex="-1"></a>  })</span>
<span id="cb669-11"><a href="method-validation-bhef-machine-piles.html#cb669-11" tabindex="-1"></a><span class="co"># combine</span></span>
<span id="cb669-12"><a href="method-validation-bhef-machine-piles.html#cb669-12" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(</span>
<span id="cb669-13"><a href="method-validation-bhef-machine-piles.html#cb669-13" tabindex="-1"></a>  plts_temp</span>
<span id="cb669-14"><a href="method-validation-bhef-machine-piles.html#cb669-14" tabindex="-1"></a>  , <span class="at">ncol =</span> <span class="dv">3</span></span>
<span id="cb669-15"><a href="method-validation-bhef-machine-piles.html#cb669-15" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-609-1.png" width="1008" /></p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="method-validation-bhef-machine-piles.html#cb670-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/BHEF_202306/bhef_commission.jpg&quot;</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="fl">8.5</span>)</span></code></pre></div>
<p>what even is that?</p>
<p>let’s add the CHM to that plot to see if it helps shed light on why these were incorrectly included in the predictions</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="method-validation-bhef-machine-piles.html#cb671-1" tabindex="-1"></a><span class="co"># plot RGB + CHM</span></span>
<span id="cb671-2"><a href="method-validation-bhef-machine-piles.html#cb671-2" tabindex="-1"></a>plts_temp <span class="ot">&lt;-</span></span>
<span id="cb671-3"><a href="method-validation-bhef-machine-piles.html#cb671-3" tabindex="-1"></a>  <span class="fu">which</span>(ground_truth_prediction_match_ans<span class="sc">$</span>match_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;commission&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb671-4"><a href="method-validation-bhef-machine-piles.html#cb671-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(x){</span>
<span id="cb671-5"><a href="method-validation-bhef-machine-piles.html#cb671-5" tabindex="-1"></a>    dta <span class="ot">&lt;-</span> ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(x)</span>
<span id="cb671-6"><a href="method-validation-bhef-machine-piles.html#cb671-6" tabindex="-1"></a>    pr <span class="ot">&lt;-</span> final_predicted_slash_piles <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(pred_id<span class="sc">==</span>dta<span class="sc">$</span>pred_id)</span>
<span id="cb671-7"><a href="method-validation-bhef-machine-piles.html#cb671-7" tabindex="-1"></a>    <span class="co">#plt</span></span>
<span id="cb671-8"><a href="method-validation-bhef-machine-piles.html#cb671-8" tabindex="-1"></a>    <span class="fu">ortho_plt_fn</span>(<span class="at">my_ortho_rast=</span>bhef_rgb_rast, <span class="at">stand=</span>sf<span class="sc">::</span><span class="fu">st_union</span>(pr), <span class="at">buffer=</span><span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb671-9"><a href="method-validation-bhef-machine-piles.html#cb671-9" tabindex="-1"></a>      ggnewscale<span class="sc">::</span><span class="fu">new_scale_fill</span>() <span class="sc">+</span></span>
<span id="cb671-10"><a href="method-validation-bhef-machine-piles.html#cb671-10" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_tile</span>(</span>
<span id="cb671-11"><a href="method-validation-bhef-machine-piles.html#cb671-11" tabindex="-1"></a>        <span class="at">data =</span> chm_rast_stand <span class="sc">%&gt;%</span> </span>
<span id="cb671-12"><a href="method-validation-bhef-machine-piles.html#cb671-12" tabindex="-1"></a>          terra<span class="sc">::</span><span class="fu">crop</span>(</span>
<span id="cb671-13"><a href="method-validation-bhef-machine-piles.html#cb671-13" tabindex="-1"></a>            sf<span class="sc">::</span><span class="fu">st_union</span>(pr) <span class="sc">%&gt;%</span> </span>
<span id="cb671-14"><a href="method-validation-bhef-machine-piles.html#cb671-14" tabindex="-1"></a>              sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(chm_rast_stand)) <span class="sc">%&gt;%</span> </span>
<span id="cb671-15"><a href="method-validation-bhef-machine-piles.html#cb671-15" tabindex="-1"></a>              terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb671-16"><a href="method-validation-bhef-machine-piles.html#cb671-16" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb671-17"><a href="method-validation-bhef-machine-piles.html#cb671-17" tabindex="-1"></a>          terra<span class="sc">::</span><span class="fu">mask</span>(</span>
<span id="cb671-18"><a href="method-validation-bhef-machine-piles.html#cb671-18" tabindex="-1"></a>            sf<span class="sc">::</span><span class="fu">st_union</span>(pr) <span class="sc">%&gt;%</span> </span>
<span id="cb671-19"><a href="method-validation-bhef-machine-piles.html#cb671-19" tabindex="-1"></a>              sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(chm_rast_stand)) <span class="sc">%&gt;%</span> </span>
<span id="cb671-20"><a href="method-validation-bhef-machine-piles.html#cb671-20" tabindex="-1"></a>              terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb671-21"><a href="method-validation-bhef-machine-piles.html#cb671-21" tabindex="-1"></a>          ) <span class="sc">%&gt;%</span> </span>
<span id="cb671-22"><a href="method-validation-bhef-machine-piles.html#cb671-22" tabindex="-1"></a>          <span class="co"># slice the chm below our desired height</span></span>
<span id="cb671-23"><a href="method-validation-bhef-machine-piles.html#cb671-23" tabindex="-1"></a>          <span class="co"># this is what slash_pile_detect_watershed() does</span></span>
<span id="cb671-24"><a href="method-validation-bhef-machine-piles.html#cb671-24" tabindex="-1"></a>          <span class="co"># terra::clamp(upper = 2.3, lower = 0, values = F) %&gt;%</span></span>
<span id="cb671-25"><a href="method-validation-bhef-machine-piles.html#cb671-25" tabindex="-1"></a>          terra<span class="sc">::</span><span class="fu">as.data.frame</span>(<span class="at">xy=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb671-26"><a href="method-validation-bhef-machine-piles.html#cb671-26" tabindex="-1"></a>          dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">f=</span><span class="dv">3</span>)</span>
<span id="cb671-27"><a href="method-validation-bhef-machine-piles.html#cb671-27" tabindex="-1"></a>        , <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y,<span class="at">fill=</span>f)</span>
<span id="cb671-28"><a href="method-validation-bhef-machine-piles.html#cb671-28" tabindex="-1"></a>        , <span class="at">alpha =</span> <span class="fl">0.5</span></span>
<span id="cb671-29"><a href="method-validation-bhef-machine-piles.html#cb671-29" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb671-30"><a href="method-validation-bhef-machine-piles.html#cb671-30" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">na.value =</span> <span class="st">&quot;gray&quot;</span>,<span class="at">name =</span> <span class="st">&quot;CHM (m)&quot;</span>) <span class="sc">+</span></span>
<span id="cb671-31"><a href="method-validation-bhef-machine-piles.html#cb671-31" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">geom_sf</span>(<span class="at">data =</span> pr, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;brown&quot;</span>, <span class="at">lwd =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb671-32"><a href="method-validation-bhef-machine-piles.html#cb671-32" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb671-33"><a href="method-validation-bhef-machine-piles.html#cb671-33" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="fu">paste0</span>(</span>
<span id="cb671-34"><a href="method-validation-bhef-machine-piles.html#cb671-34" tabindex="-1"></a>          <span class="st">&quot;pred ID: &quot;</span>, dta<span class="sc">$</span>pred_id</span>
<span id="cb671-35"><a href="method-validation-bhef-machine-piles.html#cb671-35" tabindex="-1"></a>          , <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Pred area: &quot;</span>, <span class="fu">round</span>(dta<span class="sc">$</span>pred_area_m2,<span class="dv">1</span>)</span>
<span id="cb671-36"><a href="method-validation-bhef-machine-piles.html#cb671-36" tabindex="-1"></a>          <span class="co"># , &quot; | Pred ht: &quot;, round(dta$pred_height_m,1)</span></span>
<span id="cb671-37"><a href="method-validation-bhef-machine-piles.html#cb671-37" tabindex="-1"></a>          , <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Pred dia: &quot;</span>, <span class="fu">round</span>(dta<span class="sc">$</span>pred_diameter_m,<span class="dv">1</span>)</span>
<span id="cb671-38"><a href="method-validation-bhef-machine-piles.html#cb671-38" tabindex="-1"></a>          <span class="co"># , &quot; | Pred dia: &quot;, round(dta$pred_diameter_m,1)</span></span>
<span id="cb671-39"><a href="method-validation-bhef-machine-piles.html#cb671-39" tabindex="-1"></a>        )</span>
<span id="cb671-40"><a href="method-validation-bhef-machine-piles.html#cb671-40" tabindex="-1"></a>      ) <span class="sc">+</span></span>
<span id="cb671-41"><a href="method-validation-bhef-machine-piles.html#cb671-41" tabindex="-1"></a>      ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">legend.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>),<span class="at">legend.title =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>))</span>
<span id="cb671-42"><a href="method-validation-bhef-machine-piles.html#cb671-42" tabindex="-1"></a>  })</span>
<span id="cb671-43"><a href="method-validation-bhef-machine-piles.html#cb671-43" tabindex="-1"></a><span class="co"># plts_temp</span></span>
<span id="cb671-44"><a href="method-validation-bhef-machine-piles.html#cb671-44" tabindex="-1"></a><span class="co"># combine</span></span>
<span id="cb671-45"><a href="method-validation-bhef-machine-piles.html#cb671-45" tabindex="-1"></a>patchwork<span class="sc">::</span><span class="fu">wrap_plots</span>(</span>
<span id="cb671-46"><a href="method-validation-bhef-machine-piles.html#cb671-46" tabindex="-1"></a>  plts_temp</span>
<span id="cb671-47"><a href="method-validation-bhef-machine-piles.html#cb671-47" tabindex="-1"></a>  , <span class="at">ncol =</span> <span class="dv">3</span></span>
<span id="cb671-48"><a href="method-validation-bhef-machine-piles.html#cb671-48" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-611-1.png" width="1008" /></p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="method-validation-bhef-machine-piles.html#cb672-1" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;../data/BHEF_202306/bhef_commission_chm.jpg&quot;</span>, <span class="at">height =</span> <span class="fl">6.6</span>, <span class="at">width =</span> <span class="fl">8.5</span>)</span></code></pre></div>
<p>these are clearly erroneous CHM values which look like they may be at the edge of the stand unit which suggests errors at the edges of the SfM generated point cloud which flowed through to the CHM</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="method-validation-bhef-machine-piles.html#cb673-1" tabindex="-1"></a><span class="co"># Start with the RGB plot as the base layer</span></span>
<span id="cb673-2"><a href="method-validation-bhef-machine-piles.html#cb673-2" tabindex="-1"></a>terra<span class="sc">::</span><span class="fu">plotRGB</span>(bhef_rgb_rast, <span class="at">stretch =</span> <span class="st">&quot;lin&quot;</span>, <span class="at">axes =</span> F)</span>
<span id="cb673-3"><a href="method-validation-bhef-machine-piles.html#cb673-3" tabindex="-1"></a><span class="co"># overlay the chm</span></span>
<span id="cb673-4"><a href="method-validation-bhef-machine-piles.html#cb673-4" tabindex="-1"></a>terra<span class="sc">::</span><span class="fu">plot</span>(chm_rast_stand, <span class="at">col =</span> viridis<span class="sc">::</span><span class="fu">plasma</span>(<span class="dv">100</span>), <span class="at">axes =</span> F, <span class="at">alpha=</span><span class="fl">0.5</span>, <span class="at">add=</span><span class="cn">TRUE</span>, <span class="at">legend=</span><span class="cn">TRUE</span>)</span>
<span id="cb673-5"><a href="method-validation-bhef-machine-piles.html#cb673-5" tabindex="-1"></a></span>
<span id="cb673-6"><a href="method-validation-bhef-machine-piles.html#cb673-6" tabindex="-1"></a><span class="co"># add the erroneous pile outline as the final layer</span></span>
<span id="cb673-7"><a href="method-validation-bhef-machine-piles.html#cb673-7" tabindex="-1"></a>terra<span class="sc">::</span><span class="fu">plot</span>(</span>
<span id="cb673-8"><a href="method-validation-bhef-machine-piles.html#cb673-8" tabindex="-1"></a>  final_predicted_slash_piles <span class="sc">%&gt;%</span> </span>
<span id="cb673-9"><a href="method-validation-bhef-machine-piles.html#cb673-9" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">inner_join</span>(</span>
<span id="cb673-10"><a href="method-validation-bhef-machine-piles.html#cb673-10" tabindex="-1"></a>      ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb673-11"><a href="method-validation-bhef-machine-piles.html#cb673-11" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">filter</span>(match_grp <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;commission&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb673-12"><a href="method-validation-bhef-machine-piles.html#cb673-12" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">select</span>(pred_id)</span>
<span id="cb673-13"><a href="method-validation-bhef-machine-piles.html#cb673-13" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb673-14"><a href="method-validation-bhef-machine-piles.html#cb673-14" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_transform</span>(terra<span class="sc">::</span><span class="fu">crs</span>(bhef_rgb_rast)) <span class="sc">%&gt;%</span> </span>
<span id="cb673-15"><a href="method-validation-bhef-machine-piles.html#cb673-15" tabindex="-1"></a>    terra<span class="sc">::</span><span class="fu">vect</span>()</span>
<span id="cb673-16"><a href="method-validation-bhef-machine-piles.html#cb673-16" tabindex="-1"></a>  , <span class="at">col=</span><span class="cn">NA</span>, <span class="at">border=</span><span class="st">&quot;yellow&quot;</span>, <span class="at">lwd=</span><span class="dv">3</span>, <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb673-17"><a href="method-validation-bhef-machine-piles.html#cb673-17" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-612-1.png" width="1008" /></p>
<p>that CHM has so many edge effects or cloud interference :/</p>
<p>it is likely that none of these would have been included if not for this bad data</p>
</div>
</div>
<div id="stand-level-aggregation-2" class="section level3 hasAnchor" number="11.3.5">
<h3><span class="header-section-number">11.3.5</span> Stand-level Aggregation<a href="method-validation-bhef-machine-piles.html#stand-level-aggregation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>before we leave, let’s summarize the measurement values of the predictions (true positive and false positive) and the ground truth data (true positive and false negative) over the entire stand (this is similar to a basal area comparison in a forest inventory)</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="method-validation-bhef-machine-piles.html#cb674-1" tabindex="-1"></a>sum_df_temp <span class="ot">&lt;-</span></span>
<span id="cb674-2"><a href="method-validation-bhef-machine-piles.html#cb674-2" tabindex="-1"></a>  ground_truth_prediction_match_ans <span class="sc">%&gt;%</span> </span>
<span id="cb674-3"><a href="method-validation-bhef-machine-piles.html#cb674-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!</span>tidyselect<span class="sc">::</span><span class="fu">contains</span>(<span class="st">&quot;volume_m3&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb674-4"><a href="method-validation-bhef-machine-piles.html#cb674-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb674-5"><a href="method-validation-bhef-machine-piles.html#cb674-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(pred_id)) <span class="sc">%&gt;%</span> </span>
<span id="cb674-6"><a href="method-validation-bhef-machine-piles.html#cb674-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb674-7"><a href="method-validation-bhef-machine-piles.html#cb674-7" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb674-8"><a href="method-validation-bhef-machine-piles.html#cb674-8" tabindex="-1"></a>      <span class="at">.cols =</span> tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;gt_&quot;</span>) <span class="sc">|</span> tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;pred_&quot;</span>)</span>
<span id="cb674-9"><a href="method-validation-bhef-machine-piles.html#cb674-9" tabindex="-1"></a>      , <span class="sc">~</span><span class="fu">sum</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb674-10"><a href="method-validation-bhef-machine-piles.html#cb674-10" tabindex="-1"></a>    )</span>
<span id="cb674-11"><a href="method-validation-bhef-machine-piles.html#cb674-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb674-12"><a href="method-validation-bhef-machine-piles.html#cb674-12" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb674-13"><a href="method-validation-bhef-machine-piles.html#cb674-13" tabindex="-1"></a>    <span class="at">cols =</span> dplyr<span class="sc">::</span><span class="fu">everything</span>()</span>
<span id="cb674-14"><a href="method-validation-bhef-machine-piles.html#cb674-14" tabindex="-1"></a>    , <span class="at">names_to =</span> <span class="st">&quot;metric&quot;</span></span>
<span id="cb674-15"><a href="method-validation-bhef-machine-piles.html#cb674-15" tabindex="-1"></a>    , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb674-16"><a href="method-validation-bhef-machine-piles.html#cb674-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb674-17"><a href="method-validation-bhef-machine-piles.html#cb674-17" tabindex="-1"></a>  <span class="do">### !!!! we don&#39;t have height for this data</span></span>
<span id="cb674-18"><a href="method-validation-bhef-machine-piles.html#cb674-18" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb674-19"><a href="method-validation-bhef-machine-piles.html#cb674-19" tabindex="-1"></a>    <span class="sc">!</span>stringr<span class="sc">::</span><span class="fu">str_detect</span>(metric, <span class="st">&quot;height&quot;</span>)</span>
<span id="cb674-20"><a href="method-validation-bhef-machine-piles.html#cb674-20" tabindex="-1"></a>    <span class="sc">&amp;</span> <span class="sc">!</span>stringr<span class="sc">::</span><span class="fu">str_detect</span>(metric, <span class="st">&quot;volume&quot;</span>)</span>
<span id="cb674-21"><a href="method-validation-bhef-machine-piles.html#cb674-21" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb674-22"><a href="method-validation-bhef-machine-piles.html#cb674-22" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb674-23"><a href="method-validation-bhef-machine-piles.html#cb674-23" tabindex="-1"></a>    <span class="at">which_data =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb674-24"><a href="method-validation-bhef-machine-piles.html#cb674-24" tabindex="-1"></a>        stringr<span class="sc">::</span><span class="fu">str_starts</span>(metric,<span class="st">&quot;gt_&quot;</span>) <span class="sc">~</span> <span class="st">&quot;ground truth&quot;</span></span>
<span id="cb674-25"><a href="method-validation-bhef-machine-piles.html#cb674-25" tabindex="-1"></a>        , stringr<span class="sc">::</span><span class="fu">str_starts</span>(metric,<span class="st">&quot;pred_&quot;</span>) <span class="sc">~</span> <span class="st">&quot;prediction&quot;</span></span>
<span id="cb674-26"><a href="method-validation-bhef-machine-piles.html#cb674-26" tabindex="-1"></a>        , T <span class="sc">~</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb674-27"><a href="method-validation-bhef-machine-piles.html#cb674-27" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb674-28"><a href="method-validation-bhef-machine-piles.html#cb674-28" tabindex="-1"></a>      <span class="fu">ordered</span>()</span>
<span id="cb674-29"><a href="method-validation-bhef-machine-piles.html#cb674-29" tabindex="-1"></a>    , <span class="at">pile_metric =</span> metric <span class="sc">%&gt;%</span> </span>
<span id="cb674-30"><a href="method-validation-bhef-machine-piles.html#cb674-30" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;(_rmse|_rrmse|_mean|_mape)$&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb674-31"><a href="method-validation-bhef-machine-piles.html#cb674-31" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="st">&quot;(paraboloid_volume|volume|area|height|diameter)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb674-32"><a href="method-validation-bhef-machine-piles.html#cb674-32" tabindex="-1"></a>      <span class="fu">factor</span>(</span>
<span id="cb674-33"><a href="method-validation-bhef-machine-piles.html#cb674-33" tabindex="-1"></a>        <span class="at">ordered =</span> T</span>
<span id="cb674-34"><a href="method-validation-bhef-machine-piles.html#cb674-34" tabindex="-1"></a>        , <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb674-35"><a href="method-validation-bhef-machine-piles.html#cb674-35" tabindex="-1"></a>          <span class="st">&quot;height&quot;</span></span>
<span id="cb674-36"><a href="method-validation-bhef-machine-piles.html#cb674-36" tabindex="-1"></a>          , <span class="st">&quot;diameter&quot;</span></span>
<span id="cb674-37"><a href="method-validation-bhef-machine-piles.html#cb674-37" tabindex="-1"></a>          , <span class="st">&quot;area&quot;</span></span>
<span id="cb674-38"><a href="method-validation-bhef-machine-piles.html#cb674-38" tabindex="-1"></a>          , <span class="st">&quot;volume&quot;</span></span>
<span id="cb674-39"><a href="method-validation-bhef-machine-piles.html#cb674-39" tabindex="-1"></a>          , <span class="st">&quot;paraboloid_volume&quot;</span></span>
<span id="cb674-40"><a href="method-validation-bhef-machine-piles.html#cb674-40" tabindex="-1"></a>        )</span>
<span id="cb674-41"><a href="method-validation-bhef-machine-piles.html#cb674-41" tabindex="-1"></a>        , <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb674-42"><a href="method-validation-bhef-machine-piles.html#cb674-42" tabindex="-1"></a>          <span class="st">&quot;Height (m)&quot;</span></span>
<span id="cb674-43"><a href="method-validation-bhef-machine-piles.html#cb674-43" tabindex="-1"></a>          , <span class="st">&quot;Diameter (m)&quot;</span></span>
<span id="cb674-44"><a href="method-validation-bhef-machine-piles.html#cb674-44" tabindex="-1"></a>          , <span class="st">&quot;Area (m2)&quot;</span></span>
<span id="cb674-45"><a href="method-validation-bhef-machine-piles.html#cb674-45" tabindex="-1"></a>          , <span class="st">&quot;Volume (m3)&quot;</span></span>
<span id="cb674-46"><a href="method-validation-bhef-machine-piles.html#cb674-46" tabindex="-1"></a>          , <span class="st">&quot;Volume paraboloid&quot;</span></span>
<span id="cb674-47"><a href="method-validation-bhef-machine-piles.html#cb674-47" tabindex="-1"></a>        )</span>
<span id="cb674-48"><a href="method-validation-bhef-machine-piles.html#cb674-48" tabindex="-1"></a>      )</span>
<span id="cb674-49"><a href="method-validation-bhef-machine-piles.html#cb674-49" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb674-50"><a href="method-validation-bhef-machine-piles.html#cb674-50" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(pile_metric) <span class="sc">%&gt;%</span> </span>
<span id="cb674-51"><a href="method-validation-bhef-machine-piles.html#cb674-51" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(pile_metric,which_data) <span class="sc">%&gt;%</span> </span>
<span id="cb674-52"><a href="method-validation-bhef-machine-piles.html#cb674-52" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb674-53"><a href="method-validation-bhef-machine-piles.html#cb674-53" tabindex="-1"></a>    <span class="at">pct_diff =</span> (value<span class="sc">-</span>dplyr<span class="sc">::</span><span class="fu">lag</span>(value))<span class="sc">/</span>dplyr<span class="sc">::</span><span class="fu">lag</span>(value) </span>
<span id="cb674-54"><a href="method-validation-bhef-machine-piles.html#cb674-54" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb674-55"><a href="method-validation-bhef-machine-piles.html#cb674-55" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>()</span></code></pre></div>
<p>plot</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="method-validation-bhef-machine-piles.html#cb675-1" tabindex="-1"></a><span class="co"># plot it</span></span>
<span id="cb675-2"><a href="method-validation-bhef-machine-piles.html#cb675-2" tabindex="-1"></a>sum_df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb675-3"><a href="method-validation-bhef-machine-piles.html#cb675-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb675-4"><a href="method-validation-bhef-machine-piles.html#cb675-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb675-5"><a href="method-validation-bhef-machine-piles.html#cb675-5" tabindex="-1"></a>    <span class="at">stand_id=</span><span class="dv">1</span></span>
<span id="cb675-6"><a href="method-validation-bhef-machine-piles.html#cb675-6" tabindex="-1"></a>    , <span class="at">lab =</span> <span class="fu">paste0</span>(</span>
<span id="cb675-7"><a href="method-validation-bhef-machine-piles.html#cb675-7" tabindex="-1"></a>      scales<span class="sc">::</span><span class="fu">comma</span>(value,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb675-8"><a href="method-validation-bhef-machine-piles.html#cb675-8" tabindex="-1"></a>      , dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb675-9"><a href="method-validation-bhef-machine-piles.html#cb675-9" tabindex="-1"></a>        <span class="fu">is.na</span>(pct_diff) <span class="sc">~</span> <span class="st">&quot;&quot;</span></span>
<span id="cb675-10"><a href="method-validation-bhef-machine-piles.html#cb675-10" tabindex="-1"></a>        , T <span class="sc">~</span> <span class="fu">paste0</span>(</span>
<span id="cb675-11"><a href="method-validation-bhef-machine-piles.html#cb675-11" tabindex="-1"></a>          <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb675-12"><a href="method-validation-bhef-machine-piles.html#cb675-12" tabindex="-1"></a>          , <span class="fu">ifelse</span>(pct_diff<span class="sc">&lt;</span><span class="dv">0</span>,<span class="st">&quot;-&quot;</span>,<span class="st">&quot;+&quot;</span>)</span>
<span id="cb675-13"><a href="method-validation-bhef-machine-piles.html#cb675-13" tabindex="-1"></a>          ,scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">abs</span>(pct_diff),<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb675-14"><a href="method-validation-bhef-machine-piles.html#cb675-14" tabindex="-1"></a>        )</span>
<span id="cb675-15"><a href="method-validation-bhef-machine-piles.html#cb675-15" tabindex="-1"></a>      )</span>
<span id="cb675-16"><a href="method-validation-bhef-machine-piles.html#cb675-16" tabindex="-1"></a>    )</span>
<span id="cb675-17"><a href="method-validation-bhef-machine-piles.html#cb675-17" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb675-18"><a href="method-validation-bhef-machine-piles.html#cb675-18" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(</span>
<span id="cb675-19"><a href="method-validation-bhef-machine-piles.html#cb675-19" tabindex="-1"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(</span>
<span id="cb675-20"><a href="method-validation-bhef-machine-piles.html#cb675-20" tabindex="-1"></a>      <span class="at">x =</span> which_data</span>
<span id="cb675-21"><a href="method-validation-bhef-machine-piles.html#cb675-21" tabindex="-1"></a>      , <span class="at">y =</span> value</span>
<span id="cb675-22"><a href="method-validation-bhef-machine-piles.html#cb675-22" tabindex="-1"></a>      , <span class="at">label =</span> lab</span>
<span id="cb675-23"><a href="method-validation-bhef-machine-piles.html#cb675-23" tabindex="-1"></a>      , <span class="at">group =</span> stand_id</span>
<span id="cb675-24"><a href="method-validation-bhef-machine-piles.html#cb675-24" tabindex="-1"></a>    )</span>
<span id="cb675-25"><a href="method-validation-bhef-machine-piles.html#cb675-25" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb675-26"><a href="method-validation-bhef-machine-piles.html#cb675-26" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">key_glyph =</span> <span class="st">&quot;point&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">&quot;gray&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb675-27"><a href="method-validation-bhef-machine-piles.html#cb675-27" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_col</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">fill =</span> which_data), <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">width =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb675-28"><a href="method-validation-bhef-machine-piles.html#cb675-28" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;brown&quot;</span>)) <span class="sc">+</span></span>
<span id="cb675-29"><a href="method-validation-bhef-machine-piles.html#cb675-29" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;brown&quot;</span>)) <span class="sc">+</span></span>
<span id="cb675-30"><a href="method-validation-bhef-machine-piles.html#cb675-30" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_text</span>(</span>
<span id="cb675-31"><a href="method-validation-bhef-machine-piles.html#cb675-31" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.25</span></span>
<span id="cb675-32"><a href="method-validation-bhef-machine-piles.html#cb675-32" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb675-33"><a href="method-validation-bhef-machine-piles.html#cb675-33" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_wrap</span>(<span class="at">facets =</span> dplyr<span class="sc">::</span><span class="fu">vars</span>(pile_metric), <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">axes =</span> <span class="st">&quot;all_x&quot;</span>) <span class="sc">+</span></span>
<span id="cb675-34"><a href="method-validation-bhef-machine-piles.html#cb675-34" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma, <span class="at">expand =</span> ggplot2<span class="sc">::</span><span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>,.<span class="dv">3</span>)), <span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb675-35"><a href="method-validation-bhef-machine-piles.html#cb675-35" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb675-36"><a href="method-validation-bhef-machine-piles.html#cb675-36" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb675-37"><a href="method-validation-bhef-machine-piles.html#cb675-37" tabindex="-1"></a>    , <span class="at">subtitle =</span> <span class="st">&quot;Comparison of aggregated measurements at the stand level&quot;</span></span>
<span id="cb675-38"><a href="method-validation-bhef-machine-piles.html#cb675-38" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb675-39"><a href="method-validation-bhef-machine-piles.html#cb675-39" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb675-40"><a href="method-validation-bhef-machine-piles.html#cb675-40" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb675-41"><a href="method-validation-bhef-machine-piles.html#cb675-41" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb675-42"><a href="method-validation-bhef-machine-piles.html#cb675-42" tabindex="-1"></a>    , <span class="at">axis.text.x =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb675-43"><a href="method-validation-bhef-machine-piles.html#cb675-43" tabindex="-1"></a>    , <span class="at">strip.text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb675-44"><a href="method-validation-bhef-machine-piles.html#cb675-44" tabindex="-1"></a>    , <span class="at">panel.grid =</span> ggplot2<span class="sc">::</span><span class="fu">element_blank</span>()</span>
<span id="cb675-45"><a href="method-validation-bhef-machine-piles.html#cb675-45" tabindex="-1"></a>  ) </span></code></pre></div>
<p><img src="manitou_slash_piles_files/figure-html/unnamed-chunk-615-1.png" width="1008" /></p>
<p>table it</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="method-validation-bhef-machine-piles.html#cb676-1" tabindex="-1"></a>sum_df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb676-2"><a href="method-validation-bhef-machine-piles.html#cb676-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(pile_metric, which_data, value, pct_diff) <span class="sc">%&gt;%</span> </span>
<span id="cb676-3"><a href="method-validation-bhef-machine-piles.html#cb676-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb676-4"><a href="method-validation-bhef-machine-piles.html#cb676-4" tabindex="-1"></a>    <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">comma</span>(value,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb676-5"><a href="method-validation-bhef-machine-piles.html#cb676-5" tabindex="-1"></a>    , <span class="at">pct_diff =</span> scales<span class="sc">::</span><span class="fu">percent</span>(pct_diff,<span class="at">accuracy=</span><span class="fl">0.1</span>)</span>
<span id="cb676-6"><a href="method-validation-bhef-machine-piles.html#cb676-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb676-7"><a href="method-validation-bhef-machine-piles.html#cb676-7" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kbl</span>(</span>
<span id="cb676-8"><a href="method-validation-bhef-machine-piles.html#cb676-8" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparison of aggregated measurements at the stand level&quot;</span></span>
<span id="cb676-9"><a href="method-validation-bhef-machine-piles.html#cb676-9" tabindex="-1"></a>    , <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb676-10"><a href="method-validation-bhef-machine-piles.html#cb676-10" tabindex="-1"></a>      <span class="st">&quot;.&quot;</span>, <span class="st">&quot;measurement source&quot;</span></span>
<span id="cb676-11"><a href="method-validation-bhef-machine-piles.html#cb676-11" tabindex="-1"></a>      , <span class="st">&quot;stand-level total&quot;</span>, <span class="st">&quot;% difference&quot;</span></span>
<span id="cb676-12"><a href="method-validation-bhef-machine-piles.html#cb676-12" tabindex="-1"></a>    )</span>
<span id="cb676-13"><a href="method-validation-bhef-machine-piles.html#cb676-13" tabindex="-1"></a>    , <span class="at">escape =</span> F</span>
<span id="cb676-14"><a href="method-validation-bhef-machine-piles.html#cb676-14" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb676-15"><a href="method-validation-bhef-machine-piles.html#cb676-15" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb676-16"><a href="method-validation-bhef-machine-piles.html#cb676-16" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">collapse_rows</span>(<span class="at">columns =</span> <span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-616">Table 11.6: </span>Comparison of aggregated measurements at the stand level
</caption>
<thead>
<tr>
<th style="text-align:left;">
.
</th>
<th style="text-align:left;">
measurement source
</th>
<th style="text-align:left;">
stand-level total
</th>
<th style="text-align:left;">
% difference
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="2">
Diameter (m)
</td>
<td style="text-align:left;">
ground truth
</td>
<td style="text-align:left;">
545.7
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
prediction
</td>
<td style="text-align:left;">
539.3
</td>
<td style="text-align:left;">
-1.2%
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top !important;" rowspan="2">
Area (m2)
</td>
<td style="text-align:left;">
ground truth
</td>
<td style="text-align:left;">
5,198.6
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
prediction
</td>
<td style="text-align:left;">
4,808.9
</td>
<td style="text-align:left;">
-7.5%
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="method-validation-pinyon-juniper.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="method-validation-arnf-machine-piles.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
